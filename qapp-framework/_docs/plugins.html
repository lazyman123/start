<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>QApp 插件</title>
    <link rel="stylesheet" href="source/app.css"/>
    <link rel="stylesheet" href="source/highlight.min.css">
</head>
<body>
<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>


<!-- Docs master nav -->
<header class="navbar navbar-static-top docs-nav" id="top" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
            <a href="http://ued.qunar.com/mobile/" class="navbar-brand">HY</a>
            
        </div>
        <nav id="bs-navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                
                <li class="active">
                    <a href="http://ued.qunar.com/mobile/qapp/doc/" target="">QApp</a>
                </li>
                
                <li class="">
                    <a href="http://ued.qunar.com/mobile/kami/doc/" target="">Kami</a>
                </li>
                
                <li class="">
                    <a href="http://ued.qunar.com/mobile/yo/doc/" target="">Yo</a>
                </li>
                
                <li class="">
                    <a href="http://hy.qunar.com/docs/qunarapi-api.html" target="">QunarAPI</a>
                </li>
                
                <li class="">
                    <a href="http://ued.qunar.com/mobile/qmb2/" target="">QMB2</a>
                </li>
                
                <li class="">
                    <a href="http://ued.qunar.com/mobile/statistics/" target="">Statistics</a>
                </li>
                
                <li class="">
                    <a href="http://ued.qunar.com/mobile/blog/" target="">Blog</a>
                </li>
                
                <li class="">
                    <a href="http://hy.qunar.com/docs/index.html" target="">Hytive</a>
                </li>
                
                
            </ul>
        </nav>
    </div>
</header>

<!-- Docs page layout -->

<div class="docs-header" id="content" style="margin-bottom:0">
    <div class="container">
        <h1>QApp Framework 插件</h1>
        <p>简洁 、轻量 、实用的移动前端开发框架</p>
    </div>
</div>



<header class="navbar navbar-static-top docs-second-nav">
    <div class="container">
        <nav>
            <ul class="nav navbar-nav">
                
                <li class="">
                    
                    <a href="index.html">简介</a>
                    
                </li>
                
                <li class="">
                    
                    <a href="api.html">API</a>
                    
                </li>
                
                <li class="">
                    
                    <a href="hybird.html">混合开发</a>
                    
                </li>
                
                <li class="active">
                    
                    <a href="plugins.html">插件</a>
                    
                </li>
                
                <li class="">
                    
                    <a href="build.html">构建</a>
                    
                </li>
                
                <li class="">
                    
                    <a href="changelog.html">版本</a>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</header>


<div class="container docs-container">
    
    <div class="row">
        <div class="col-md-9" role="main">

            
            
            
            <div class="docs-section">
                
                
                <h1 id="ajax" class="page-header">ajax</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>ajax</code> (适配 jQuery 风格，集成 jsonp 和 ajax</p>
<p>插件配置: <code>{Object}</code></p>
<p>基本配置如下:</p>
<pre><code>{
    &quot;charset&quot;: &quot;UTF-8&quot;,
    &quot;timeout&quot;: 30 * 1000,
    &quot;argsType&quot;: &quot;query&quot;,
    &quot;method&quot;: &quot;get&quot;,
    &quot;isEncode&quot;: false,
    &quot;responseType&quot;: &quot;json&quot;,
    &quot;withCredentials&quot;: false
}
</code></pre><p>配置参数：</p>
<ul>
<li><code>url</code>: <code>{String}</code> 请求地址。</li>
<li><code>bizType</code>: <code>{String}</code> 业务中默认参数设置。默认 <code>false</code> 。</li>
<li><code>charset</code>: <code>{String}</code> 编码。默认 <code>UTF-8</code> 。</li>
<li><code>timeout</code>: <code>{Number}</code> 请求超时时间。默认 <code>30 * 1000</code> 。</li>
<li><code>data</code>: <code>{Object}</code> 请求参数。</li>
<li><code>argsType</code>: <code>{String}</code> 请求参数类型。可选值：<code>query</code> 和 <code>json</code>。默认 <code>query</code> 。</li>
<li><code>method</code>: <code>{String}</code> 请求方式。默认 <code>get</code> 。</li>
<li><code>headers</code>: <code>{Object}</code> 请求头信息。</li>
<li><code>isEncode</code>: <code>{Boolean}</code> 否是编码。默认 <code>false</code> 。</li>
<li><code>dataType</code>: <code>{String}</code> 返回数据的数据类型。默认 <code>json</code> 。</li>
<li><code>cache</code>: <code>{Boolean}</code> 是否允许缓存。默认 <code>false</code> 。</li>
<li><code>withCredentials</code>: <code>{Boolean}</code> 是否带有验证信息。默认 <code>false</code> 。</li>
<li><code>jsonp</code>: <code>{String}</code> 为 jsonp 请求重写回调函数名对应的 key。这个值用来替代在 url 中&quot;callback=?&quot;的&quot;callback&quot;部分。</li>
<li><code>jsonpCallback</code>: <code>{String}</code> 为 jsonp 请求指定一个回调函数名。这个值将用来取代自动生成的随机函数名。</li>
<li><code>success</code>: <code>{Function}</code> 请求成功后的函数调用。</li>
<li><code>error</code>: <code>{Function}</code> 请求失败后的函数调用。</li>
<li><code>onAbort</code>: <code>{Function}</code> 取消请求后的函数调用。</li>
<li><code>onFail</code>: <code>{Function}</code> 请求失败后的函数调用。</li>
</ul>
<h4 id="添加的方法">添加的方法</h4><blockquote>
<p>QApp.ajax.setBizOptions(key, opt)</p>
</blockquote>
<p>说明：设置业务的基本参数</p>
<p>参数：</p>
<ul>
<li><code>key</code>: <code>{String|Object}</code> 业务参数关键字。当key类型为字符串时，以key-value的形式进行设置；key类型为Object时，将对象作为参数对象进行添加</li>
<li><code>opt</code>: <code>{String|Undefined}</code> 业务参数值</li>
</ul>
<blockquote>
<p>QApp.ajax.addMock(key, mock)</p>
</blockquote>
<p>说明：mock数据</p>
<p>参数：</p>
<ul>
<li><code>key</code>: <code>{String|Object}</code> key类型为String时，为mock数据的关键字；key的类型为Object时，表示mock数据对象。</li>
<li><code>mock</code>: <code>{Object}</code> mock数据</li>
</ul>
<blockquote>
<p>QApp.ajax.addReqFilter(filter)</p>
</blockquote>
<p>说明：添加请求参数的过滤函数</p>
<p>参数：</p>
<ul>
<li><code>filter</code>: <code>{Function}</code> 过滤函数</li>
</ul>
<blockquote>
<p>QApp.ajax.removeReqFilter(filter)</p>
</blockquote>
<p>说明：移除某个请求时的过滤参数</p>
<p>参数：</p>
<ul>
<li><code>filter</code>: <code>{Function}</code> 过滤函数</li>
</ul>
<blockquote>
<p>QApp.ajax.addRespFilter(filter)</p>
</blockquote>
<p>说明：添加数据的过滤函数</p>
<p>参数：</p>
<ul>
<li><code>filter</code>: <code>{Function}</code> 过滤函数</li>
</ul>
<blockquote>
<p>QApp.ajax.removeRespFilter(filter)</p>
</blockquote>
<p>说明：移除数据的过滤函数</p>
<p>参数：</p>
<ul>
<li><code>filter</code>: <code>{Function}</code> 过滤函数</li>
</ul>
<h4 id="使用示例">使用示例</h4><pre><code>// 在defineView时，plugins 内添加 ajax
// 正常的 ajax 请求
var ajaxDeferred = self.ajax({
    url: requestURL
}).done(function (data) {
    // TODO
}).fail(function () {
    // TODO
}).all(function (){
    // TODO
})


// 取消
ajaxDeferred.trans.abort()
</code></pre><h5 id="本地mock数据">本地mock数据</h5><p><code>QApp-plugin-ajax</code> 插件提供本地 mock 数据的功能，使用方法:</p>
<pre><code>// 添加 mock 数据方式
// QApp.ajax.addMock(&quot;key&quot;, data); or
QApp.ajax.addMock({
    &quot;key&quot; : data
});

self.ajax({
    mockKey: &quot;key&quot;,
    mock: true,
    url: requestURL
}).done(function (data) {
 // TODO
});
</code></pre><h5 id="添加过滤函数">添加过滤函数</h5><pre><code>// 添加请求过滤函数
QApp.ajax.addReqFilter(function(opt, deferred) {
    // 如果通过 view.ajax 方式使用 ajax，
    // 通过以下方式获取 view
    // opt.__view
})


// 添加数据过滤函数
QApp.ajax.addRespFilter(function(data, err, opt, deferred) {
    if (err) {
        switch(err.type) {
            case &#39;Timeout&#39;:
                // 超时
                break;
            case &#39;Abort&#39;:
                // 取消
                break;
            case &#39;Fail&#39;:
                // 失败
                break;
            default:
                // 其他。目前只有上面三种出错情况
        }
    }
})
</code></pre>
                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="artTemplate" class="page-header">artTemplate</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>artTemplate</code></p>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>添加的方法 <code>renderData(key, data, container, appendType)</code></p>
<ul>
<li>Param <code>key</code>: <code>{String}</code> 关键字</li>
<li>Param <code>data</code>: <code>{Object}</code> 渲染数据</li>
<li>Param <code>container</code>: <code>{String}</code> node的选择器</li>
<li>Param <code>appendType</code>: <code>{String}</code> 插入位置设置，值为<code>beforebegin</code>(插入目标节点前)、<code>afterbegin</code>(插入到目标节点的第一个子节点前)、<code>inner</code>(替换目标内子元素)、<code>beforeend</code>(插入到目标节点的最后子节点之后)、<code>afterend</code>(插入到目标节点之后)</li>
</ul>
<h4 id="示例">示例</h4><pre><code>QApp.defineView(&#39;name&#39; {
    html: &#39;&lt;p&gt;{{name}}&lt;/p&gt;&#39;,
    plugins: [{
        name: &#39;artTemplate&#39;,
        options: {
            global: {
                data: {&#39;name&#39;: &#39;david&#39;}
            }
        }
    }]
});

// 动态渲染
QApp.defineView(&#39;pageA.pageA-1&#39;, {
    html: html,
    plugins: [{
        name: &#39;artTemplate&#39;,
        options: {
            key: {
                template : tpl,
                container : &#39;[node-type=hoganContainer]&#39;,
                appendType : &#39;inner&#39;
            }
        }
    }],
    init: {
        myFunc: function() {
            this.renderData(&#39;key&#39;, { // render data
                data: data
            });
        }
    }
});
</code></pre>
                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="avalon" class="page-header">avalon</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>avalon</code></p>
<p>插件配置：<code>Function</code> 或者 <code>Map&lt;String, Function&gt;</code></p>
<ul>
<li>当配置为 <code>Function</code> 时，则是一个 <code>factory</code>， 然后以 <code>View</code> 的 <code>root</code> 为根节点，并在其上自己添加 <code>ms-controller</code> ， 并 <code>scan</code>。</li>
<li>当配置为 <code>Map</code> 时，则是多个 <code>factory</code> ，相应的<code>key</code> 则是其<code>id</code>，需要用户自己在模板上添加 <code>ms-controller</code>。</li>
</ul>
<p>注：</p>
<ul>
<li><code>avalon</code> 的 <code>factory</code> 没有绑定 <code>context (this)</code>。</li>
<li>插件将 <code>context (this)</code> 设置成当前的 <code>View</code> 实体。</li>
</ul>
<p>示例:</p>
<pre><code>{
    name: &#39;avalon&#39;,
    options: function(vm) {
        //TODO
    }
}
</code></pre><p>在 <code>View</code> 的 <code>extra</code> 配置中配置 <code>vmcache</code> 可开启 <code>vm</code> 缓存功能。</p>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>添加的方法: <code>getVM(key)</code></p>
<ul>
<li>Param <code>key</code>: <code>{Undefined|String}</code> 关键字</li>
<li>Return <code>{VModel}</code></li>
<li>当包含单一的 <code>vm</code> 时，用 <code>getVM()</code> 获取；如果是包含多个 <code>vm</code> 时，用 <code>getVM(key)</code>，<code>key</code> 为 <code>vm</code> 的 <code>id</code>。</li>
</ul>
<p>重写的方法: <code>mergeParam(newParam)</code></p>
<ul>
<li>逻辑和原来一样，增加了更改 <code>vm</code> 的逻辑。</li>
</ul>
<p>重写的方法: <code>destory()</code></p>
<ul>
<li>和原来逻辑一样，增加了序列化保存 <code>vm</code> 的逻辑。</li>
</ul>
<h4 id="其他事宜">其他事宜</h4><p>重写了 <code>QApp.addWidget</code> 方法，对于此方法的说明，详见 <code>widget.md</code>。</p>
<p>作用是，将注册到 <code>QApp</code> 的组件，同时注册到 <code>avalon</code> 组件内。可以使用 <code>ms-widget=qapp-组件名</code> 的形式调用，主要解决，<code>avalon</code> 的 <code>vm</code> 更改，影响到 <code>Dom</code> 增添时，会触发组件的逻辑。</p>

                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="basic" class="page-header">basic</h1>
                
                
                
                <div class="markdown-body">
                    <h3 id="简介">简介</h3><p>插件名称: <code>basic</code></p>
<p>基础插件组，主要用于视图的展现效果，
通过 open 和 show 中配置 ani 使用，
其中包括 dialog, actionSheet, popup 三个动画插件。</p>
<p>PS: <strong>moveEnter</strong> 插件放到 <code>QApp</code> 核心包内，作为默认效果。</p>
<h3 id="MoveEnter 插件说明">MoveEnter 插件说明</h3><p>插件名称: <code>moveEnter</code></p>
<p>插件配置：<code>{Object}</code></p>
<p>基本配置如下:</p>
<pre><code>{
    &quot;autoHide&quot;: true,
    &quot;position&quot;: &quot;right&quot;,
    &quot;distance&quot;: 0,
    &quot;duration&quot;: 300
}
</code></pre><p>配置参数：</p>
<ul>
<li><code>autoHide</code>: <code>{Boolean}</code> 是否自动隐藏。 默认 <code>true</code> 。</li>
<li><code>position</code>: <code>{String}</code> 从何方移入。 默认 <code>right</code> 。可能的值 <code>right</code> | <code>left</code></li>
<li><code>distance</code>: <code>{Number}</code> 移入距离。 默认 <code>0</code>。 （如果为 <code>0</code>， 自动获取视图的对应尺寸作为 <code>distance</code>， 当 <code>App</code> 的 <code>type</code> 为 <code>mobile</code> 时，默认全屏尺寸）</li>
<li><code>duration</code>: <code>{Number}</code> 动画效果时长。 默认 <code>300</code>。</li>
</ul>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>重写 <code>show</code> 和 <code>hide</code> 方法，两个方法均没参数。</p>
<h3 id="Dialog 插件说明">Dialog 插件说明</h3><p>插件名称: <code>dialog</code></p>
<p>插件配置：<code>{Object}</code></p>
<p>基本配置如下:</p>
<pre><code>{
    &quot;autoHide&quot;: false,
    &quot;maskColor&quot;: &quot;#000&quot;,
    &quot;maskOpacity&quot;: &quot;0.4&quot;,
    &quot;duration&quot;: 200,
    &quot;width&quot;: 0,
    &quot;height&quot;: 0
}
</code></pre><p>配置参数：</p>
<ul>
<li><code>autoHide</code>: <code>{Boolean}</code> 是否自动隐藏。 默认 <code>false</code> 。</li>
<li><code>maskColor</code>: <code>{String}</code> 蒙层颜色。 默认 <code>#CCC</code> 。</li>
<li><code>maskOpacity</code>: <code>{String}</code> 蒙层透明度。 默认 <code>0.5</code>。</li>
<li><code>duration</code>: <code>{Number}</code> 动画效果时长。 默认 <code>300</code>。</li>
<li><code>width</code>: <code>{Number}</code> <code>dialog</code> 宽度。 默认 <code>0</code>。（如果为 <code>0</code>， 自动获取视图的宽度）</li>
<li><code>height</code>: <code>{Number}</code> <code>dialog</code> 高度。 默认 <code>0</code>。（如果为 <code>0</code>， 自动获取视图的高度）</li>
</ul>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>重写 <code>show</code> 和 <code>hide</code> 方法，两个方法均没参数。</p>
<h3 id="Popup 插件说明">Popup 插件说明</h3><p>插件名称: <code>popup</code></p>
<p>插件配置：<code>{Object}</code></p>
<p>基本配置如下:</p>
<pre><code>{
  &quot;autoHide&quot;: true,
  &quot;autoDirection&quot;: true,
  &quot;direction&quot;: &quot;right&quot;,
  &quot;duration&quot;: 100,
  &quot;width&quot;: 0,
  &quot;height&quot;: 0,
  &quot;position&quot;: &quot;center&quot;
}
</code></pre><p>配置参数：</p>
<ul>
<li><code>autoHide</code>: <code>{Boolean}</code> 是否自动隐藏。 默认 <code>true</code> 。</li>
<li><code>autoDirection</code>: <code>{Boolean}</code> 自动选择方向。 默认 <code>true</code> 。</li>
<li><code>direction</code>: <code>{String}</code> 从何方移入。 默认 <code>right</code> 。可能的值 <code>right</code> | <code>left</code> | <code>top</code> | <code>bottom</code></li>
<li><code>duration</code>: <code>{Number}</code> 动画效果时长。 默认 <code>100</code>。</li>
<li><code>width</code>: <code>{Number}</code> <code>popup</code> 宽度。 默认 <code>0</code>。</li>
<li><code>height</code>: <code>{Number}</code> <code>popup</code> 高度。 默认 <code>0</code>。</li>
<li><code>position</code>: <code>{String}</code> 上下显示时的居中情况。 默认 <code>center</code> 。可能的值 <code>center</code> | <code>right</code> | <code>left</code></li>
</ul>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>重写 <code>show</code> 和 <code>hide</code> 方法，<code>show</code>方法有参数，要指定显示时相对应的 <code>element</code>。</p>
<h3 id="ActionSheet 插件说明">ActionSheet 插件说明</h3><p>插件名称: <code>actionSheet</code></p>
<p>插件配置：<code>{Object}</code></p>
<p>基本配置如下:</p>
<pre><code>{
  &quot;autoHide&quot;: true,
  &quot;distance&quot;: 0,
  &quot;duration&quot;: 200,
  &quot;showMask&quot;: true,
  &quot;maskColor&quot;: &quot;#000&quot;,
  &quot;maskOpacity&quot;: &quot;0.4&quot;
}
</code></pre><p>配置参数：</p>
<ul>
<li><code>autoHide</code>: <code>{Boolean}</code> 是否自动隐藏。 默认 <code>false</code> 。</li>
<li><code>distance</code>: <code>{Number}</code> 移入距离。 默认 <code>0</code>。</li>
<li><code>duration</code>: <code>{Number}</code> 动画效果时长。 默认 <code>200</code>。</li>
<li><code>showMask</code>: <code>{Booleamn}</code> 是否显示蒙层。 默认 <code>true</code>。</li>
<li><code>maskColor</code>: <code>{String}</code> 蒙层颜色。 默认 <code>#000</code> 。</li>
<li><code>maskOpacity</code>: <code>{String}</code> 蒙层透明度。 默认 <code>0.4</code>。</li>
</ul>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>重写 <code>show</code> 和 <code>hide</code> 方法，两个方法均没参数。</p>
<p>添加 <code>refresh</code> 方法，在 view 高度发生变化时刷新 view。</p>

                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="delegated" class="page-header">delegated</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>delegated</code></p>
<p>插件配置：<code>{Object}</code></p>
<p>默认配置如下:</p>
<pre><code>{
    &quot;tag&quot;: &quot;action-type&quot;,
    &quot;eventType&quot;: &quot;tap&quot;
}
</code></pre><p>配置参数：</p>
<ul>
<li><code>tag</code>: <code>{String}</code> 监听DOM中具有<code>action-type</code>属性的节点。</li>
<li><code>eventType</code>: <code>{String}</code> 事件类型，默认为<code>tap</code>事件。</li>
</ul>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>添加的方法: <code>bind(action, eventType, process)</code></p>
<ul>
<li>Param <code>action</code>: <code>{String}</code> 监听关键字</li>
<li>Param <code>eventType</code>: <code>{String|Function}</code> 事件类型或处理函数</li>
<li>Param <code>process</code>: <code>{Function}</code> 处理函数</li>
<li>Return <code>{Undefined}</code></li>
</ul>
<h4 id="示例">示例</h4><pre><code>QApp.defineView(&#39;name&#39; {
    html: &#39;&lt;p action-type=&quot;abc&quot; data-arg=&quot;xyz&quot;&gt;Some&lt;/p&gt;&lt;p action-type=&quot;def&quot; data-arg=&quot;xyz&quot;&gt;Any&lt;/p&gt;&#39;,
    plugins: [{
        name: &#39;delegated&#39;,
        options: {
            tag: &#39;action-type&#39;,
            eventType: &#39;tap&#39;
        }
    }],
    ready: function() {
        this.bind(&#39;abc&#39;, function(e, data) {
            // data.arg === &#39;xyz&#39;
        });
    },
    bindActions: {
        &#39;def&#39; : function(e, data) {
            // data.arg === &#39;xyz&#39;
        }
    }
});
</code></pre>
                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="doms" class="page-header">doms</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>doms</code></p>
<p>配置参数：</p>
<ul>
<li><code>tag</code>: <code>{String}</code> 查找DOM中具有相同属性的节点，并建立以值建立映射。默认为 <code>node-type</code>。</li>
</ul>
<p>说明：</p>
<p>通过 view.doms 访问属性为 tag 的节点。</p>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>添加的方法: <code>find(type)</code></p>
<ul>
<li>Param <code>type</code>: <code>{String}</code> node-type属性值</li>
</ul>
<p>在 view 的 ready 事件阶段后，可以通过view.find方法快速访问 node 节点。</p>
<h4 id="示例">示例</h4><pre><code>QApp.defineView(&#39;name&#39; {
    html: &#39;&lt;p node-type=&quot;abc&quot;&gt;Some&lt;/p&gt;&#39;,
    plugins: [{
        name: &#39;doms&#39;,
        options: {
            tag: &#39;node-type&#39;
        }
    }],
    init: {
        pHandler: function(event) {
            // this.doms.abc === &lt;p/&gt;
        }
    },
    ready: function() {
        var p = view.find(&#39;abc&#39;), // p === &lt;p /&gt;
            self = this;
        p.addEventListener(&#39;tap&#39;, self.pHandler, false)
    }
});
</code></pre>
                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="fastclick" class="page-header">fastclick</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>fastclick</code> (移动端快速点击)</p>
<h4 id="说明">说明</h4><p>在视图 <code>View</code> 展现时，给视图增加 <code>fastclick</code> 机制。</p>

                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="gesture" class="page-header">gesture</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>gesture</code> (手势库)</p>
<h4 id="说明">说明</h4><p>现在支持轻触(tap)，双轻触(doubletap)，长按(press)，快滑(flick)，滑动(pan)。</p>
<p>扩展支持双指缩放(pinch)。</p>
<h3 id="事件名和参数">事件名和参数</h3><p>对于每个事件，事件对象里都有以下属性：<code>screenX</code>， <code>screenY</code>， <code>clientX</code>， <code>clientY</code>， <code>pageX</code>， <code>pageY</code>。</p>
<ul>
<li>轻触 ：<code>tap</code></li>
<li>双轻触 ：<code>doubletap</code></li>
<li>长按 ：<code>press</code>、<code>pressend</code></li>
<li>触摸 ：<code>feel</code></li>
<li>轻滑 ：<code>flick</code>  | 拓展属性：<code>offsetX</code>、<code>offsetY</code>、<code>speedX</code>、<code>speedY</code>、<code>duration</code>、<code>degree</code>、<code>directions</code></li>
<li>滑动 ：<code>pan</code>、<code>panend</code> | 扩展属性：<code>offsetX</code>、<code>offsetY</code>、<code>degree</code>、<code>directions</code> | <code>panend</code> 包含扩展属性： <code>speedX</code>、<code>speedY</code>、<code>duration</code></li>
<li>缩放 ：<code>pinch</code>、<code>pinchend</code> | 扩展属性：<code>scale</code></li>
</ul>
<h3 id="事件触发说明：">事件触发说明：</h3><h4 id="tap / doubletap / press / feel 触按事件">tap / doubletap / press / feel 触按事件</h4><ul>
<li>用户触碰屏幕，并且位移距离小于 <strong>10</strong>，则会判定为触按事件。</li>
<li>用户开始触碰屏幕和结束触碰直接时差小于 <strong>200ms</strong> ，则会被判定为tap事件，反之被判定为press事件。</li>
<li>tap和press事件 <em>不会被同时触发</em> 。</li>
<li>如果两次tap事件的时间差小于 <strong>500ms</strong>，则会被判定为doubletap事件。</li>
<li>doubletap事件和tap事件 <em>会同时触发</em>，doubletap会在第二次tap事件 <em>之前</em> 触发。</li>
<li>feel即触即触发，和tap、press并行。</li>
</ul>
<h4 id="flick / pan 滑动事件">flick / pan 滑动事件</h4><ul>
<li>用户点击屏幕，并且位移距离大于 <strong>10</strong>，则会判定为滑动事件。</li>
<li>用户开始触碰屏幕和结束触碰直接时差小于 <strong>300ms</strong> ，则会被判定为flick事件。</li>
<li>flick和press事件 <em>会被同时触发</em> 。</li>
<li>flick会在pressend事件 <em>之后</em> 触发。</li>
<li>degree属性基准为水平向右坐标轴，顺时针方向，单位是 <strong>角度</strong>。</li>
<li>directions为滑动方向，为一个 <em>数组</em>：<ul>
<li>元素值为：<code>up</code>、<code>down</code>、<code>left</code>、<code>right</code>；</li>
<li>第一个元素为 <strong>主方向</strong>，第二个元素是 <strong>副方向</strong>；</li>
<li>当实际方向与主方向的夹角小于 <strong>15度</strong> 时，不存在副方向。</li>
</ul>
</li>
</ul>
<h4 id="pinch 缩放事件">pinch 缩放事件</h4><ul>
<li>用户双指点击屏幕，并且移动，直接距离变化量大于 <strong>10</strong>，则会判定为缩放事件。</li>
</ul>

                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="globalContext" class="page-header">globalContext</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名：<code>globalContext</code></p>
<p>全局工具类插件，本地存储组件。本插件提供两种版本的本地存储，请根据使用环境选择。</p>
<h4 id="使用方式">使用方式</h4><h5 id="1. 直接使用localStorage">1. 直接使用localStorage</h5><blockquote>
<p>QApp.util.storage(key[, value])</p>
</blockquote>
<p>说明：存/取/删除单条数据</p>
<ul>
<li>获取数据：只有 <strong>一个参数</strong> 时，为<code>get</code>方法。</li>
<li>设置数据：有 <strong>多个参数</strong> 时，为<code>set</code>方法；第二个参数 <code>value</code> 支持任何类型的值。</li>
<li>删除数据：<code>value</code> 为 <code>undefined</code> 或 <code>null</code> 为删除操作。</li>
</ul>
<blockquote>
<p>QApp.util.storage.clear();</p>
</blockquote>
<p>说明：清除所有数据</p>
<h5 id="2. 使用globalContext">2. 使用globalContext</h5><p><strong>使用场景：</strong></p>
<p>SPA/多webview项目里，数据传递、数据共享等运行时数据。</p>
<p><strong>注意事项：</strong></p>
<p>该种存取数据的方法来源于SPA项目：在一个页面中，经常有一些运行时数据来进行数据传递或共享，所以是存放在内存中的。但是，到了大客户端/独立客户端的 <code>多webview</code> 时代， webview之间无法共享内存，所以在webview之间这些运行时数据需要通过localStorage来进行中转。即：这些数据在单个webview/SPA内还是存储在内存中，而在页面之间，通过localStorage将这些数据重新同步到不同的内存中。之所以没有用localStorage来直接取代内存，是因为ls的读写是阻塞式的读写文件，对于一些存取频繁的数据进行操作，效率还是较差。</p>
<p><strong>重要：</strong>在多webview环境时，需要在初始化的时候，通过 <code>QApp.util.globalContext.addLocalKeys</code> 来指定哪些数据是需要在webview之间传递的，本插件会自动来进行数据同步。</p>
<blockquote>
<p>QApp.util.globalContext.addLocalKeys(key)</p>
</blockquote>
<p>说明：添加需要在webview之间同步的数据的key</p>
<blockquote>
<p>QApp.util.globalContext.set(key, value)</p>
</blockquote>
<p>说明：设置数据</p>
<blockquote>
<p>QApp.util.globalContext.get(key)</p>
</blockquote>
<p>说明：获取数据</p>
<blockquote>
<p>QApp.util.globalContext.merge(key, value)</p>
</blockquote>
<p>说明：merge数据</p>
<blockquote>
<p>QApp.util.globalContext.remove(key)</p>
</blockquote>
<p>说明：删除一条数据</p>
<blockquote>
<p>QApp.util.globalContext.clear(key)</p>
</blockquote>
<p>说明：清空所有数据</p>

                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="hogan" class="page-header">hogan</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名称: <code>hogan</code></p>
<p>插件配置：<code>{Object|Function}</code></p>
<ul>
<li>当为 <code>Function</code> 时，执行结果为配置，并且方法 <code>context</code> 为此视图 <code>View</code> 示例。</li>
<li>配置有两个属性, <code>data</code> 为模板数据，<code>options</code> 为 <code>hogan</code> 配置。</li>
</ul>
<h4 id="重写或添加的方法">重写或添加的方法</h4><p>添加的方法 <code>renderData(key, data, hoganOpt, container, appendType)</code></p>
<ul>
<li>Param <code>key</code>: <code>{String}</code> 关键字</li>
<li>Param <code>data</code>: <code>{Object}</code> 渲染数据</li>
<li>Param <code>hoganOpt</code>: <code>{Object}</code> 参数对象</li>
<li>Param <code>container</code>: <code>{String}</code> node的选择器</li>
<li>Param <code>appendType</code>: <code>{String}</code> 插入位置设置，值为<code>beforebegin</code>(插入目标节点前)、<code>afterbegin</code>(插入到目标节点的第一个子节点前)、<code>inner</code>(替换目标内子元素)、<code>beforeend</code>(插入到目标节点的最后子节点之后)、<code>afterend</code>(插入到目标节点之后)</li>
</ul>
<h4 id="示例">示例</h4><pre><code>QApp.defineView(&#39;name&#39; {
    html: &#39;&lt;p&gt;{{name}}&lt;/p&gt;&#39;,
    plugins: [{
        name: &#39;hogan&#39;,
        options: {
            global: {
                data: {&#39;name&#39;: &#39;david&#39;}
            }
        }
    }]
});

// 动态渲染
QApp.defineView(&#39;pageA.pageA-1&#39;, {
    html: html,
    plugins: [&#39;hogan&#39;],
    hoganOptions: {
        // 模板配置
        key: {
            template : tpl,
            container : &#39;[node-type=hoganContainer]&#39;,
            appendType : &#39;inner&#39;
        }
    },
    init: {
        myFunc: function() {
            this.renderData(&#39;key&#39;, {
                data: data // hogan data
            });
        }
    }
});
</code></pre>
                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="scroll" class="page-header">scroll</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名：<code>scroll</code> （同时包含<code>scroll</code>组件）</p>
<p>说明：滚动插件，对 <code>iScroll</code> 进行封装，包含 <code>nScroll</code> 和 <code>avalon.iscroll</code>，并包括 <code>scroll</code> 组件。</p>
<p><code>QApp</code> 中滚动依赖库为 <code>iScroll</code>， 版本是 <code>probe</code> <code>5.1.3</code> 版，文档 <a href="http://iscrolljs.com/">iscrolljs.com</a>。</p>
<p>希望使用 <code>scroll</code> 的同学可以了解一下 <code>iscroll</code>，这个组件是世界上<strong>最好</strong>的前端滚动组件，<strong>没有之一</strong>。</p>
<p>这里列一下 <code>iscroll</code> 必须 <code>注意</code> 的问题：（一般情况）</p>
<ul>
<li>滚动的父容器，同时也是 <code>iScroll</code> 配置的第一个参数 <code>el</code>，此元素必须是 <code>可单独计算高度</code> 的，也就是不依赖于内部元素的。（当然你横向滚动时，需要的是宽度）</li>
<li>父容器应该是 <code>overflow:hidden</code> 的，这样可以显示成内部区域可滚动。</li>
<li>父容器需包含一个子节点<code>container</code>用来滚动，<strong>这是 <code>iScroll</code> 约定的</strong>，这个节点的<code>size</code>是滚动计算的依据。</li>
</ul>
<p>对于目前业务中的可动态加载的大列表，进行了优化，添加了懒加载功能。
使用的是基于<code>iscroll</code>自己编写的<code>nscroll</code>组件。</p>
<h4 id="如何使用">如何使用</h4><p>最常用的方式是通过组件的方式。</p>
<p>开发者可以用在父容器上添加 <code>qapp-widget=&quot;scroll&quot;</code> 的方式使用，此时父容器需要定高。</p>
<h4 id="有关Avalon">有关Avalon</h4><p>由于业务中多使用 <code>avalon</code> ，所以自己额外开发了<code>avalon.iscroll</code>组件。</p>
<p>对于<code>avalon.iscroll</code>的说明如下：</p>
<ul>
<li>添加 <code>ms-iscroll</code> 命令， 值为 <code>id, opt</code>, 和<code>avalon.oniui</code>类似。</li>
</ul>
<p>如果使用加载功能：</p>
<ul>
<li><code>dom</code> 需要结构与 <code>iscroll</code> 相同，因此，孙子节点应该是<code>ms-repeat</code>元素。</li>
<li>因为要计算位置，所以每个元素的初始位置都应该是<code>(0, 0)</code>，不论怎么实现（<code>absolute</code>或使用<code>margin</code>进行偏移）。</li>
<li>在定义<code>vm</code>时，如果是循环元素是<code>list</code>，那么需要用户主动添加僵尸元素<code>list$</code>。</li>
</ul>

                </div>
                
            </div>
            
            
            
            <div class="docs-section">
                
                
                <h1 id="zepto" class="page-header">zepto</h1>
                
                
                
                <div class="markdown-body">
                    <h4 id="简介">简介</h4><p>插件名：<code>zepto</code></p>
<p>引入插件，方便开发者快速、方便引用 <code>zepto</code>，并解决手势冲突问题</p>
<h4 id="相关">相关</h4><p><a href="http://www.css88.com/doc/zeptojs_api/">zepto.js中文文档</a></p>

                </div>
                
            </div>
            
            
        </div>
        
        <div class="col-md-3" role="complementary">
            <nav class="docs-sidebar hidden-print hidden-xs hidden-sm" style="overflow:scroll">
                <ul class="nav docs-sidenav">
                    
                    
                    <li>
                        <a href="#ajax">ajax</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#artTemplate">artTemplate</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#avalon">avalon</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#basic">basic</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#delegated">delegated</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#doms">doms</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#fastclick">fastclick</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#gesture">gesture</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#globalContext">globalContext</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#hogan">hogan</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#scroll">scroll</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="#zepto">zepto</a>
                    </li>
                    
                    
                </ul>
            </nav>
        </div>
        
    </div>
    
</div>

<!-- Footer
================================================== -->
<footer class="docs-footer" role="contentinfo">
    <div class="container">
        <p>Made By Qunar YMFE TEAM. © 2014 - 2016</p>
    </div>
</footer>

<script src="source/jquery.min.js"></script>
<script src="source/bootstrap.min.js"></script>
<script src="source/docs.min.js"></script>
<script src="source/highlight.min.js"></script>
<script>
    $(document).ready(function() {
        $('code').each(function(i, block) {
            if (block.innerHTML.indexOf('\n') != -1) {
                var pn = block.parentNode;
                if (pn.tagName.toUpperCase() == 'PRE') {
                    try {
                        hljs.highlightBlock(block);
                    } catch(e) {}
                } else {
                    pn.innerHTML = '<pre><code>' + block.innerHTML + '</code></pre>';
                    try {
                        hljs.highlightBlock(pn.childNodes[0].childNodes[0]);
                    } catch(e) {}
                }
            }
        });

        var winHeight = $(window).height() - 40;

        $('.docs-sidebar').css('max-height', winHeight + 'px');

        var activeMenu,
            sidebar = $('.docs-sidebar'),
            barScroll = false;

        sidebar.on('mouseover', function() {
            barScroll = true;
        });

        sidebar.on('mouseout', function() {
            barScroll = false;
        });

        $(window).on('scroll', function(e) {
            if (!barScroll) {
                var activeItem = $('.docs-sidebar li.active a');
                if (activeItem.length) {
                    if (!activeMenu || (activeMenu.attr('href') != activeItem.attr('href'))) {
                        activeMenu = activeItem;
                        var top = activeMenu.offset().top - sidebar.offset().top;
                        if (top < 0) {
                            sidebar.scrollTop(sidebar.scrollTop() + top);
                        } else if (top > winHeight - 30) {
                            sidebar.scrollTop(sidebar.scrollTop() + top - winHeight + 30);
                        }
                    }
                }
            }
        });
    });
</script>
</body>
</html>
