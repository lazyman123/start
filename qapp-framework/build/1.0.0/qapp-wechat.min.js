!function(){"use strict";function t(t,e){pt[t]=e()}function e(t){return pt[t]}function n(){}function i(t){var e,n=[];for(e in t)n.push(e);return n}function o(t,e){var n=qt[t===wt||t!==t?t:_t.call(t)]||t&&t.nodeName||"#";return t===xt?n="Undefined":"#"===n.charAt(0)&&(n=t==t.document&&t.document!=t?"Window":9===t.nodeType?"Document":t.callee?"Arguments":isFinite(t.length)&&t.item?"NodeList":_t.call(t).slice(8,-1)),e?e===n:n}function r(t){return o(t,"Object")}function s(t){return o(t,"Array")}function a(t){return o(t,"String")}function c(t){return o(t,"Function")}function l(t){return t&&1===t.nodeType?t instanceof Node?vt:At.test(_t.call(t)):yt}function h(t){return o(t,"Number")}function u(t){return o(t,"Object")&&Object.getPrototypeOf(t)===Et}function d(t){try{return"{}"===JSON.stringify(t)}catch(e){return FLASE}}function f(t,e,n){var i;for(i in e)n&&(u(e[i])||s(e[i]))?(u(e[i])&&!u(t[i])&&(t[i]={}),s(e[i])&&!s(t[i])&&(t[i]=[]),f(t[i],e[i],n)):e[i]!==xt&&(t[i]=e[i])}function p(t){var e,n=Pt.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){f(t,n,e)}),t}function g(t,e){var n;for(n in t)e.call(t,n,t[n])}function m(t){if(!t)return yt;var e=t.length;if(e===e>>>0)try{return Pt.call(t)}catch(n){}return yt}function v(t,e){return gt.setTimeout(t,e||0)}function y(t,e){for(var n={},i=0;i<e.length;i++)n[e[i]]=t[i];return n}function w(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=t[e[i]];return n}function x(){return Yt++}function b(){return Ht++}function T(t){return t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})}function S(t){return t.replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/\_/g,"-").toLowerCase()}function E(t){var e;for(e in t)t[e]=wt}function k(t){return t===xt||t===wt}function _(t,e){return t=(t===wt?"":t).toString().trim(),e?encodeURIComponent(t):t}function P(t,e){var n,i,o,r=[];for(n in t)if(k(t[n]))r=r.concat(n);else if(s(t[n]))for(i=0,o=t[n].length;o>i;i++)c(t[n][i])||r.push(n+"="+_(t[n][i],e));else c(t[n])||t[n]===wt||t[n]===xt||r.push(n+"="+_(t[n],e));return r.join("&")}function O(t,e){return k(t)?t:e?decodeURIComponent(t):t}function A(t,e){for(var n=t.trim().split("&"),i={},o=0,r=n.length;r>o;o++)if(n[o]){var s=n[o].split("="),a=s[0],c=s[1];a in i?i[a]=[].concat(i[a],O(c,e)):i[a]=O(c,e)}return i}function C(t){var e,n=yt;return function(){return n?e:(n=vt,e=t.apply(this,arguments),t=wt,e)}}function X(){var t=function(){};return p(t.prototype,Vt),new t}function Y(){function t(t,a,l){c(n)&&!o&&(o=vt,n(r)),c(t)&&("resolved"===i?t.apply(wt,e):"pending"===i&&s.add("resolve",t)),c(a)&&("rejected"===i?a.apply(wt,e):"pending"===i&&s.add("reject",a)),c(l)&&s.add("notify",l)}var e,n,i="pending",o=yt,r={},s=function(){var t={resolve:[],reject:[],notify:[]};return{add:function(e,n){t[e].push(n)},remove:function(e,n){var i=t[e].indexOf(n);i>-1&&t[e].splice(i,1)},clear:function(e){t[e].length=0},fire:function(e,n){t[e].forEach(function(t){t.apply(wt,n)})},destroy:function(){t.resolve.length=0,t.reject.length=0,t.notify.length=0}}}();return r.enabled=vt,r.all=function(e){return t(e,e),r},r.done=function(e){return t(e),r},r.fail=function(e){return t(wt,e),r},r.progress=function(e){return t(wt,wt,e),r},r.unProgress=function(t){return s.remove("notify",t),r},r.then=function(e,n,i){return t(e,n,i),r},r.resolve=function(){return"pending"===i&&(i="resolved",e=Pt.call(arguments),s.fire("resolve",e)),r},r.reject=function(){return"pending"===i&&(i="rejected",e=Pt.call(arguments),s.fire("reject",e)),r},r.notify=function(){return s.fire("notify",Pt.call(arguments)),r},r.state=function(){return i},r.startWith=function(t){return n=t,r},r.destroy=function(){r.enabled=yt,r.notify("destroy"),i=wt,e=wt,o=wt,n=wt,r.destroy=function(){},r=wt,s.destroy(),s=wt},r}function H(t,e,n){var i=new Y,o=n?t:t.slice(0),r=[],s=-1,a=function(t){return(a=e&&e.length?function(t){return e[t]}:function(t){return t})(t)},l=function(){s++;var n=o.shift();if(n&&c(n.all))n.all(function(e){i.notify(a(s),e,t),r[s]=e,l()});else if(n)if(c(n)){var h=n(r[s-1],r);h&&c(h.all)?h.all(function(e){i.notify(a(s),e,t),r[s]=e,l()}):(i.notify(a(s),h,t),r[s]=h,l())}else i.notify(a(s),n,t),r[s]=n,l();else e&&e.length&&(r=y(r,e)),i.resolve.call(wt,r)};return i.startWith(l)}function N(t,e){var n=new Y,i=t.slice(0),o=[],r=0,s=function(){r===i.length&&(e&&e.length&&(o=y(o,e)),n.resolve.call(wt,o))},a=function(){i.forEach(function(t,e){t&&c(t.all)?(o[e]=xt,t.all(function(t){o[e]=t,r++,s()})):(o[e]=t,r++)}),s()};return n.startWith(a)}function D(t){Ot.test(mt.readyState)&&mt.body?t():F(mt,"DOMContentLoaded",function(){t()},yt)}function M(t){var e,n,i="div";return[["li","ul"],["tr","tbody"],["td","tr"],["th","tr"],["tbody","table"],["option","select"]].some(function(e){return 0===t.indexOf("<"+e[0])?(i=e[1],vt):void 0}),e=mt.createElement(i),e.innerHTML=t,n=m(e.children),e=mt.createDocumentFragment(),n.forEach(function(t){e.appendChild(t)}),{box:e,children:n}}function L(t,e){e=[].concat(e),e.forEach(function(e){t.appendChild(e)})}function z(t,e,n){switch(n=n?n.toLowerCase():"beforeend"){case"beforebegin":t.parentNode.insertBefore(e,t);break;case"afterbegin":t.insertBefore(e,t.firstChild);break;case"beforeend":t.appendChild(e);break;case"afterend":t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)}return e}function R(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function I(t,e,n){var i=n===yt||null===n||void 0===n,o=Dt[e];if("boolean"==typeof t[o]&&(t[o]=!!n,n||(i=vt)),i)return t.removeAttribute(e);var r=Ct.test(t)?yt:e in t.cloneNode(yt);r?t[e]=n:t.setAttribute(e,n)}function W(t,e){if(a(e)){if(!(arguments.length>2))return t.getAttribute(e);I(t,e,arguments[2])}else g(e,function(e,n){I(t,e,n)})}function q(t,e){if(t&&t.style)if(a(e)){if(!(arguments.length>2)){var n,i=gt.getComputedStyle(t,wt);return i&&(n=i[T(e)]),n}var o=arguments[2];Rt.test(e)?t.style[It]=e+"("+o+")":(e=T(e),o||0===o?t.style[e]=o:t.style.removeProperty(e))}else{var r=[],s="";g(e,function(t,e){Rt.test(t)?s+=t+"("+e+") ":r.push(S(t)+":"+e)}),s.length&&r.push(S(It)+":"+s),t.style.cssText+=";"+r.join(";")+";"}}function j(t,e){t&&t.style&&[].concat(e).forEach(function(e){t.style.removeProperty(e),t.style.removeProperty(Wt+e)})}function V(t){if(t.target||(t.target=t.srcElement||document),3==t.target.nodeType&&(t.target=t.target.parentNode),t.pageX===wt&&t.clientX!==wt){var e=mt.documentElement,n=mt.body;t.pageX=t.clientX+(e.scrollLeft||n&&n.scrollLeft||0)-(e.clientLeft||n&&n.clientLeft||0),t.pageY=t.clientY+(e.scrollTop||n&&n.scrollTop||0)-(e.clientTop||n&&n.clientTop||0)}return t}function F(t,e,n,i){t.addEventListener(e,n,!!i)}function B(t,e,n){t.removeEventListener(e,n)}function Q(t,e,n){var i=mt.createEvent("Events");i.initEvent(e,!0,!0),p(i,n),t.dispatchEvent(i)}function U(t,e){t.className=(t.className+Xt+e).split(/\s+/).filter(function(t,e,n){return n.lastIndexOf(t)===e}).join(Xt)}function $(t,e){e=Xt+e.replace(/\s+/g,Xt)+Xt,t.className=t.className.split(/\s+/).filter(function(t){return-1===e.indexOf(Xt+t+Xt)}).join(Xt)}function J(t){var e=mt.createElement("style");e.type="text/css",e.innerHTML=t,mt.querySelector("head").appendChild(e)}function Z(t){var e;if(St.ios&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type){e=t.value.length;try{t.setSelectionRange(e,e)}catch(n){t.focus()}}else t.focus()}function G(t){var e=mt.activeElement;t=t||mt.body,e&&Ft(t,e)&&c(e.blur)&&e.blur()}function K(t){function e(e){var n=t.documentElement,i=t.body;return Math.max(i["scroll"+e],n["scroll"+e],i["offset"+e],n["offset"+e],n["client"+e])}return{width:e("Width"),height:e("Height")}}function tt(t){function e(e){return t.document.documentElement["client"+e]}return{width:e("Width"),height:e("Height")}}function et(t){var e,n=o(t);switch(n){case"Document":e=K(t);break;case"Window":e=tt(t);break;default:e={width:parseInt(q(t,"width"),10),height:parseInt(q(t,"height"),10)}}return e}function nt(t){var e=t.getBoundingClientRect(),n=t.ownerDocument.body,i=t.ownerDocument.documentElement,o=Math.max(gt.pageYOffset||0,i.scrollTop,n.scrollTop),r=Math.max(gt.pageXOffset||0,i.scrollLeft,n.scrollLeft),s=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0;return{left:e.left+r-a,top:e.top+o-s}}function it(t,e){return{left:t.left-e.left,top:t.top-e.top}}function ot(t){return Ft(t.ownerDocument.body,t)?arguments.length>1?it(nt(t),nt(arguments[1])):nt(t):{top:NaN,left:NaN}}function rt(t){var e={};if(t)if(t.dataset)p(e,t.dataset);else for(var n=t.attributes,i=0,o=n.length;o>i;i++){var r=n[i].name,s=n[i].value;0===r.indexOf("data-")&&(r=T(r.substring(5)),e[r]=s)}return e}function st(t,e,n){return c(t)?t.apply(e,m(n)||[]):void 0}function at(t,e,n){function i(n,i,r){function a(){var e=n,s=rt(e);return o[i]&&o[i][c]?o[i][c]({evt:r,el:e,box:t,data:s},s):vt}var c=wt;if(Qt(e,n))return yt;if(!Ft(t,n))return yt;for(;n&&n!==t&&(1!==n.nodeType||(c=n.getAttribute(s),!c||a()!==yt));)n=n.parentNode}e||(e=[]),e=[].concat(e);var o={},r=function(t){var e=t.target,n=t.type;i(e,n,t)},s=n||"action-type",a={};return a.add=function(e,n,i,s){o[n]||(o[n]={},F(t,n,r,!!s));var a=o[n];a[e]=i},a.remove=function(e,n){o[n]&&(delete o[n][e],d(o[n])&&(delete o[n],B(t,n,r)))},a.pushExcept=function(t){e.push(t)},a.removeExcept=function(t){if(t)for(var n=0,i=e.length;i>n;n+=1)e[n]===t&&e.splice(n,1);else e=[]},a.clearExcept=function(){e=[]},a.fireAction=function(e,n,i,r){var s={};r&&r.data&&(s=r.data),o[n]&&o[n][e]&&o[n][e]({evt:i,el:wt,box:t,data:s,fireFrom:"fireAction"},s)},a.fireInject=function(e,n,i){var r=e.getAttribute(s),a=rt(e);r&&o[n]&&o[n][r]&&o[n][r]({evt:i,el:e,box:t,data:a,fireFrom:"fireInject"},a)},a.fireDom=function(t,e,n){i(t,e,n||{})},a.destroy=function(){for(var e in o){for(var n in o[e])delete o[e][n];delete o[e],B(t,e,r)}},a}function ct(t,e){var n=y(Ut.exec(t)||[],$t);return n.query=n.query?A(n.query.substring(1),e):{},n.hash=n.hash?A(n.hash.substring(1),e):{},n.getQuery=function(t){return n.query[t]},n.getHash=function(t){return n.hash[t]},n.setQuery=function(t,e){return e===xt?n.query[t]=wt:n.query[t]=e,n},n.setHash=function(t,e){return e===xt?n.hash[t]=wt:n.hash[t]=e,n},n.toUrl=function(t){var e=n.protocol+"://",i=P(n.query,t),o=P(n.hash,t);return n.protocol&&"file"===n.protocol.toLowerCase()&&(e+="/"),e+n.hostname+(n.port||"")+n.path+(n.name||"")+(i?"?"+i:"")+(o?"#"+o:"")},n}function lt(t,e,n){var i;Zt.insertBefore(t,Zt.firstChild),n&&(i=v(function(){t.onload=wt,R(t),e.reject({type:"Timeout"})},n)),t.onload=function(){i&&clearTimeout(i),t.onload=wt,t.onerror=wt,e.resolve()},t.onerror=function(){i&&clearTimeout(i),R(t),t.onload=wt,t.onerror=wt,e.reject({type:"Error"})}}function ht(t,e,n){var i=p({},Jt,n),o=Gt[t]&&Gt[t](e,i);return o&&(i.onComplete||i.onFail||i.onTimeout)&&o.then(i.onComplete,function(t){"Timeout"===t.type&&c(i.onTimeout)&&i.onTimeout(t),"Error"===t.type&&c(i.onFail)&&i.onFail(t)}),o}function ut(t,e){console[t].apply(console,["["+t.toUpperCase()+"]"].concat(m(e)))}function dt(t){he.done(t)}var ft={version:"1.0.0"},pt=ft._packages={},gt=window,mt=document,vt=!0,yt=!1,wt=null,xt=void 0,bt={app:"qapp-app",view:"qapp-view",widget:"qapp-widget",role:"qapp-role"},Tt={type:"touch",indexView:"index",animate:vt,defaultAnimate:"moveEnter",autoInit:vt,hashRouter:vt,hashSupport:{all:vt,exist:[],except:[],usePath:yt},jsonParam:yt,customRoot:vt,preventMove:yt,appRoot:wt,screen:{rotate:yt,autoResize:vt},root:{top:0,right:0,bottom:0,left:0},logLevel:1},St=function(){var t={browsers:{},info:{}},e=navigator.userAgent,n=navigator.platform,i=e.match(/(Android);?[\s\/]+([\d.]+)?/),o=e.match(/(iPad).*OS\s([\d_]+)/),r=e.match(/(iPod)(.*OS\s([\d_]+))?/),s=e.match(/(iPhone\sOS)\s([\d_]+)/),a=-1==e.indexOf("Safari"),c={wechat:e.match(/(MicroMessenger)\/([\d\.]+)/),alipay:e.match(/(AlipayClient)\/([\d\.]+)/),qq:e.match(/(MQQBrowser)\/([\d\.]+)/),weibo:e.match(/(weibo__)([\d\.]+)/),uc:e.match(/(UCBrower)\/([\d\.]+)/),opera:e.match(/(Opera)\/([\d\.]+)/)};t.ios=t.android=t.iphone=t.ipad=t.ipod=!1,i&&(t.os="android",t.osVersion=i[2],t.android=!0),(o||s||r)&&(t.os="ios",t.ios=!0),s&&(t.osVersion=s[2].replace(/_/g,"."),t.iphone=!0,t.imobile=!0),o&&(t.osVersion=o[2].replace(/_/g,"."),t.ipad=!0),r&&(t.osVersion=r[3]?r[3].replace(/_/g,"."):null,t.ipod=!0,t.imobile=!0),t.ios&&t.osVersion&&e.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]),t.osVersion&&(t.osVersionN=parseInt(t.osVersion.match(/\d+\.?\d*/)[0])),t.pixelRatio=window.devicePixelRatio||1,t.retina=t.pixelRatio>=2;for(var l in c)c[l]?(a=!1,t.browsers[l]=c[l][2]):t.browsers[l]=!1;return t.webApp="ios"==t.os&&a,e.split(" ").forEach(function(e){var n=e.split("/");2==n.length&&(t.info[n[0]]=n[1])}),t.pc=0===n.indexOf("Mac")||0===n.indexOf("Win")||0===n.indexOf("linux")&&!t.android,t}(),Et=Object.prototype,kt=Array.prototype,_t=Et.toString,Pt=kt.slice,Ot=/complete|loaded|interactive/,At=/Element$/,Ct=/^\[object SVG\w*Element\]$/,Xt=" ",Yt=1,Ht=1e3,Nt="autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelected,contentEditable,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected",Dt={};Nt.replace(/\w+/g,function(t){Dt[t.toLowerCase()]=t});var Mt,Lt=["Webkit","","Moz","O"],zt=mt.createElement("div"),Rt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,It="",Wt="";Lt.every(function(t){return zt.style[t+"TransitionProperty"]!==xt?(t&&(Wt="-"+t.toLowerCase()+"-"),Mt=t.toLowerCase(),yt):void 0}),zt=wt,It=Wt+"transform";var qt={"[object HTMLDocument]":"Document","[object HTMLCollection]":"NodeList","[object StaticNodeList]":"NodeList","[object IXMLDOMNodeList]":"NodeList","[object DOMWindow]":"Window","[object global]":"Window","null":"Null",NaN:"NaN",undefined:"Undefined"};"Boolean,Number,String,Function,Array,Date,RegExp,Window,Document,Arguments,NodeList,Null,Undefined".replace(/\w+/gi,function(t){qt["[object "+t+"]"]=t});var jt=function(t,e){for(var n,i=-1,o=t.length,r=1;++i<o&&r;)n=t[i],r&=n.callback.apply(n.ctx,e)!==!1;return!!r},Vt={on:function(t,e,n){this._events=this._events||{},this._events[t]=this._events[t]||[];var i=this._events[t];return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){var i=this,o=C(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){if(!this._events)return this;var o,r,s,a,c,l,h,u;if(!t&&!e&&!n)return this._events=xt,this;for(a=t?[t]:i(this._events),c=0,l=a.length;l>c;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=o=[],e||n)for(h=0,u=s.length;u>h;h++)r=s[h],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&o.push(r);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=Pt.call(arguments,1),n=this._events[t],i=this._events.all,o=1;return n&&(o&=jt(n,e)),i&&o&&(o&=jt(i,e)),!!o}},Ft=mt.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:function(t,e){return t!==e&&(t.contains?t.contains(e):vt)},Bt=function(){function t(t){var e=t.parentNode;e&&q(e,{"transform-style":"preserve-3d","backface-visibility":"hidden"})}function e(t){var e=t.parentNode;j(e,["transform-style","backface-visibility"])}var n,i,o,r,s=200,a=25,c="linear";return n=Wt+"transition-property",i=Wt+"transition-duration",r=Wt+"transition-delay",o=Wt+"transition-timing-function",function(l,h,u,d,f){function p(t){t&&t.target!==l||(B(l,y,p),E=vt,v(function(){b&&e(l),j(l,"transition"),T.resolve()}))}var m=arguments.length,y=Mt+"TransitionEnd",w={},x=[],b="";3>m&&(u=s),4>m&&(d=c),5>m&&(f=0),g(h,function(t,e){Rt.test(t)?b+=t+"("+e+") ":w[t]=e,x.push(S(t))}),b&&(w[It]=b,x.push(It)),u>0&&(w[n]=x.join(", "),w[i]=u/1e3+"s",w[r]=f/1e3+"s",w[o]=d);var T=new Y,E=yt;return u>0&&(F(l,y,p,yt),v(function(){E||p()},u+f+2*a)),v(function(){b&&t(l),q(l,w),T.notify("start")},a),0>=u&&v(p),T}}(),Qt=function(t,e){for(var n=0,i=t.length;i>n;n+=1)if(Ft(t[n],e))return vt;return yt},Ut=/(\w+):\/\/\/?([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(\?[^#]*)?(#.*)?/i,$t=["url","protocol","hostname","port","path","name","query","hash"],Jt={charset:"UTF-8",timeout:3e4,onComplete:wt,onTimeout:wt,onFail:wt},Zt=mt.getElementsByTagName("head")[0],Gt={script:function(t,e){var n=new Y,i=e.charset,o=e.timeout,r=mt.createElement("script");return r.type="text/javascript",r.charset=i,n.startWith(function(){n.notify("element",r),lt(r,n,o),r.src=t})},style:function(t,e){var n=new Y,i=e.charset,o=e.timeout,r=mt.createElement("link");return r.type="text/css",r.charset=i,r.rel="stylesheet",n.startWith(function(){lt(r,n,o),r.href=t})},image:function(t,e){var n=new Y,i=new Image,o=e.timeout,r=wt;return i.onload=function(){i.onload=wt,i.onerror=wt,r&&clearTimeout(r),n.resolve(i)},i.onerror=function(){i.onload=wt,i.onerror=wt,r&&clearTimeout(r),n.reject({type:"Error"})},o&&(r=v(function(){i.onload=wt,i.onerror=wt,r&&clearTimeout(r),n.reject({type:"Timeout"})},o)),n.startWith(function(){i.src=t})}},Kt="resize",te=X(),ee=function(t){return t.width>t.height?"landscape":"portrait"};te.get=function(){return ee(et(gt))},D(function(){var t=et(gt);gt.addEventListener(Kt,function(){var e=et(gt);t.width!==e.width&&t.height!==e.height&&(t=e,te.trigger("change",{type:Kt,width:e.width,height:e.height,orientation:ee(e)}))})});var ne=["info","debug","warn","error"];ne.forEach(function(t,e){ut[t]=function(){e>=Tt.logLevel&&ut(t,arguments)}});var ie=ct(location.href).query.logLevel;ie&&(Tt.logLevel=parseInt(ie)),t("fetchNode",function(){function t(t){t.resolve()}return function(e){var n=e.options;return(new Y).startWith(function(i){n.html||c(n.fetch)?n.html?t(i):n.fetch.length?n.fetch.call(e,function(e){n.html=e||"",t(i)}):(n.html=n.fetch.call(e)||"",t(i)):(n.html="",t(i))})}}),t("display",function(){return{show:function(t,e,n,i){var o=this;return o.isShow?(q(o.root,p({width:"100%",height:"100%",zIndex:b()},n||e)),o.trigger("refresh")):(o.once("completed",function(){q(o.root,p({width:"100%",height:"100%",zIndex:b()},e)),o.trigger("beforeShow"),Tt.animate&&n?Bt(o.root,n,i).done(function(){o.trigger("show")}):(q(o.root,n||{}),o.trigger("show"))}),o.renderTo(l(t)?t:Tt.appRoot)),o},hide:function(){var t=this;return t.isShow&&(t.trigger("beforeHide"),t.trigger("hide")),t}}}),t("pluginM",function(){var t=ft._plugins={},e=[];return{add:function(e,n,i){var o=[].concat(e);o.forEach(function(e){t[e]||(t[e]={options:n,adapter:i})})},exists:function(e){return!!t[e]},get:function(e){return t[e]},setOpt:function(e,n){t[e]&&p(vt,t[e].options,n)},getGlobal:function(){return e},setGlobal:function(t){e=e.concat(t)}}}),t("widgetM",function(){var t=ft._widgets={};return{add:function(e,n,i){t[e]={eventName:i&&(a(i)?i:"tap"),adapter:n}},exists:function(e){return!!t[e]},isEvent:function(e){return!!t[e].eventName},get:function(e){return t[e]},show:function(e,n,i,o){return t[e]?l(n)?t[e].adapter(n,i,o):t[e].adapter(wt,n,i):void 0}}}),t("view",function(){function t(){return mt.createElement(bt.view)}function n(t){var e=t.options.init;g(e,function(e,n){t[e]=c(n)?n.bind(t):n})}function i(t){g(t.options.bindEvents,function(e,n){c(n)&&t.on(e,n.bind(t))})}function o(t){var e=f.getGlobal();e.concat(t.options.plugins).forEach(function(e){var n,i=a(e)?e:e.name,o=e.options||t.options[T(i)+"Options"]||{},r=f.get(i);r&&c(r.adapter)&&(n=c(o)?o:p(vt,{},r.options,o),t.plugins[i]=r.adapter(t,n,Tt))})}function r(t,e){var n={param:{}};return g(rt(t),function(t,i){if(!t.indexOf(e)){var o=t.substring(e.length).replace(/\w/i,function(t){return t.toLowerCase()});o.indexOf("param")?n[o]=i:n.param[o.substring(5).replace(/\w/i,function(t){return t.toLowerCase()})]=i}}),n}function s(t,e){e=(a(e)?t.root.querySelector(e):e)||t.root,m(e.querySelectorAll("["+bt.widget+"]")).forEach(function(e){var n,i,o,s,a,l=W(e,bt.widget);y.exists(l)&&(i=y.get(l).eventName,s=y.get(l).adapter,o=function(){a=r(e,l),n=s(e,a,t),a.id&&(t.widgets[a.id]=n)},y.isEvent(l)?(a=r(e,l),i=a.eventType||i,F(e,i,o,yt),t.on("destroy",function(){B(e,i,o)})):t.isReady?o():t.on("ready",function(){o()}),t.on("destroy",function(){n&&c(n.destroy)&&n.destroy(),n=wt,s=wt,a=wt,o=wt}))})}function h(t){t.isReady=vt,t.trigger("ready"),st(t.options.ready,t),t.trigger("completed")}function u(t){var e=this;e.options=p(vt,{},S,t),e.name=e.options.name||"view-"+x(),e.container=wt,e.isReady=yt,e.isShow=yt,e.root=wt,e.nodes=wt,e.param={},e.plugins={},e.widgets={},e.extra=p({},e.options.extra),e._locked=yt,e._renderEventTimer=wt,e._renderDeferred=new Y,n(e),i(e),o(e),e.on("show",function(){e.isShow=vt}),e.on("hide",function(){e.isShow=yt})}var d=e("fetchNode"),f=e("pluginM"),y=e("widgetM"),w=e("display"),b=10,S={init:{},html:wt,fetch:wt,classNames:[],attrs:{},styles:{},destroyDom:vt,supportHash:vt,ready:wt,subViews:[],plugins:[],bindEvents:{},extra:{}};return p(u.prototype,Vt,{renderTo:function(e){var n=this;return n._locked||(n._locked=vt,n.container=e,n.isReady?(n.trigger("rendered"),n.container.appendChild(n.root),n.trigger("loaded"),n._locked=yt,n.trigger("completed")):(n.root=t(),W(n.root,"qapp-name",n.name),U(n.root,n.options.classNames.join(" ")),W(n.root,n.options.attrs),q(n.root,n.options.styles),n.trigger("loadStart"),d(n).done(function(){n.html=n.options.html,n.trigger("loadEnd"),n.container.appendChild(n.root),n.renderHTML().done(function(){n.trigger("rendered"),n.trigger("loaded"),n._locked=yt,h(n)})}))),n},renderHTML:function(t){var e=this,n=e._renderDeferred,i=function(t){e._renderEventTimer&&(clearTimeout(e._renderEventTimer),e._renderEventTimer=wt),e._renderEventTimer=v(function(){e.root&&(e._renderEventTimer=wt,n.resolve())},b)};return e.html=t||e.html,e.nodes=M(e.html).children,e.nodes.length?(F(e.root,"DOMNodeInserted",i,yt),L(e.root,e.nodes),n.done(function(){B(e.root,"DOMNodeInserted",i),s(e)}),e._renderEventTimer=v(function(){e.root&&(e._renderEventTimer=wt,n.resolve())},b)):e.root&&(s(e),n.resolve()),n},staticBuild:function(t){var e=this;return t&&l(t)&&(e.trigger("loadStart"),e.html=t.innerHTML||"",e.trigger("loadEnd"),e.container=t.parentNode||t,e.root=t,W(e.root,"qapp-name",e.name),U(e.root,e.options.classNames.join(" ")),W(e.root,e.options.attrs),q(e.root,e.options.styles),e.nodes=m(t.children)||[],s(e),e.trigger("rendered"),e.trigger("loaded"),h(e),e.trigger("completed"),e.trigger("beforeShow"),e.trigger("show"),e.trigger("actived")),e},show:w.show,hide:w.hide,close:w.hide,mergeParam:function(t){var e=this;return p(vt,e.param,t),e},fn:function(t){var e=this;return function(){return c(e[t])?e[t].apply(this,m(arguments)):wt}},frontOn:function(t,e){var n=this,i=n._events[t]=n._events[t]||[];return i.unshift({callback:e,ctx:n}),n},scanWidget:function(t){s(this,t)},showWidget:function(t,e,n){var i=ft._widgets;return i[t]?l(e)?i[t].adapter(e,n,this):i[t].adapter(wt,e,n,this):void 0},destroy:function(){var t=this;return t.options.destroyDom&&R(t.root),clearTimeout(t._renderEventTimer),t._renderDeferred&&t._renderDeferred.destroy(),g(t.plugins,function(t,e){e&&c(e.destroy)&&e.destroy()}),g(t.widgets,function(t,e){e&&c(e.destroy)&&e.destroy()}),t.trigger("destroy"),t.off(),E(t),t.destroyed=vt,t}}),u}),t("taskQ",function(){function t(t){ft.trigger("running",vt),H(t,[],vt).done(function(){n.forEach(function(t){t&&c(t.destroy)&&t.destroy()}),n=wt,ft.trigger("running",yt)}).progress(function(){e.trigger("ev")})}var e=X(),n=wt,i=500,o={push:function(e){n?n.push(e):(n=[e],t(n))},pushTask:function(t){o.push((new Y).startWith(function(e){try{t(e)}catch(n){}v(function(){e&&c(e.resolve)&&e.resolve()},i)}))},addListener:function(t){e.on("ev",t)}};return o}),t("viewM",function(){function t(t){}function n(t){return t.split(":")[0]}function i(e,n,i){var o;y[e]&&y[e][n]?i(y[e][n]):f[e]?(o=y[e][n]=new u(p({name:e+":"+n},f[e])),o.on("destroy",function(){y[e][n]=wt}),i(o)):t(e)}function o(e,n){var i=wt;return y[e]&&y[e][n]?i=y[e][n]:f[e]?(i=y[e][n]=new u(p({name:e+":"+n},f[e])),i.on("destroy",function(){y[e][n]=wt})):t(e),i}function r(t){var e=t.split(":");return{name:e[0],index:e[1]||0}}function s(t,e){g(e,function(e,n){0===e.indexOf("on")&&c(n)&&"onComplete"!=e&&t.on(e.substring(2).replace(/\w/,function(t){return t.toLowerCase()}),n)})}function h(t){return p.apply(wt,[vt,{}].concat(m(t).map(function(t){return a(t)?f[t]||{}:t})))}var u=e("view"),d=e("taskQ"),f=ft._viewOptionsMap={},y=ft._viewMap={},w={define:function(t){a(t)&&(f[t]=h(arguments),y[t]=[])},undefine:function(t){a(t)&&(f[t]=wt)},getOptions:function(t){return f[t]},create:function(){var t=new u(h(arguments)),e=t.name;if(e){var n=r(e);y[n.name][n.index]=t,t.on("destroy",function(){y[n.name][n.index]=wt})}return t},structure:function(t,e){e=e||{},e.ani=a(e.ani)?{name:e.ani}:e.ani||{};var n=p(vt,{},w.getOptions(t.split(":")[0])),i=e.ani.name||Tt.defaultAnimate;n.name=t,n.init=n.init||{},n.init.param=e.param||{},n.styles=p(n.styles||{},e.styles),n.classNames=(n.classNames||[]).concat(e.classNames),i&&(n.plugins=(n.plugins||[]).concat([{name:i,options:p({},w.getExtraOption(t,i),e.ani)}]));var o=w.create(n);return o.param=p({},e.param),s(o,e),o.complete=function(t){c(e.onComplete)&&e.onComplete.call(o,t)},o.on("callback",o.complete),o},build:function(t){var e,n=h(m(arguments).slice(1));return t&&l(t)&&(n.name=W(t,"qapp-name"),e=new u(n),e.staticBuild(t)),e},show:function(t,e){var n=m(arguments),i=w.structure(t,e);return d.pushTask(function(t){i.once("show",function(){t.resolve()}),i.once("hide",function(){v(function(){c(i.destroy)&&i.destroy()})}),i.show.apply(i,n.slice(2))}),i},exists:function(t){return!!f[t]},get:function(t,e){var n,o={};return a(t)&&(o=r(t)),c(e)?void i(o.name,o.index,function(t){e(t)}):n={invoke:function(){var t=m(arguments),e=t.shift();return i(o.name,o.index,function(n){st(n[e],n,t)}),n},pushMessage:function(t,e){var i=y[o.name]&&y[o.name][o.index];return i&&i.trigger(t,e),n}}},getSync:function(t){var e,n={};return a(t)&&(e=t.split(":"),n={name:e[0],index:e[1]||0}),o(n.name,n.index)},getExtraOption:function(t,e){var i,o=f[n(t)];return o?(i=o.extra&&o.extra[Tt.type]||o.extra||{},i[e]):void 0},getHashParams:function(t){var e=f[n(t)];return e?e.hashParams||[]:[]},getRealName:n};return w}),t("viewQ",function(){function t(){var t,e=p[0];return e&&e.root&&(t=parseInt(q(e.root,"z-index"))),(t||b())-1}function i(){return p.length?p[p.length-1]:void 0}function o(t){var e,n=p.length;for(e=n-1;e>-1;e--)if(p[e].name==t)return e;return-1}function r(t){if(t.indexOf(":new")>-1)return t.replace(":new",":"+x());for(var e=0,n=p.length;n>e;e++)if(t==p[e].name.split(":")[0])return!1;return t}function s(t,e,n,i,o){e=e||"show",g(function(r){t.on(e.replace("_",""),function(){v(function(){r.resolve().done(o)})}),c(n)?n():(t[e](i),e.indexOf("hide")>-1&&!i&&r.resolve())})}function a(t){s(t,"_hide",function(){u.hide.call(t)})}function l(t){function e(){y.preView=y.curView,y.curView=t.name}var n=t.hide,i=t.close,o=t._events.show=t._events.show||[],r=t._events.actived=t._events.actived||[];o.unshift({callback:e,ctx:t}),r.unshift({callback:e,ctx:t}),t.once("hide",function(){var e=p.indexOf(t);e>-1&&(p.splice(e,1),v(function(){c(t.destroy)&&t.destroy()}))}),t.hide=t._hide=function(e){e===vt?n.call(t):g(function(e){t.once("hide",function(){v(e.resolve)}),n.call(t)})},t.close=t._close=function(e){e===yt?i.call(t):g(function(e){t.once("hide",function(){v(e.resolve)}),i.call(t)})}}var h,u=e("display"),d=e("taskQ"),f=e("viewM"),p=[],g=d.pushTask,m=f.getRealName,y={curView:wt,preView:wt,add:function(t,e,i,o,s){g(function(a){if(t=r(t),c(s)&&s(t)===yt)return void a.resolve().done(l);var l=c(o)?o:n;t&&f.exists(m(t))?(y[i?"unshift":"push"](f.structure(t,e),l),a.resolve()):a.resolve().done(l)})},push:function(t,e){l(t),t.once("show",function(){var e=i();v(function(){t.trigger("actived"),e&&e.trigger("deactived")}),p.push(t)}),s(t,"show",wt,yt,function(){e(t)})},unshift:function(e,n){l(e),e.once("show",function(){p.unshift(e),1===p.length&&v(function(){e.trigger("actived")})}),e.on("beforeShow",function(){e.initialShow=yt,q(e.root,"z-index",t()-1)}),s(e,"show",function(){e.show(vt)},yt,function(){n(e)})},pop:function(t,e,n){var o=i();if(t===xt&&(t=1),o&&t>0){var r=function(i){var r,c=p.length,l=c-t;if(l>=0)for(r=l;c-1>r;r++)a(p[r]);l>0&&t>0&&o.once("hide",function(){var t=p[l-1];t&&(e&&e.data&&t.trigger("receiveData",e),t.trigger("actived"))}),s(o,"_hide",wt,i,n)};g(function(e){t<p.length?r(vt):t==p.length&&(m(p[0].name)!==Tt.indexView?(y.add(Tt.indexView,{},vt),g(function(t){r(yt),t.resolve()})):p.length>1&&(t=p.length-1,r(vt))),e.resolve()})}},remove:function(t,e,n){g(function(i){var r=o(t);r>-1&&y.pop(p.length-r,e,n),i.resolve()})},backTo:function(t,e,n,i){g(function(r){var s=o(t),a=p.length;-1===s?y.add(m(t),{param:n},vt,function(t){h._reset(t),y.pop(a,e,i)}):(a=p.length-s-1,y.pop(a,e,i)),r.resolve()})},refresh:function(t){var e=i();e&&e.trigger("receiveData",t)},clear:function(t,e){g(function(n){y.pop(p.length,t,e),n.resolve()})},inject:function(t){h=t}};return y}),t("history",function(){function t(t){return t.length>2&&t.lastIndexOf(":0")==t.length-2?t.substring(0,t.length-2):t}function n(t){t=B(t);var e=T.getOptions(t);return e&&e.supportHash!==yt?Y.all&&Y.except.indexOf(t)>-1?yt:Y.all||-1!==Y.exist.indexOf(t)?vt:yt:yt}function i(t){return t[t.length-1]}function o(t,e){return F.trigger("change",{type:t,data:p(vt,{},e)})}function r(){var t={},e=u();if(e.view&&e.view.indexOf("__")){if(_)z=R;else if(e.query[R])L=e.query[R],z=M+L;else{do L=x(),z=M+L;while(O[z]);f(e,vt)}try{t=JSON.parse(O.getItem(z))||{}}catch(n){}t.basePath==U&&(I=m(t.history),q=t.index,I[q]!==e.view&&(I=[],q=0,O.removeItem(z))),I.length||I.push(e.view),W=I.slice(0),j=q}}function s(){try{O.setItem(z,JSON.stringify({basePath:U,history:I,index:q}))}catch(t){}}function a(t,e){e?I[q]=t:(q++,I=I.slice(0,q),I.push(t)),s()}function c(){var t,e=S.hash,n=e.indexOf("#");return H?e=S.pathname.replace(H.basePath,"").replace(H.ext,""):(e=n>-1?e.slice(n+1):"",t=e.indexOf("#"),t>-1&&(e=e.slice(0,t))),e}function l(t,e){var n=U+"#"+t;if(w=t,N){if(H){var i=t.split("?");n=U+i[0]+H.ext+(i.length>1?"?"+i.slice(1).join("?"):"")}E[(e?"replace":"push")+"State"]({path:n},mt.title,n)}else e?S.replace(n):S.href=n}function u(e){e=e||c();var n=e.split("?"),i=t(n[0])||Tt.indexView,o=A(n[1]||"",vt);if(Tt.jsonParam&&o._param)try{o=p(vt,o,JSON.parse(o._param)),delete o._param}catch(r){}return{view:i,query:o}}function d(){return b?b:b=C?function(){var t=u();return t[R]=xt,t}():i(V)}function f(t,e){t=t||{};var n,i=t.view||Tt.indexView,r=t.query||{},s=d();if(e=e||i==s.view,b=wt,C){if(_||(r[R]=L),a(i,e),o("willForward",{view:i,query:r})===yt)return yt;n=P(Tt.jsonParam?{_param:JSON.stringify(r)}:r,vt),l(i+(n?"?"+n:""),e)}else{var c={view:i,query:r};e?V[V.length-1]=c:V.push(c)}return vt}function g(t){var e,i=t?u(t):d(),r=i.view,c=I.indexOf(r);-1===c?(a(r),o("forward",{info:i})):(e=c-q,q=c,0>e?n(i.view)?o("back",{info:i,param:Q.shift()}):E.back():0===e?o("refresh",{info:i}):1===e?n(i.view)?o("forward",{info:i}):E.go(q<I.length-1?1:-1):v(function(){S.reload()}),s())}function y(){gt.addEventListener(D,function(){w!==c()&&(w=c(),b=wt,g())})}var w,b,T=e("viewM"),S=gt.location,E=gt.history,k=gt.sessionStorage,_=!!k,O=_?gt.sessionStorage:gt.localStorage,C=vt,Y=wt,H=wt,N=!!E.pushState,D=N?"popstate":"hashchange",M="QAPP_HISTORY_",L=0,z="",R="_history",I=[],W=[],q=0,j=0,V=[],F=X(),B=T.getRealName,Q=[],U=function(){var t=ct(S.href);return t.hash={},delete t.query._qtid,t.toUrl()}(),$={basePath:U,start:function(){var t;if(C){if(Y=Tt.hashSupport,H=N?Y.usePath:yt,H&&(E.basePath=U=S.origin+H.basePath),w=c(),t=d(),r(),!n(t.view)){if(q>0)return q--,b=wt,E.back(),s(),void v(function(){$.start(flag)},100);t={view:Tt.indexView,query:{}},f(t,vt)}o("init",{info:d()}),y()}else t={view:Tt.indexView,query:u().query},V.push(t),o("init",{info:t})},analyzeHash:u,setHashInfo:f,getHashInfo:d,refreshParam:function(t){var e=d();e.query=p(e.query,t),f(e,vt)},back:function(t,e){h(t)||(t=1,e=t);var n=d().view,r={view:B(n),name:n,data:e};if(t=t||1,C)if(Q.push(r),q>t-1)E.go(-t);else{var s=Tt.indexView;0===q&&s===n?(ft.trigger("close"),
E.go(-1)):(q>0&&E.go(-q),f({view:s},vt),o("home",{info:d()}))}else{var a=V.length-t;1>a&&(a=1),V=V.slice(0,a),b=wt,o("back",{info:i(V),param:r})}},backTo:function(t,e,n){var i,r=C?I:V.map(function(t){return t.view}),s=C?q:r.length-1;for(i=s;i>-1;i--)if(!n&&B(r[i])===t||r[i]===t)return i===s?o("refresh",{info:d(),param:e}):$.back(s-i,e),vt;return yt},home:function(t){$.back(C?q:V.length-1,t)},exit:function(){ft.trigger("close"),C?E.go(-q-1):E.back()},onChange:function(t){F.on("change",t)},buildHash:function(t,e){var n=t.view,i=t.query,o=P(Tt.jsonParam?{_param:JSON.stringify(i)}:i,vt);return(e?"":U)+"#"+n+(o?"?"+o:"")},buildPath:function(t){var e=t.view,n=t.query,i=P(Tt.jsonParam?{_param:JSON.stringify(n)}:n,vt);return U+e+H.ext+(i?"?"+i:"")},reset:function(){I=W.slice(0),q=j},getAll:function(){return{index:q,list:C?I:V}},setOptions:function(t,e){C=!!t,Y=e,H=N&&Y?Y.usePath:yt},usePath:function(){return H}};return $}),t("router",function(){function t(t){if(t){var e,n=t.complete;t.hide=function(t){y.back(1,t||e)},t.complete=function(i){e=i,st(n,t,[i])}}}function n(e){r.onChange(function(e){var n=e.data,i=n.info,o=n.param,r=e.type;switch(r){case"init":Tt.autoInit&&s.add(i.view,{param:i.query},vt,function(e){t(e),d.trigger(r,e)});break;case"forward":v(function(){d.trigger("willForward",i)===!1?history.back():s.add(i.view,{param:i.query},yt,function(e){t(e),d.trigger(r,e)})},100);break;case"refresh":s.refresh({view:a.getRealName(i.view),name:i.view,data:o}),d.trigger(r);break;case"back":case"home":v(function(){s.backTo(i.view,o,i.query,function(){d.trigger(r)})},100);break;case"willForward":return d.trigger(r,n)}}),r.start(e)}function i(){u.add("router","tap",function(t){var e,n,i,o,s=t.el,a=W(s,"href"),c=W(s,"target"),l=A(W(s,"param")||"",vt);a.indexOf("#!")?a.indexOf("#")||(a=a.slice(1),e=r.analyzeHash(a),"_blank"===c?y.open(e.view+":new",{param:p(e.query,l)}):(o=e.view.split(":"),n=o.length>0,"0"==o[1]&&(e.view=o[0]),y.backTo(e.view,l,n)===yt&&y.open(e.view,{param:p(e.query,l)}))):2==a.indexOf("home")?y.home(l):(a=a.slice(2),i=a.match(h),i&&y.back(i[2]||1,l))})}function o(t){return function(){var e=m(arguments);return e[1]&&e[1].skipFilter||g.reduce(function(t,n){return t&&n(e)!==yt},vt)?st(r[t],r,e):void 0}}var r=e("history"),s=e("viewQ"),a=e("viewM"),l=yt,h=/back(\((\d+)\))?/,u=at(mt,[],bt.role),d=X(),f=[],g=[],y=p(d,{start:function(){l||(l=vt,n(),i(),r.onChange(function(t){d.trigger("history",t)}))},open:function(e,n,i){var o=m(arguments);if(o[1]&&o[1].skipFilter||f.reduce(function(t,e){return t&&e(o)!==yt},vt)){n=n||{};var a=n.param||{};s.add(e,n,!!n.atBottom,function(e){e?(t(e),st(i,e,[e]),n.atBottom||d.trigger("forward",e)):st(i)},function(t){return r.setHashInfo({view:t,query:a})})}},transfer:function(t,e){v(function(){if(r.usePath())location.href=r.buildPath({view:t,query:e});else{var n=ct(r.basePath);n.setQuery("_qtid",Date.now()),location.href=n.toUrl()+r.buildHash({view:t,query:e},!0)}})},back:o("back"),backTo:o("backTo"),home:o("home"),"goto":function(t,e,n,i){r.backTo(t,n,i)===yt&&y.open(t,e)},exit:r.exit,refreshParam:r.refreshParam,addOpenFilter:function(t){c(t)&&(f=f.concat(t))},removeOpenFilter:function(t){var e=f.indexOf(t);e>-1&&f.splice(e,1)},addBackFilter:function(t){c(t)&&(g=g.concat(t))},removeBackFilter:function(t){var e=g.indexOf(t);e>-1&&g.splice(e,1)},getCurViewName:function(t){return s.curView&&(t?s.curView:a.getRealName(s.curView))},getPreViewName:function(t){return s.preView&&(t?s.preView:a.getRealName(s.preView))},buildUrl:function(t){return r.usePath()?r.buildPath(t):r.buildHash(t)},getCurInfo:r.getHashInfo,resetHistory:r.reset,_getHistory:function(){return r.getAll()},_newSite:function(){gt.open(r.basePath)},_reset:t});return s.inject(y),y});var oe=e("viewM"),re=e("history"),se=e("router"),ae=e("pluginM"),ce=e("widgetM"),le={},he=new Y,ue=[],de=100;dt(function(){function t(){i=n.clientWidth,o=n.clientHeight,p(le,{width:i,height:o,rootWidth:i-Tt.root.left-Tt.root.right,rootHeight:o-Tt.root.top-Tt.root.bottom}),q(mt.body,"height",o+"px"),q(r,{height:le.rootHeight+"px",width:le.rootWidth+"px"})}function e(){var e=n.clientHeight;(St.ios||e>o-de)&&e!=o&&t()}var n=mt.documentElement,i=n.clientWidth,o=n.clientHeight,r=mt.createElement(bt.app);p(le,{width:i,height:o,rootTop:Tt.root.top,rootLeft:Tt.root.left}),q(mt.body,"height",o+"px"),Tt.customRoot?(le.rootWidth=i-Tt.root.left-Tt.root.right,le.rootHeight=o-Tt.root.top-Tt.root.bottom,q(r,{top:le.rootTop+"px",left:le.rootLeft+"px",height:le.rootHeight+"px",width:le.rootWidth+"px"}),L(mt.body,r)):(le.rootWidth=i,le.rootHeight=o,r=mt.body),ft.root=Tt.appRoot=r,ft.checkResize=e,se.start(),Tt.screen&&(Tt.screen.autoResize&&gt.addEventListener("resize",e),Tt.screen.rotate&&te.on("change",t)),Tt.preventMove&&F(mt,"touchmove",function(t){t.preventDefault()})}),ft=p(ft,X()),p(ft,{config:function(t){var e=p(vt,Tt,t),n=e.plugins,i=e.globalPlugins;return s(i)&&ae.setGlobal(i),s(n)?n.forEach(function(t){t&&n.name&&ae.setOpt(t.name,t.options)}):n&&g(n,function(t,e){t&&ae.setOpt(t,e)}),re.setOptions(e.hashRouter,e.hashSupport),e},root:mt.body,origin:le,defineView:oe.define,undefineView:oe.undefine,createView:oe.create,buildView:oe.build,existsView:oe.exists,getView:oe.get,getViewSync:oe.getSync,addPlugin:ae.add,configPlugin:ae.setOpt,setGlobalPlugins:ae.setGlobal,addWidget:ce.add,showWidget:ce.show,router:se,open:se.open,exit:se.exit,view:oe,show:oe.show,showView:oe.show,hash:{getInfo:re.getHashInfo,setInfo:re.setHashInfo,analyzeHash:re.analyzeHash,setParam:re.refreshParam,build:re.buildHash},sniff:St});var fe=ft.util={};fe.ready=D,ft.ready=dt,ft.addReadyDependencies=function(t){ue.push(t)},fe.query=function(t){return mt.querySelector(t)},fe.queryAll=function(t){return mt.querySelectorAll(t)},fe.is=o,fe.isObject=r,fe.isString=a,fe.isArray=s,fe.isFunction=c,fe.isNumber=h,fe.isElement=l,fe.isPlainObject=u,fe.isEmptyObject=d,fe.extend=p,fe.each=g,fe.makeArray=m,fe.delay=v,fe.associate=y,fe.mapping=w,fe.camelCase=T,fe.dasherize=S,fe.empty=E,fe.noop=n,fe.getUniqueID=x,fe.getZIndex=b,fe.jsonToQuery=P,fe.queryToJson=A,fe.parseURL=ct,fe.loader=ht,fe.builder=M,fe.appendNodes=L,fe.insertElement=z,fe.removeNode=R,fe.attr=W,fe.css=q,fe.removeStyle=j,fe.addClass=U,fe.removeClass=$,fe.fixEvent=V,fe.addEvent=F,fe.removeEvent=B,fe.dispatchEvent=Q,fe.createStyle=J,fe.size=et,fe.position=ot,fe.contains=Ft,fe.focus=Z,fe.blur=G,fe.animate=Bt,fe.dataSet=rt,fe.delegatedEvent=at,fe.CustEvent=fe.custEvent=Vt,fe.Deferred=fe.deferred=Y,fe.queue=H,fe.parallel=N,ft.logger=fe.logger=ut,gt.QApp=ft,D(function(){ue.length?N(ue).done(function(){he.resolve()}):he.resolve()}),function(){var t=ft.util;ft.addPlugin("static",function(e,n,i){e.on("rendered",function(){e.root&&t.css(e.root,{position:"absolute",width:"100%",height:"100%"})})})}(),function(){function t(t){j(t,s)}function e(t){q(t,a,""),j(t,a)}function n(t){return~(t+"").indexOf("%")||~(t+"").indexOf("px")?t:t+"px"}function i(t,e,n){e.on("loadEnd",function(){W(e.root,"qapp-ani",t),q(e.root,a,"hidden")}),e.on("beforeHide",function(){G(e.root)}),e.on("destroy",function(){e.show=wt,e.hide=wt})}function o(t,e){var n,i,o=-1;for(n=0,i=t.length;i>n;n++)if(t[n].view===e){o=n;break}return o}function r(t,e,n,i,o){var r=0;return N(t.map(function(t,o){return e>o?(t.view.trigger("beforeHide"),Bt(t.view.root,i?l(t.translate,0,0):l(0,t.translate,0),n)):(r+=t.distance,Bt(t.view.root,i?l(r,0,0):l(0,r,0),n))}))}var s="display",a="visibility",c=function(){var t=navigator.userAgent.toLowerCase();return St.ios||St.android&&t.indexOf("micromessenger")>-1?1:2}(),l=1==c?function(t,e,n){return{translate3d:t+"px, "+e+"px, "+n+"px"}}:function(t,e,n){return{translate:t+"px, "+e+"px",translateZ:n+"px"}},h=10,u={position:"right",distance:0,duration:200,zIndex:0},d={},f=yt;ft.addPlugin("moveEnter",u,function(s,a,g){var m,y,w={position:"absolute",top:0,zIndex:a.zIndex||b()},x=g.type.indexOf&&-1===g.type.indexOf("pad"),T="right"===a.position||"left"===a.position,S="right"===a.position||"bottom"===a.position?-1:1,E=yt,k=yt,_=yt;if(a.panBack===xt&&(a.panBack="app"===g.type),x&&(a.distance=T?le.rootWidth:le.rootHeight),m=S*a.distance,g.animate||(a.duration=0),x?(y=[],w.width="100%",w.height="100%"):(d[a.position]||(d[a.position]=[]),y=d[a.position],w[T?"height":"width"]="100%"),a.panBack&&x&&("right"===a.position||"left"===a.position)){var P=function(t){return~t.directions.indexOf(a.position)?t.clientX-t.offsetX<h:yt},O=function(t){_?q(s.root,l(t.offsetX,0,0)):k||(k=vt,_=P(t))},A=function(t){_&&(_=yt,Math.abs(t.offsetX)>Math.abs(a.distance)/2?s.hide():Bt(s.root,l(0,0,0),a.duration/2).done()),k=yt};s.on("show",function(){F(s.root,"pan",O),F(s.root,"panend",A)}),s.on("hide",function(){B(s.root,"pan",O),B(s.root,"panend",A)}),s.on("rendered",function(){var t=mt.createElement("div");t.className="touch-opacity",q(t,{position:"absolute",zIndex:"9999",width:n(h),height:"100%",backgroundColor:"rgba(255, 255, 255, 0)"}),q(t,"right"===a.position?"left":"right","0"),U(s.root,"shadow"),s.root.appendChild(t)})}return s.on("loaded",function(){a.distance||(a.distance=et(s.root)[T?"width":"height"]),x?3===c?"bottom"===a.position?w.top=n(le.rootHeight):w[a.position]=n(-a.distance):("bottom"===a.position?w.top=n(le.rootHeight-a.distance):w[a.position]=n(0),p(w,T?l(-S*a.distance,0,0):l(0,-S*a.distance,0))):"bottom"!==a.position?w[a.position]=n(-a.distance):w.top=n(le.rootHeight),q(s.root,w)}),i("moveEnter",s,a),s.show=function(n){if(G(),!f){f=vt,E=vt;var i=o(y,s);~i?r(y,i,n===vt||s.preventAnimate?0:a.duration,T).done(function(){y.splice(0,i).forEach(function(t){t.view.trigger("hide")}),f=yt,E=yt,s.trigger("refresh")}):(s.once("completed",function(){t(s.root),e(s.root),s.trigger("beforeShow"),y.unshift({view:s,distance:x?0:m,translate:x?-m:0}),v(function(){r(y,0,n===vt||s.preventAnimate?0:a.duration,T,s.root).done(function(){f=yt,E=yt,j(s.root,"transform"),s.trigger("show")})})}),s.renderTo(ft.root))}return s},s.hide=function(t){if((!f||x&&!E)&&s.isShow){f=vt;var e=o(y,s);r(y,e+1,t===vt||s.preventAnimate?0:a.duration,T).done(function(){y.splice(0,e+1).forEach(function(t){t.view.trigger("hide")}),f=yt})}return s},s.on("destroy",function(){w=wt,y=wt,s=wt}),{setOption:function(t){a=p({},u,t)}}})}()}(),function(){function t(t,e,n,i){t.addEventListener(e,n,!!i)}function e(t){var e=t.length;if(e===e>>>0)try{return M.call(t)}catch(n){}return!0}function n(e){/complete|loaded|interactive/.test(document.readyState)&&document.body?e():t(document,"DOMContentLoaded",function(){e()})}function i(){return 2==b}function o(t){return Object.getOwnPropertyNames(t)}function r(t){return 0===o(t).length}function s(t){return"tagName"in t?t:t.parentNode}function a(t){var e=document.createEvent("HTMLEvents");return e.initEvent(t,!0,!0),e}function c(t,e){D&&t&&t.dispatchEvent&&t.dispatchEvent(e)}function l(t,e){return x.forEach(function(n){t[n]=e[n]}),t}function h(t,e){var n=[],i=Math.abs(t),o=Math.abs(e),r=Math.tan(k/180*Math.PI),s=i>o;return(i>0||o>0)&&(n.push(s?t>0?"right":"left":e>0?"down":"up"),s&&o/i>r?n.push(e>0?"down":"up"):!s&&i/o>r&&n.push(t>0?"right":"left")),n}function u(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function d(t,e){var n=Math.atan2(e,t)/Math.PI*180;return 0>n?n+360:n}function f(t,e){var n=Math.atan(-1*e/t)/Math.PI*180;return 0>n?n+180:n}function p(t,e){for(var n=Y-f(t,e);Math.abs(n-H)>90;)0>H?n-=180:n+=180;return H=n}function g(t,e,n,i,o){var r=a(t);return r.offsetX=e,r.offsetY=n,r.degree=d(e,n),r.directions=h(e,n),o&&(r.duration=o,r.speedX=r.offsetX/o,r.speedY=r.offsetY/o),l(r,i)}function m(t,e,n,i,o,r,s){var c=a(t);return c.centerX=e,c.centerY=n,void 0!==i&&(c.scale=i),void 0!==o&&(c.deflection=o),c.touchs=[r,s],c}function v(){var t=!0;for(var e in C)if("end"!=C[e].status){t=!1;break}return t}function y(t){L[t?"disable":"enable"]()}var w=window.QApp,x=["screenX","screenY","clientX","clientY","pageX","pageY"],b=2,T=200,S=300,E=10,k=15,_=500,P=10,O=null,A=null,C={},X=0,Y=0,H=0,N=!0,D=!0,M=Array.prototype.slice;n(function(){function n(t){r(C)&&(O=s(t.touches[0].target)),e(t.changedTouches).forEach(function(t,e){var n=o(C);if(n.length<b){var r=l({},t),s={startTouch:r,curTouch:r,startTime:Date.now(),status:"tapping",other:null,handler:setTimeout(function(){s&&("tapping"==s.status&&(s.status="pressing",c(O,l(a("press"),r))),clearTimeout(s.handler),s.handler=null)},T)};if(c(O,l(a("feel"),r)),C[t.identifier]=s,i()&&1==n.length){var h=C[n[0]].startTouch,d=r.clientX-h.clientX,p=r.clientY-h.clientY,g=(r.clientX+h.clientX)/2,m=(r.clientY+h.clientY)/2;s.other=C[n[0]],C[n[0]].other=s,A={centerX:g,centerY:m,pinch:!1,deflection:!1,distance:u(d,p)},Y=f(d,p)}}})}function h(t){e(t.changedTouches).forEach(function(t,e){var n=C[t.identifier];if(n){var o=n.startTouch,r=t.clientX-o.clientX,s=t.clientY-o.clientY;if("tapping"==n.status||"pressing"==n.status?u(r,s)>E&&(n.status="panning",n.startMoveTime=Date.now(),c(O,g("pan",r,s,t))):"panning"==n.status&&c(O,g("pan",r,s,t)),i()&&n.other&&"end"!=n.other.status){var a=n.other.curTouch,h=t.clientX-a.clientX,d=t.clientY-a.clientY,f=(t.clientX+a.clientX)/2,v=(t.clientY+a.clientY)/2,y=u(h,d);if(A.pinch?c(O,m("pinch",f,v,y/A.distance,void 0,t,a)):Math.abs(A.distance-y)>P&&(A.pinch=!0,c(O,m("pinch",f,v,y/A.distance,void 0,t,a))),A.deflection){var w=p(h,d);c(O,m("rotate",f,v,void 0,w,t,a))}else{var w=p(h,d);Math.abs(w)>k&&(c(O,m("rotate",f,v,void 0,w,t,a)),A.deflection=!0)}}n.curTouch=l({},t)}})}function d(t){if(e(t.changedTouches).forEach(function(t,e){var n=C[t.identifier];if(n){if(n.handler&&(clearTimeout(n.handler),n.handler=null),"tapping"==n.status)c(O,l(a("tap"),t));else if("pressing"==n.status)N&&c(O,l(a("tap"),t)),c(O,l(a("pressend"),t));else if("panning"==n.status){var o=n.startTouch,r=t.clientX-o.clientX,s=t.clientY-o.clientY,h=Date.now()-n.startMoveTime;c(O,g("panend",r,s,t,h)),S>h&&c(O,g("flick",r,s,t,h))}if(i()&&n.other&&"end"!=n.other.status){var d=n.other.curTouch,f=t.clientX-d.clientX,v=t.clientY-d.clientY,y=(t.clientX+d.clientX)/2,w=(t.clientY+d.clientY)/2,x=u(f,v);if(A.pinch&&c(O,m("pinchend",y,w,x/A.distance,void 0,t,d)),A.deflection){var b=p(f,v);c(O,m("rotatend",y,w,void 0,b,t,d))}b=0}n.status="end"}}),v())for(var n in C)delete C[n]}var y=document.body;t(y,"touchstart",n),t(y,"touchmove",h),t(y,"touchend",d),t(y,"tap",function(t){var e=Date.now();_>e-X?(c(O,l(a("doubletap"),t)),X=0):X=e})});var L={enable:function(){D=!0},disable:function(){D=!1},disableLongTap:function(){N=!1}};w.on("running",y),w.gesture=L,w.gesture.disableTransferCtrl=function(){w.off("running",y)}}(),function(){"use strict";function t(e,i){function o(t,e){return function(){return t.apply(e,arguments)}}var r;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=e,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!t.notNeeded(e)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,l=s.length;l>c;c++)a[s[c]]=o(a[s[c]],a);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,n.hijacked||n,i):o.call(e,t,n,i)},e.addEventListener=function(t,n,i){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(e,t,n,i)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=i&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(i&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;i&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,s,a,c,l,h=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(l=t.changedTouches[0],h=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||h,h.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=h.tagName.toLowerCase(),"label"===a){if(e=this.findControl(h)){if(this.focus(h),n)return!1;h=e}}else if(this.needsFocus(h))return t.timeStamp-s>100||i&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(h),this.sendClick(h,t),i&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return i&&!o&&(c=h.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(h)||(t.preventDefault(),this.sendClick(h,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,i,o,r;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t,QApp.addPlugin("fastclick",{},function(e,n){var i;return e.on("show",function(){i=new t(e.root,n)}),e.on("destroy",function(){i&&i.destroy&&i.destroy()}),{getEntity:function(){return i}}}),QApp.setGlobalPlugins("fastclick")}(),function(){function t(t){if(null==t.pageX&&null!=t.clientX){var e=document.documentElement,n=document.body;t.pageX=t.clientX+(e.scrollLeft||n&&n.scrollLeft||0)-(e.clientLeft||n&&n.clientLeft||0),t.pageY=t.clientY+(e.scrollTop||n&&n.scrollTop||0)-(e.clientTop||n&&n.clientTop||0)}return t}function e(t){var e=E(t),n=S(t);return{left:e.left,top:e.top,right:e.left+n.width,bottom:e.top+n.height}}function n(n,i){var o=e(n);return i=t(i),i.pageX>=o.left&&i.pageX<=o.right&&i.pageY>=o.top&&i.pageY<=o.bottom}function i(t){x(t,h)}function o(t){w(t,u,""),x(t,u)}function r(t){return~(t+"").indexOf("%")||~(t+"").indexOf("px")?t:t+"px"}function s(){return C||(C=l.createElement("div"),w(C,{position:"absolute",top:0,left:0,width:r(d.width),height:r(d.height)})),C}function a(t,e,n){e.on("loadEnd",function(){f.attr(e.root,"qapp-ani",t),f.css(e.root,u,"hidden")}),e.on("beforeHide",function(){k(e.root)}),e.on("destroy",function(){e.show=null,e.hide=null}),e.autoHide=n.autoHide&&"false"!==n.autoHide,X(e)}var c=window,l=document,h="display",u="visibility",d=QApp.origin,f=QApp.util,p=f.extend,g=f.delay,m=f.appendNodes,v=f.addClass,y=(f.addEvent,f.removeEvent,f.removeNode),w=f.css,x=f.removeStyle,b=f.contains,T=f.animate,S=f.size,E=f.position,k=(f.parallel,f.blur),_=f.getZIndex,P=(f.getUniqueID,f.delegatedEvent),O=(f.dispatchEvent,f.isFunction,function(){var t=QApp.sniff,e=navigator.userAgent.toLowerCase();return t.ios||t.android&&e.indexOf("micromessenger")>-1?1:2}()),A=1==O?function(t,e,n){return{translate3d:t+"px, "+e+"px, "+n+"px"}}:function(t,e,n){return{translate:t+"px, "+e+"px",translateZ:n+"px"}},C=null,X=function(){function t(t){o.unshift(t)}function e(t){var e=o.indexOf(t);~e&&o.splice(e,1)}function i(n){n.once("show",function(){t(n)}),n.once("hide",function(){e(n),n=null})}var o=[],r="";return i.setNextView=function(t){r=t},f.ready(function(){l.body.addEventListener("touchstart",function(t){var e=o[0];!e||!e.autoHide||b(e.root,t.target)||n(e.root,t)||e.relyElement&&b(e.relyElement,t.target)||(e.isContainer?e.decHide():e.hide())},!1)}),i}();!function(){function t(t,e,n){w(t,p(e,{top:r(d.height-n.distance),height:r(n.distance),zIndex:n.zIndex},A(0,n.distance,0)))}var e=500,n={autoHide:!0,distance:0,duration:200,showMask:!0,maskColor:"rgba(0, 0, 0, 0.4)",zIndex:0};QApp.addPlugin(["actionSheet","ui.actionSheet"],n,function(n,r,u){var f,b,E={position:"absolute",left:0,width:"100%"},P=!1;return u.animate||(r.duration=0),r.zIndex=r.zIndex||_(),n.on("loaded",function(){r.distance||(n.root.style.height="auto",r.distance=S(n.root).height),t(n.root,E,r),v(n.root,"shadow")}),n.show=function(t){return t&&t.fromHash&&(t=!0),k(),X.setNextView(n.name),r.showMask&&(f=s(),w(f,{display:"block",backgroundColor:r.maskColor,zIndex:r.zIndex}),m(l.body,f)),P||(P=!0,n.isShow?(P=!1,n.trigger("refresh")):(b=S(c).height!==d.height?e:0,n.once("completed",function(){i(n.root),o(n.root),n.trigger("beforeShow"),g(function(){T(n.root,A(0,0,0),t===!0||n.preventAnimate?0:r.duration,"ease-out",b).done(function(){n.isShow=!0,P=!1,x(n.root,"transform"),n.trigger("show")})})}),n.renderTo(l.body))),n},n.hide=function(t){return!P&&n.isShow&&(P=!0,n.trigger("beforeHide"),T(n.root,E,t===!0||n.preventAnimate?0:r.duration/2,"ease-out").done(function(){n.isShow=!1,f&&(w(f,h,"none"),y(f)),P=!1,n.trigger("hide")})),n},n.refresh=function(){n.root.style.height="auto",r.distance=S(n.root).height,t(n.root,E,r)},n.on("destroy",function(){E=null,f=null,n=null}),a("actionSheet",n,r),{setOption:function(t){r=p({},r,t)}}})}(),function(){var t={autoHide:!1,maskColor:"rgba(0, 0, 0, .4)",duration:200,width:0,height:0,zIndex:0};QApp.addPlugin(["ui.dialog","dialog"],t,function(t,e,n){var c,u=d.width,f=d.height,g=!1;return n.animate||(e.duration=0),e.zIndex=e.zIndex||_(),t.on("loaded",function(){var n=S(t.root);e.width||(e.width=n.width),e.height||(e.height=n.height),w(t.root,p({position:"absolute",width:r(e.width),height:r(e.height),zIndex:e.zIndex,display:"none",top:r((f-e.height)/2),left:r((u-e.width)/2)},A(0,f,0))),v(t.root,"shadow")}),t.show=function(n){return n&&n.fromHash&&(n=!0),X.setNextView(t.name),c=s(),w(c,{display:"block",backgroundColor:e.maskColor,zIndex:e.zIndex}),m(l.body,c),g||(g=!0,t.isShow?(g=!1,t.trigger("refresh")):(t.once("completed",function(){i(t.root),o(t.root),t.trigger("beforeShow"),T(t.root,A(0,0,0),n===!0||t.preventAnimate?0:e.duration).done(function(){t.isShow=!0,g=!1,x(t.root,"transform"),t.trigger("show")})}),t.renderTo(l.body))),t},t.hide=function(n){return!g&&t.isShow&&(g=!0,t.trigger("beforeHide"),T(t.root,A(0,f,0),n===!0||t.preventAnimate?0:e.duration).done(function(){t.isShow=!1,c&&(w(c,h,"none"),y(c)),g=!1,t.trigger("hide")})),t},t.on("destroy",function(){c=null,t=null}),a("dialog",t,e),{setOption:function(t){e=p({},e,t)}}})}(),function(){function t(t,e,n){var i=0,o=0;switch(n){case"right":i=r(f.position(t).top),o=r(f.position(t).left+f.size(t).width);break;case"left":i=r(f.position(t).top),o=r(f.position(t).left-parseInt(e.width));break;case"bottom":i=r(f.position(t).top+f.size(t).height),o=r("left"===e.position?f.position(t).left:"right"===e.position?f.position(t).left+f.size(t).width-e.width:f.position(t).left+f.size(t).width/2-e.width/2);break;case"top":i=r(f.position(t).top-parseInt(e.height)),o=r("left"===e.position?f.position(t).left:"right"===e.position?f.position(t).left+f.size(t).width-e.width:f.position(t).left+f.size(t).width/2-e.width/2)}return{top:i,left:o}}function e(t,e){if(e.autoDirection&&"false"!==e.autoDirection){var n=e.direction,i=E(t),o=i.left,r=i.top,s=S(t),a=s.width,c=s.height,l=d.width,h=d.height,u=e.width,f=e.height,p=l>=o+a+u,g=o-u>=0,m=h>=r+c+f,v=r-f>=0;return"right"===n?p||(n=g?"left":"bottom"):"left"===n&&(g||(n=p?"right":"bottom")),"bottom"===n?m||(n="top"):"top"===n&&(v||(n="bottom")),n}return e.direction}var n,s=null,c={autoHide:!0,autoDirection:!1,direction:"right",duration:200,width:0,height:0,position:"center",dropDown:!1,bgColor:"rgba(0, 0, 0, 0.4)",group:!1,item:null},u={opacity:0},m={opacity:1};QApp.ready(function(){n=P(l.body,[],"qapp-popup-group")}),QApp.addPlugin(["popup","ui.popup"],c,function(d,f,v){var x=!1,b=!1;return v.animate||(f.duration=0),f.dropDown&&(f.useArrow=!1,f.autoDirection=!1,f.direction="bottom",f.dropDuration=f.duration,f.duration=0),f.zIndex=f.zIndex||_(),d.on("loaded",function(){var t=S(d.root);f.width||(f.width=t.width),f.height||(f.height=t.height),w(d.root,{display:"none",position:"absolute",width:r(f.width),height:r(f.height),zIndex:f.zIndex}),w(d.root,f.dropDown?m:u)}),d.show=function(a,c){if(d.relyElement=a,X.setNextView(d.name),!x){x=!0;var h=e(a,f),u=t(a,f,h);d.isShow?(i(d.root),o(d.root),w(d.root,{top:u.top,left:u.left}),x=!1,d.trigger("refresh")):(d.once("completed",function(){if(d.trigger("beforeShow"),i(d.root),o(d.root),w(d.root,{top:u.top,left:u.left}),f.dropDown){var t,e=d.root.childNodes,n=-1;do n++,t=e[n];while(3===t.nodeType);w(t,p({height:r(f.height)},A(0,-f.height,0))),w(d.root,{position:"absolute",zIndex:f.zIndex,width:r(f.width),height:r(f.dropDown),backgroundColor:f.bgColor,overflow:"hidden"}),s&&y(s),g(function(){T(t,A(0,0,0),c===!0||d.preventAnimate?0:f.dropDuration,"ease-out").done(function(){d.isShow=!0,x=!1,d.trigger("show")})})}else T(d.root,m,c===!0||d.preventAnimate?0:f.duration).done(function(){d.isShow=!0,x=!1,d.trigger("show")})}),d.once("rendered",function(){f.group&&n.add(f.group,"touchstart",function(t){t.el!==f.item&&(b=!0)}),d.root.addEventListener("tap",function(t){d&&d.root===t.target&&(d.once("hide",function(){d.destroy()}),d.hide(),t.stopPropagation())},!0)}),d.renderTo(l.body))}return d},d.hide=function(t){if(d.relyElement=null,!x&&d.isShow)if(x=!0,d.trigger("beforeHide"),f.dropDown){var e,i=d.root.childNodes,o=t===!0||d.preventAnimate?0:f.dropDuration,r=-1;do r++,e=i[r];while(3===e.nodeType);o/=2,f.group&&b?T(e,{opacity:0},o,"ease-in").done(function(){d.isShow=!1,x=!1,d.options.destroyDom=!1,s&&y(s),s=d.root,g(function(){T(s,{opacity:0},o,"ease-in").done(function(){y(s),s=null})},100),n.remove(f.group,"touchstart"),d.trigger("hide")}):T(e,p({opacity:0},A(0,-f.height,0)),t===!0||d.preventAnimate?0:o,"ease-in").done(function(){d.isShow=!1,x=!1,d.trigger("hide")})}else T(d.root,u,t===!0||d.preventAnimate?0:f.duration).done(function(){d.isShow=!1,x=!1,w(d.root,h,"none"),d.trigger("hide")});return d},d.on("destroy",function(){d=null}),a("popup",d,f),{setOption:function(t){f=p({},c,t)}}})}()}(),function(){function t(){}function e(){return null}function n(n){var i=n in window&&window[n];return i?{size:function(){return i.length},key:function(){return i.key?function(t){return i.key(t)}:e}(),get:function(){return i.getItem?function(t){try{return JSON.parse(i.getItem(t))}catch(e){return null}}:e}(),set:function(){return i.setItem?function(t,e){try{return i.setItem(t,JSON.stringify(e))}catch(n){return}}:t}(),remove:function(){return i.removeItem?function(t){return i.removeItem(t)}:t}(),clear:function(){return i.clear?function(){return i.clear()}:t}()}:l}function i(){return(new Date).getTime()}function o(){var t,e,n,o,r=i();for(t=0,e=h.size();e>t;t++)n=h.key(t),o=h.get(n),o&&n!==a&&(o.expires>0&&o.createTime+o.expires<r?h.remove(n):f[n]=o.data)}function r(){this._source={}}function s(t){return m[t]||(m[t]=new r),m[t]}var a="_baseInfo",c=6048e5,l={size:function(){return 0},get:e,set:t,remove:t,clear:t},h=n("localStorage"),u=n("sessionStorage"),d=!1,f={},p=function(t,e,n){var o=arguments.length,r=null;return 1===o?(d&&t in f?r=f[t]:(r=u.get(t)||function(){
var e=h.get(t);if(e){if(0===e.expires||e.createTime+e.expires>i())return e.data;h.remove(t)}return null}(),f[t]=r),r):o>1?void 0===e||null===e?(delete f[t],u.remove(t)||h.remove(t)):(f[t]=e,n=n||0,-1===n?u.set(t,e):h.set(t,{data:e,createTime:i(),expires:n})):void 0};p.setCache=function(t){d=!!t},p.clear=function(){var t=h.get(a);u.clear(),h.clear(),h.set(a,t)},p.init=function(t){var e=h.get(a)||{},n=e.version,r=e.cTime,s=!1;n&&n===t||(s=!0,h.clear(),n=t),(!r||i()-r>c)&&(s=!0,o(),r=i()),s&&h.set(a,{version:n,cTime:r})},QApp.util.storage=p;var g=QApp.util,m={};g.extend(r.prototype,{get:function(t){var e=this._source[t];return g.isArray(e)?e.slice(0):g.isObject(e)?g.extend(!0,{},e):e},set:function(t,e){g.isArray(e)?this._source[t]=e.slice(0):g.isObject(e)?this._source[t]=g.extend(!0,{},e):this._source[t]=e,this.trigger("change",t,e)},merge:function(t,e){void 0!==this._source[t]&&(e=g.extend(!0,this._source[t],e)),this.set(t,e)},remove:function(t){this._source[t]=void 0,this.trigger("change",t)},clear:function(){for(var t in this._source)this.remove(t)},onChange:function(t){this.on("change",t)},destroy:function(){this.off(),this._source=null}},g.CustEvent);var v=(QApp.dataSource={init:function(t){return s(t)},get:function(t,e){return m[t]?m[t].get(e):void 0},set:function(t,e,n){s(t).set(e,n)},merge:function(t,e,n){s(t).merge(e,n)},remove:function(t,e){s(t).remove(e)},clear:function(t){m[t]&&m[t].clear()},onChange:function(t,e){s(t).onChange(e)}},[]),y=QApp.hy?QApp.hy.config().hybridId:"global",w=QApp.dataSource.init(y),x=QApp.util.storage;w.on("change",function(t,e){v.indexOf(t)>-1&&x(t,e)}),w.addLocalKeys=function(t){v=v.concat(t),v.forEach(function(t){w.set(t,x(t))})},w.refresh=function(){v.forEach(function(t){w.set(t,x(t))})},QApp.hy&&QApp.hy.on("actived",function(){w.refresh()}),QApp.util.globalContext=w}(),function(){function t(t){return!(null===t||void 0===t)}function e(t,e){return t=(null===t?"":t).toString().trim(),e?encodeURIComponent(t):t}function n(n,i){var o,r,s,a=[];for(o in n)if("$nullName"===o)a=a.concat(n[o]);else if(c.isArray(n[o]))for(r=0,s=n[o].length;s>r;r++)c.isFunction(n[o][r])||a.push(o+"="+e(n[o][r],i));else!c.isFunction(n[o])&&t(n[o])&&a.push(o+"="+e(n[o],i));return a.join("&")}function i(){var t=!1;try{t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){t=!1}}}return t}function o(t,e){try{for(var n in e)t.setRequestHeader(n,e[n])}catch(i){}}function r(t,e){var r,s=i(),a="",l=t.method.toLocaleLowerCase();t.withCredentials&&(s.withCredentials=!0),t.timeout&&(r=c.delay(function(){try{e(null,{error:!0,type:"Timeout"}),s.abort()}catch(t){}},t.timeout));var h=!1,u=s.abort;if(s.abort=function(){h=!0,u.call(s),e(null,{error:!0,type:"Abort"})},s.onreadystatechange=function(){if(4==s.readyState){clearTimeout(r);var n={};if("xml"===t.dataType)n=s.responseXML;else if("text"===t.dataType)n=s.responseText;else try{n=s.responseText&&"string"==typeof s.responseText?JSON.parse(s.responseText):{}}catch(i){}200===s.status?e(n):0===s.status?h||e(null,{error:!0,type:"Fail"}):e(null,{error:!0,type:"Fail"})}},"get"===l&&t.cache===!1&&(t.data.__rnd=(new Date).getTime()),"query"===t.argsType?a=n(t.data,t.isEncode):"json"===t.argsType&&(a=JSON.stringify(t.data),t.isEncode&&(a=encodeURIComponent(a))),t.headers["Content-Type"]||("json"===t.argsType?t.headers["Content-Type"]="application/json;charset="+t.charset:t.headers["Content-Type"]="application/x-www-form-urlencoded;charset="+t.charset),t.headers["X-Requested-With"]||(t.headers["X-Requested-With"]="XMLHttpRequest"),"get"===l){var d;d=a?t.url+(~t.url.indexOf("?")?"&":"?")+a:t.url,s.open("get",d,!0),o(s,t.headers),s.send("")}else s.open("post",t.url,!0),o(s,t.headers),s.send(a);return s}function s(t,e){function n(){l?window[a]=i:delete window[a],h.remove()}var i,o,r={},s=!1,a="",l=!1,h=document.createElement("script");h.src=t.url;var u=c.parseURL(h.src);return u.query=c.extend(u.query,t.data),t.jsonpCallback?(l=!0,i=window[t.jsonpCallback]):t.jsonpCallback="QApp_"+ +new Date+p++,a=t.jsonpCallback,u.query[t.jsonp]=a,t.cache===!1&&(u.query.__rnd=+new Date+p++),r.abort=function(){s=!0,e(null,{error:!0,type:"Abort"}),n()},window[a]=function(t){o&&clearTimeout(o),s||(e(t),n())},o=c.delay(function(){e(null,{error:!0,type:"Timeout"}),n()},t.timeout),h.async=!0,h.charset=t.charset,h.src=u.toUrl(),h.onerror=function(){o&&clearTimeout(o),e(null,{error:!0,type:"Fail"}),n()},document.head.appendChild(h),r}function a(t,e){var n=u[t.mockKey||""],i=null;c.delay(function(){n&&(i=c.isFunction(n)?n(t):n);var o=!0;f.forEach(function(n){n(i,null,t,e)===!1&&(o=!1)}),o&&(e.resolve(i),t.success(i,null))},t.mockTime||1e3)}var c=QApp.util,l=c.Deferred,h={},u={},d=[],f=[],p=0,g={url:"",bizType:!1,charset:"UTF-8",timeout:3e4,data:{},argsType:"query",method:"get",headers:{},isEncode:!1,dataType:"json",cache:!1,withCredentials:!1,jsonp:"callback",jsonpCallback:"",success:c.noop,error:c.noop,onTimeout:c.noop,onAbort:c.noop},m=QApp.ajax=c.ajax=function(t){function e(t,e){var r=!0;f.forEach(function(o){o(t,e,i,n)===!1&&(r=!1)}),r&&(e?(n.reject(e),"Timeout"===e.type?i.onTimeout(t,o):"Abort"===e.type?i.onAbort(t,o):i.error(t,o)):(n.resolve(t),i.success(t,o)))}c.isString(t)&&(t={url:t}),t.bizType&&h[t.bizType]&&(t=c.extend(!0,{},h[t.bizType],t));var n=new l,i=c.extend(!0,{},g,t),o={},u=!0;return d.forEach(function(t){t(i,n)===!1&&(u=!1)}),u&&(i.mock?(o.abort=function(){n.reject({error:!0,type:"Abort"}),i.onAbort(null,o)},a(i,n)):o="jsonp"===t.dataType?s(i,e):r(i,e)),n.trans=o,n};QApp.ajax.setBizOptions=function(t,e){c.isString(t)?h[t]=e:c.extend(!0,h,t)},QApp.ajax.addMock=function(t,e){c.isString(t)?u[t]=e:u=t},QApp.ajax.addReqFilter=function(t){d=d.concat(t)},QApp.ajax.removeReqFilter=function(t){var e=d.indexOf(t);e>-1&&d.splice(e,1)},QApp.ajax.addRespFilter=function(t){f=f.concat(t)},QApp.ajax.removeRespFilter=function(t){var e=f.indexOf(t);e>-1&&f.splice(e,1)},QApp.addPlugin("ajax",{bizType:"",mock:!1},function(t,e){var n=[];t.ajax=function(i){var o=c.extend(!0,{},e,i);o.__view=t;var r=m(o);return n.push(r),r.all(function(){n.splice(n.indexOf(r),1)}),r},t.on("destroy",function(){n.forEach(function(t){t.destroy(),t.trans&&t.trans.abort()}),n.length=0,n=null})})}(),function(){var t=QApp.util,e={tag:"node-type"};QApp.addPlugin("doms",e,function(e,n,i){e.doms={},e.find=function(i){return e.root?t.makeArray(e.root.querySelectorAll("["+n.tag+'="'+i+'"]')):[]},e.on("rendered",function(){t.makeArray(e.root.querySelectorAll("["+n.tag+"]")).forEach(function(i){var o=t.attr(i,n.tag)||"node";e.doms[o]?t.isArray(e.doms[o])?e.doms[o].push(i):e.doms[o]=[e.doms[o],i]:e.doms[o]=i})}),e.on("destroy",function(){t.empty(e.doms),e.doms=null})})}();var Hogan=window.Hogan=QApp.util.hogan={};!function(t,e){function n(t){return String(null===t||void 0===t?"":t)}function i(t){return t=n(t),l.test(t)?t.replace(o,"&amp;").replace(r,"&lt;").replace(s,"&gt;").replace(a,"&#39;").replace(c,"&quot;"):t}t.Template=function(t,n,i,o){this.r=t||this.r,this.c=i,this.options=o,this.text=n||"",this.buf=e?[]:""},t.Template.prototype={r:function(t,e,n){return""},v:i,t:n,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},rp:function(t,e,n,i){var o=n[t];return o?(this.c&&"string"==typeof o&&(o=this.c.compile(o,this.options)),o.ri(e,n,i)):""},rs:function(t,e,n){var i=t[t.length-1];if(!h(i))return void n(t,e,this);for(var o=0;o<i.length;o++)t.push(i[o]),n(t,e,this),t.pop()},s:function(t,e,n,i,o,r,s){var a;return h(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ls(t,e,n,i,o,r,s)),a=""===t||!!t,!i&&a&&e&&e.push("object"==typeof t?t:e[e.length-1]),a)},d:function(t,e,n,i){var o=t.split("."),r=this.f(o[0],e,n,i),s=null;if("."===t&&h(e[e.length-2]))return e[e.length-1];for(var a=1;a<o.length;a++)r&&"object"==typeof r&&o[a]in r?(s=r,r=r[o[a]]):r="";return i&&!r?!1:(i||"function"!=typeof r||(e.push(s),r=this.lv(r,e,n),e.pop()),r)},f:function(t,e,n,i){for(var o=!1,r=null,s=!1,a=e.length-1;a>=0;a--)if(r=e[a],r&&"object"==typeof r&&t in r){o=r[t],s=!0;break}return s?(i||"function"!=typeof o||(o=this.lv(o,e,n)),o):i?!1:""},ho:function(t,e,n,i,o){var r=this.c,s=this.options;s.delimiters=o;var i=t.call(e,i);return i=null==i?String(i):i.toString(),this.b(r.compile(i,s).render(e,n)),!1},b:e?function(t){this.buf.push(t)}:function(t){this.buf+=t},fl:e?function(){var t=this.buf.join("");return this.buf=[],t}:function(){var t=this.buf;return this.buf="",t},ls:function(t,e,n,i,o,r,s){var a=e[e.length-1],c=null;if(!i&&this.c&&t.length>0)return this.ho(t,a,n,this.text.substring(o,r),s);if(c=t.call(a),"function"==typeof c){if(i)return!0;if(this.c)return this.ho(c,a,n,this.text.substring(o,r),s)}return c},lv:function(t,e,i){var o=e[e.length-1],r=t.call(o);return"function"==typeof r&&(r=n(r.call(o)),this.c&&~r.indexOf("{{"))?this.c.compile(r,this.options).render(o,i):n(r)}};var o=/&/g,r=/</g,s=/>/g,a=/\'/g,c=/\"/g,l=/[&<>\"\']/,h=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(Hogan),function(t){function e(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function n(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function i(t,e,n){if(e.charAt(n)!=t.charAt(0))return!1;for(var i=1,o=t.length;o>i;i++)if(e.charAt(n+i)!=t.charAt(i))return!1;return!0}function o(t,e,n,i){for(var a=[],c=null,l=null;t.length>0;)if(l=t.shift(),"#"==l.tag||"^"==l.tag||r(l,i))n.push(l),l.nodes=o(t,l.tag,n,i),a.push(l);else{if("/"==l.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+l.n);if(c=n.pop(),l.n!=c.n&&!s(l.n,c.n,i))throw new Error("Nesting error: "+c.n+" vs. "+l.n);return c.end=l.i,a}a.push(l)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return a}function r(t,e){for(var n=0,i=e.length;i>n;n++)if(e[n].o==t.n)return t.tag="#",!0}function s(t,e,n){for(var i=0,o=n.length;o>i;i++)if(n[i].c==t&&n[i].o==e)return!0}function a(t){return t.replace(x,"\\\\").replace(v,'\\"').replace(y,"\\n").replace(w,"\\r")}function c(t){return~t.indexOf(".")?"d":"f"}function l(t){for(var e="",n=0,i=t.length;i>n;n++){var o=t[n].tag;"#"==o?e+=h(t[n].nodes,t[n].n,c(t[n].n),t[n].i,t[n].end,t[n].otag+" "+t[n].ctag):"^"==o?e+=u(t[n].nodes,t[n].n,c(t[n].n)):"<"==o||">"==o?e+=d(t[n]):"{"==o||"&"==o?e+=f(t[n].n,c(t[n].n)):"\n"==o?e+=g('"\\n"'+(t.length-1==n?"":" + i")):"_v"==o?e+=p(t[n].n,c(t[n].n)):void 0===o&&(e+=g('"'+a(t[n])+'"'))}return e}function h(t,e,n,i,o,r){return"if(_.s(_."+n+'("'+a(e)+'",c,p,1),c,p,0,'+i+","+o+',"'+r+'")){_.rs(c,p,function(c,p,_){'+l(t)+"});c.pop();}"}function u(t,e,n){return"if(!_.s(_."+n+'("'+a(e)+'",c,p,1),c,p,1,0,0,"")){'+l(t)+"};"}function d(t){return'_.b(_.rp("'+a(t.n)+'",c,p,"'+(t.indent||"")+'"));'}function f(t,e){return"_.b(_.t(_."+e+'("'+a(t)+'",c,p,0)));'}function p(t,e){return"_.b(_.v(_."+e+'("'+a(t)+'",c,p,0)));'}function g(t){return"_.b("+t+");"}var m=/\S/,v=/\"/g,y=/\n/g,w=/\r/g,x=/\\/g,b={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};t.scan=function(t,o){function r(){v.length>0&&(y.push(new String(v)),v="")}function s(){for(var t=!0,e=T;e<y.length;e++)if(t=y[e].tag&&b[y[e].tag]<b._v||!y[e].tag&&null===y[e].match(m),!t)return!1;return t}function a(t,e){if(r(),t&&s())for(var n,i=T;i<y.length;i++)y[i].tag||((n=y[i+1])&&">"==n.tag&&(n.indent=y[i].toString()),y.splice(i,1));else e||y.push({tag:"\n"});w=!1,T=y.length}function c(t,e){var i="="+E,o=t.indexOf(i,e),r=n(t.substring(t.indexOf("=",e)+1,o)).split(" ");return S=r[0],E=r[1],o+i.length-1}var l=t.length,h=0,u=1,d=2,f=h,p=null,g=null,v="",y=[],w=!1,x=0,T=0,S="{{",E="}}";for(o&&(o=o.split(" "),S=o[0],E=o[1]),x=0;l>x;x++)f==h?i(S,t,x)?(--x,r(),f=u):"\n"==t.charAt(x)?a(w):v+=t.charAt(x):f==u?(x+=S.length-1,g=b[t.charAt(x+1)],p=g?t.charAt(x+1):"_v","="==p?(x=c(t,x),f=h):(g&&x++,f=d),w=x):i(E,t,x)?(y.push({tag:p,n:n(v),otag:S,ctag:E,i:"/"==p?w-E.length:x+S.length}),v="",x+=E.length-1,f=h,"{"==p&&("}}"==E?x++:e(y[y.length-1]))):v+=t.charAt(x);return a(w,!0),y},t.generate=function(e,n,i){var o='var _=this;_.b(i=i||"");'+l(e)+"return _.fl();";return i.asString?"function(c,p,i){"+o+";}":new t.Template(new Function("c","p","i",o),n,t,i)},t.parse=function(t,e,n){return n=n||{},o(t,"",[],n.sectionTags||[])},t.cache={},t.compile=function(t,e){e=e||{};var n=t+"||"+!!e.asString,i=this.cache[n];return i?i:(i=this.generate(this.parse(this.scan(t,e.delimiters),t,e),t,e),this.cache[n]=i)}}(Hogan),function(){var t=QApp.util,e=t.insertElement,n=t.builder;QApp.addPlugin(["hogan","engine.hogan"],{},function(i,o,r){o.global&&i.on("loadEnd",function(){var e,n=i.html;e=Hogan.compile(n,o.config||{}),i.html=e.render(t.extend({},o.global.data,i.param))}),i.renderData=function(t,r,s,a,c){var l,h,u,d,f,p=o[t];p&&(a=a||p.container,l=a?i.root.querySelector(a):i.root,l&&(c=c||p.appendType||"inner",h=Hogan.compile(p.template||"",s||p.options||{}),u=h.render(r||{}),"inner"===c?l.innerHTML=u:(d=n(u).children,f=d.shift(),e(l,f,c),d.reverse().forEach(function(t){e(f,t,"afterend")}))))}})}(),function(){var t=QApp.util,e={tag:"action-type",eventType:"tap"};QApp.addPlugin("delegated",e,function(e,n,i){e.on("loaded",function(){var i=e.delegatedEvent=t.delegatedEvent(e.root,[],n.tag);e.options.bindActions&&t.each(e.options.bindActions,function(o,r){var s=o.split(":"),a=s[0],c=s[1]||n.eventType;"string"==typeof r&&(r=e[r]),t.isFunction(r)&&i.add(a,c,function(t,n){return r.call(e,t,n)})}),e.bind=function(o,r,s){t.isFunction(r)&&(s=r,r=n.eventType),t.isFunction(s)&&i.add(o,r,function(t,n){return s.call(e,t,n)})},e.fireAction=i.fireAction}),e.on("destroy",function(){e.delegatedEvent&&t.isFunction(e.delegatedEvent.destroy)&&e.delegatedEvent.destroy(),e.delegatedEvent=null,e.bind=null})})}(),function(t,e,n){function i(t,n){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var i in n)this.options[i]=n[i];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,n,i){var o=e.createElement("div"),r=e.createElement("div");return i===!0&&(o.style.cssText="position:absolute;z-index:9999",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),r.className="iScrollIndicator","h"==t?(i===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",r.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(i===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",r.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",n||(o.style.pointerEvents="none"),o.appendChild(r),o}function r(n,i){this.wrapper="string"==typeof i.el?e.querySelector(i.el):i.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=n,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in i)this.options[o]=i[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(t,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(t,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[a.style.transform]=this.scroller.translateZ,this.wrapperStyle[a.style.transitionDuration]=a.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var s=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},a=function(){function i(t){return s===!1?!1:""===s?t:s+t.charAt(0).toUpperCase()+t.substr(1)}var o={},r=e.createElement("div").style,s=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],n=0,i=e.length;i>n;n++)if(t=e[n]+"ransform",t in r)return e[n].substr(0,e[n].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(t,e){for(var n in e)t[n]=e[n]},o.addEvent=function(t,e,n,i){t.addEventListener(e,n,!!i)},o.removeEvent=function(t,e,n,i){t.removeEventListener(e,n,!!i)},o.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},o.momentum=function(t,e,i,o,r,s){var a,c,l=t-e,h=n.abs(l)/i;return s=void 0===s?6e-4:s,a=t+h*h/(2*s)*(0>l?-1:1),c=h/s,o>a?(a=r?o-r/2.5*(h/8):o,l=n.abs(a-t),c=l/h):a>0&&(a=r?r/2.5*(h/8):0,l=n.abs(t)+a,c=l/h),{destination:n.round(a),duration:c}};var a=i("transform");return o.extend(o,{hasTransform:a!==!1,hasPerspective:i("perspective")in r,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:i("transition")in r}),o.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),o.extend(o.style={},{transform:a,transitionTimingFunction:i("transitionTimingFunction"),transitionDuration:i("transitionDuration"),transitionDelay:i("transitionDelay"),transformOrigin:i("transformOrigin")}),o.hasClass=function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)");return n.test(t.className)},o.addClass=function(t,e){if(!o.hasClass(t,e)){var n=t.className.split(" ");n.push(e),t.className=n.join(" ")}},o.removeClass=function(t,e){if(o.hasClass(t,e)){var n=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(n," ")}},o.offset=function(t){for(var e=-t.offsetLeft,n=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,n-=t.offsetTop;return{left:e,top:n}},o.preventDefaultException=function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return n.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,i=.4;return 0===t?0:1==t?1:i*n.pow(2,-10*t)*n.sin((t-e/4)*(2*n.PI)/e)+1}}}),o.tap=function(t,n){var i=e.createEvent("Event");i.initEvent(n,!0,!0),i.pageX=t.pageX,i.pageY=t.pageY,t.target.dispatchEvent(i)},o.click=function(t){var n,i=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(n=e.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,t.view,1,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),n._constructed=!0,i.dispatchEvent(n))},o.sniff=function(){var t={isAndroid:!1,osVersionN:0};if(QApp&&QApp.sniff){var e=QApp.sniff;t.isAndroid=e.android,t.osVersionN=e.osVersionN}return t}(),o}();i.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==a.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||a.eventType[t.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,i=t.touches?t.touches[0]:t;this.initiated=a.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(n.round(e.x),n.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault?t.preventDefault():a.sniff.isAndroid&&a.sniff.osVersionN<5&&t.preventDefault();var e,i,o,r,s=t.touches?t.touches[0]:t,c=s.pageX-this.pointX,l=s.pageY-this.pointY,h=a.getTime();if(this.pointX=s.pageX,this.pointY=s.pageY,this.distX+=c,this.distY+=l,o=n.abs(this.distX),r=n.abs(this.distY),!(h-this.endTime>300&&10>o&&10>r)){if(this.directionLocked||this.options.freeScroll||(o>r+this.options.directionLockThreshold?this.directionLocked="h":r>=o+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}c=this.hasHorizontalScroll?c:0,l=this.hasVerticalScroll?l:0,e=this.x+c,i=this.y+l,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+c/3:e>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+l/3:i>0?0:this.maxScrollY),this.directionX=c>0?-1:0>c?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,i),h-this.startTime>300&&(this.startTime=h,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,i,o=(t.changedTouches?t.changedTouches[0]:t,a.getTime()-this.startTime),r=n.round(this.x),s=n.round(this.y),c=n.abs(r-this.startX),l=n.abs(s-this.startY),h=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(r,s),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>o&&100>c&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>o&&(e=this.hasHorizontalScroll?a.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:r,duration:0},i=this.hasVerticalScroll?a.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:s,duration:0},r=e.destination,s=i.destination,h=n.max(e.duration,i.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(r,s);this.currentPage=d,h=this.options.snapSpeed||n.max(n.max(n.min(n.abs(r-d.x),1e3),n.min(n.abs(s-d.y),1e3)),300),r=d.x,s=d.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}return r!=this.x||s!=this.y?((r>0||r<this.maxScrollX||s>0||s<this.maxScrollY)&&(u=a.ease.quadratic),void this.scrollTo(r,s,h,u)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,n=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),e==this.x&&n==this.y?!1:(this.scrollTo(e,n,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var n=this._events[t].indexOf(e);n>-1&&this._events[t].splice(n,1)}},_execEvent:function(t){if(this._events[t]){var e=0,n=this._events[t].length;if(n)for(;n>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,n,i){t=this.x+t,e=this.y+e,n=n||0,this.scrollTo(t,e,n,i)},scrollTo:function(t,e,n,i){i=i||a.ease.circular,this.isInTransition=this.options.useTransition&&n>0,!n||this.options.useTransition&&i.style?(this._transitionTimingFunction(i.style),this._transitionTime(n),this._translate(t,e)):this._animate(t,e,n,i.fn)},scrollToElement:function(t,e,i,o,r){if(t=t.nodeType?t:this.scroller.querySelector(t)){var s=a.offset(t);s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,i===!0&&(i=n.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=n.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=i||0,s.top-=o||0,s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top,e=void 0===e||null===e||"auto"===e?n.max(n.abs(this.x-s.left),n.abs(this.y-s.top)):e,this.scrollTo(s.left,s.top,e,r)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.scrollerStyle[a.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[a.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=n.round(t),e=n.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(e){var n=e?a.removeEvent:a.addEvent,i=this.options.bindToWrapper?this.wrapper:t;n(t,"orientationchange",this),n(t,"resize",this),this.options.click&&n(this.wrapper,"click",this,!0),this.options.disableMouse||(n(this.wrapper,"mousedown",this),n(i,"mousemove",this),n(i,"mousecancel",this),n(i,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(n(this.wrapper,a.prefixPointerEvent("pointerdown"),this),n(i,a.prefixPointerEvent("pointermove"),this),n(i,a.prefixPointerEvent("pointercancel"),this),n(i,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(n(this.wrapper,"touchstart",this),n(i,"touchmove",this),n(i,"touchcancel",this),n(i,"touchend",this)),n(this.scroller,"transitionend",this),n(this.scroller,"webkitTransitionEnd",this),n(this.scroller,"oTransitionEnd",this),n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,n,i=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(i=i[a.style.transform].split(")")[0].split(", "),e=+(i[12]||i[4]),n=+(i[13]||i[5])):(e=+i.left.replace(/[^-\d.]/g,""),n=+i.top.replace(/[^-\d.]/g,"")),{x:e,y:n}},_initIndicators:function(){function t(t){for(var e=a.indicators.length;e--;)t.call(a.indicators[e])}var e,n=this.options.interactiveScrollbars,i="string"!=typeof this.options.scrollbars,s=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:o("v",n,this.options.scrollbars),interactive:n,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),s.push(e)),this.options.scrollX&&(e={el:o("h",n,this.options.scrollbars),interactive:n,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),s.push(e))),this.options.indicators&&(s=s.concat(this.options.indicators));for(var c=s.length;c--;)this.indicators.push(new r(this,s[c]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,i,o,r,s=this;if(void 0===this.wheelTimeout&&s._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){s._execEvent("scrollEnd"),s.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,i=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,
i=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=i,i=0),this.options.snap)return o=this.currentPage.pageX,r=this.currentPage.pageY,e>0?o--:0>e&&o++,i>0?r--:0>i&&r++,void this.goToPage(o,r);o=this.x+n.round(this.hasHorizontalScroll?e:0),r=this.y+n.round(this.hasVerticalScroll?i:0),o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),r>0?r=0:r<this.maxScrollY&&(r=this.maxScrollY),this.scrollTo(o,r,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,o,r,s,a=0,c=0,l=0,h=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(i=n.round(h/2),o=n.round(u/2);l>-this.scrollerWidth;){for(this.pages[a]=[],t=0,r=0;r>-this.scrollerHeight;)this.pages[a][t]={x:n.max(l,this.maxScrollX),y:n.max(r,this.maxScrollY),width:h,height:u,cx:l-i,cy:r-o},r-=u,t++;l-=h,a++}else for(s=this.options.snap,t=s.length,e=-1;t>a;a++)(0===a||s[a].offsetLeft<=s[a-1].offsetLeft)&&(c=0,e++),this.pages[c]||(this.pages[c]=[]),l=n.max(-s[a].offsetLeft,this.maxScrollX),r=n.max(-s[a].offsetTop,this.maxScrollY),i=l-n.round(s[a].offsetWidth/2),o=r-n.round(s[a].offsetHeight/2),this.pages[c][e]={x:l,y:r,width:s[a].offsetWidth,height:s[a].offsetHeight,cx:i,cy:o},l>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.x-this.startX),1e3),n.min(n.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,o=this.pages.length,r=0;if(n.abs(t-this.absStartX)<this.snapThresholdX&&n.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);o>i;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(o=this.pages[i].length;o>r;r++)if(e>=this.pages[0][r].cy){e=this.pages[0][r].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),r==this.currentPage.pageY&&(r+=this.directionY,0>r?r=0:r>=this.pages[0].length&&(r=this.pages[0].length-1),e=this.pages[0][r].y),{x:t,y:e,pageX:i,pageY:r}},goToPage:function(t,e,i,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var r=this.pages[t][e].x,s=this.pages[t][e].y;i=void 0===i?this.options.snapSpeed||n.max(n.max(n.min(n.abs(r-this.x),1e3),n.min(n.abs(s-this.y),1e3)),300):i,this.currentPage={x:r,y:s,pageX:t,pageY:e},this.scrollTo(r,s,i,o)},next:function(t,e){var n=this.currentPage.pageX,i=this.currentPage.pageY;n++,n>=this.pages.length&&this.hasVerticalScroll&&(n=0,i++),this.goToPage(n,i,t,e)},prev:function(t,e){var n=this.currentPage.pageX,i=this.currentPage.pageY;n--,0>n&&this.hasVerticalScroll&&(n=0,i--),this.goToPage(n,i,t,e)},_initKeys:function(e){var n,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(n in this.options.keyBindings)"string"==typeof this.options.keyBindings[n]&&(this.options.keyBindings[n]=this.options.keyBindings[n].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(n in i)this.options.keyBindings[n]=this.options.keyBindings[n]||i[n];a.addEvent(t,"keydown",this),this.on("destroy",function(){a.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var e,i=this.options.snap,o=i?this.currentPage.pageX:this.x,r=i?this.currentPage.pageY:this.y,s=a.getTime(),c=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(n.round(e.x),n.round(e.y)),this.isInTransition=!1),this.keyAcceleration=200>s-c?n.min(this.keyAcceleration+l,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=i?1:this.wrapperWidth:r+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=i?1:this.wrapperWidth:r-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX,r=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,r=0;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:r+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:r-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(o,r);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollY&&(r=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,r,0),this.keyTime=s}},_animate:function(t,e,n,i){function o(){var d,f,p,g=a.getTime();return g>=u?(r.isAnimating=!1,r._translate(t,e),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(g=(g-h)/n,p=i(g),d=(t-c)*p+c,f=(e-l)*p+l,r._translate(d,f),r.isAnimating&&s(o),void(3==r.options.probeType&&r._execEvent("scroll")))}var r=this,c=this.x,l=this.y,h=a.getTime(),u=h+n;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},r.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),a.removeEvent(t,"touchend",this),a.removeEvent(t,a.prefixPointerEvent("pointerup"),this),a.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var n=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=n.pageX,this.lastPointY=n.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(t,"touchmove",this),this.options.disablePointer||a.addEvent(t,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e,n,i,o,r=t.touches?t.touches[0]:t,s=a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=r.pageX-this.lastPointX,this.lastPointX=r.pageX,n=r.pageY-this.lastPointY,this.lastPointY=r.pageY,i=this.x+e,o=this.y+n,this._pos(i,o),1==this.scroller.options.probeType&&s-this.startTime>300?(this.startTime=s,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.scroller.x-i.x),1e3),n.min(n.abs(this.scroller.y-i.y),1e3)),300);this.scroller.x==i.x&&this.scroller.y==i.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.indicatorStyle[a.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[a.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&n.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&n.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=n.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=n.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=n.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=n.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>e?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?n.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?n.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=t?250:500,i=t?0:300;t=t?"1":"0",this.wrapperStyle[a.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),i)}}},i.utils=a,"undefined"!=typeof module&&module.exports&&(module.exports=i),t.IScroll=i}(window,document,Math),function(){function t(t,a){function c(t,e){var n="translate3d("+t*A.column.width+"px, "+e*A.row.height+"px, 0)";return{transform:n,"-webkit-transform":n}}function l(t,n,i,o){var r=0,s=A.column.num-1,a=0,l=A.row.num-1,h=!1,u=!1,d=[],p=null;t>0?t=0:t<_.maxScrollX&&(t=_.maxScrollX),r=parseInt(Math.abs(t)/A.column.width),s=r+A.column.num-1,O.column!==r&&(O.column=r,h=!0),n>0?n=0:n<_.maxScrollY+z&&(n=_.maxScrollY+z),a=parseInt(Math.abs(n)/A.row.height),l=a+A.row.num-1,O.row!==a&&(O.row=a,u=!0),(h||u)&&(p=f(),X.forEach(function(t){var e=!1,n=t.column,i=t.row;if(r>n&&n+A.column.num<A.column.total){do n+=A.column.num;while(r>n);n<A.column.total&&(e=!0)}else if(n>s&&n-A.column.num>-1){e=!0;do n-=A.column.num;while(n>s)}if(a>i&&i+A.row.num<A.row.total){do i+=A.row.num;while(a>i);i<A.row.total&&(e=!0)}else if(i>l&&i-A.row.num>-1){e=!0;do i-=A.row.num;while(i>l)}e&&(d.push({type:"change",el:t.node,from:{column:t.column,row:t.row},to:{column:n,row:i}}),A.dataFilter("remove",t.node,t.column,t.row,p),t.column=n,t.row=i,A.dataFilter("add",t.node,n,i,p))}),A.builderNodes&&d.forEach(function(t){e.css(t.el,c(t.to.column,t.to.row))}),A.changeFilter(d,p))}function h(t){var e=Math.abs(t),n=parseInt(e/A.column.width),i=-(e%A.column.width>A.column.width/2?n+1:n)*A.column.width;return{move:i!==t,x:i}}function u(t){var e=Math.abs(t),n=parseInt(e/A.row.height),i=-(e%A.row.height>A.row.height/2?n+1:n)*A.row.height;return{move:i!==t,y:i}}function d(){var t=h(_.x),e=u(_.y);(t.move||e.move)&&(Y&&Y.scrollTo(t.x,0,300,IScroll.utils.ease.circular),H&&H.scrollTo(0,e.y,300,IScroll.utils.ease.circular),_.scrollTo(t.x,e.y,300,IScroll.utils.ease.circular))}function f(){return[O.column,O.row,O.column+A.column.num-1,O.row+A.row.num-1]}function p(t,e){return t>=O.column&&t<O.column+A.column.num-1&&e>=O.row&&e<O.row+A.row.num-1}function g(){var t=[],n=f();for(A.builderNodes&&X.forEach(function(t){e.removeNode(t.node)}),X=[],S=0;S<A.column.num;S++)for(E=0;E<A.row.num;E++)A.builderNodes&&(k=e.builder(A.template).children[0],e.css(k,c(S,E)),C.appendChild(k)),X.push({column:S,row:E,node:k}),A.dataFilter("add",k||null,S,E,n),t.push({type:"create",el:k||null,from:{},to:{column:S,row:E}});A.changeFilter(t,n),P.trigger("ready")}function m(t,e,n,i){N?t<A.moreDis&&t>_.maxScrollX-A.moreDis&&(N=!1):t>=A.moreDis?(N=!0,P.trigger("more",{axis:"x",seq:"prev"})):t<=_.maxScrollX-A.moreDis&&(N=!0,P.trigger("more",{axis:"x",seq:"next"})),D?e<A.moreDis&&e>_.maxScrollY-A.moreDis&&(D=!1):e>=A.moreDis?(D=!0,P.trigger("more",{axis:"y",seq:"prev"})):e<=_.maxScrollY-A.moreDis&&(D=!0,P.trigger("more",{axis:"y",seq:"next"}))}var v,y,w,x,b,T,S,E,k,_=null,P=function(){var t=function(){};return e.extend(t.prototype,e.CustEvent),new t}(),O={column:0,row:0},A=e.extend({},s,a),C=t&&t.children[0],X=[],Y=A.bindScrolls.x||null,H=A.bindScrolls.y||null,N=!1,D=!1,M=!1,L=!1,z=0;if(!C)throw"Dom Structure Error!";return A.scrollOpt=e.extend({},i,A.scrollOpt),A.scrollOpt.scrollX&&A.column?(M=!0,A.column.num=A.column.num||parseInt(e.size(t).width/A.column.width)+2,e.css(C,"width",Math.max(A.column.total*A.column.width,e.size(C.parentNode).width+1)+"px")):A.column={num:1,total:1,width:1},A.scrollOpt.scrollY&&A.row?(L=!0,A.row.num=A.row.num||parseInt(e.size(t).height/A.row.height)+2,e.css(C,"height",Math.max(A.row.total*A.row.height,e.size(C.parentNode).height+1)+"px")):A.row={num:1,total:1,height:1},_=new n(t,A.scrollOpt),(M||L)&&(_.on("scroll",function(){l(_.x,_.y,_.directionX,_.directionY)}),_.on("scrollEnd",function(){Y&&_.x<=0&&_.x>=_.maxScrollX&&Y.scrollTo(_.x,0),H&&_.y<=0&&_.y>=_.maxScrollY&&H.scrollTo(0,_.y)}),e.delay(g)),_.on("scroll",function(){m(_.x,_.y,_.directionX,_.directionY)}),_.on("scrollEnd",function(){Y&&_.x<=0&&_.x>=_.maxScrollX&&Y.scrollTo(_.x,0),H&&_.y<=0&&_.y>=_.maxScrollY&&H.scrollTo(0,_.y)}),Y&&(_.on("scroll",function(){_.x<=0&&_.x>=_.maxScrollX&&Y.scrollTo(_.x,0)}),Y.on("scroll",function(){Y.x<=0&&Y.x>=Y.maxScrollX&&Y.x>=_.maxScrollX&&(_.scrollTo(Y.x,_.y),l(Y.x,_.y,Y.directionX,0))})),H&&(_.on("scroll",function(){_.y<=0&&_.y>=_.maxScrollY&&H.scrollTo(0,_.y)}),H.on("scroll",function(){H.y<=0&&H.y>=H.maxScrollY&&H.y>=_.maxScrollY&&(_.scrollTo(_.x,H.y),l(_.x,H.y,0,H.directionY))})),A.topOffsetRefresh&&(A.topOffsetRefresh===!0&&(A.topOffsetRefresh={}),e.extend(!0,A.topOffsetRefresh,o),v=document.createElement("div"),w="drag",e.css(v,{position:"absolute",height:A.topOffsetRefresh.distance+"px",width:"100%",top:-A.topOffsetRefresh.distance+"px"}),v.innerHTML=A.topOffsetRefresh.dragContent,b=function(){"waitEnd"===w&&(w="startRefresh",v.innerHTML=A.topOffsetRefresh.loadContent,e.css(C,{marginTop:A.topOffsetRefresh.distance+"px"}),_.scrollTo(_.x,_.y-A.topOffsetRefresh.distance,0),A.refresh("top"))},C.addEventListener("touchend",b,!1),_.on("scroll",function(){"drag"===w&&_.y>A.topOffsetRefresh.distance&&(w="waitEnd",v.innerHTML=A.topOffsetRefresh.endContent),"waitEnd"===w&&_.y<=A.topOffsetRefresh.distance&&(w="drag",v.innerHTML=A.topOffsetRefresh.dragContent)}),e.delay(function(){e.insertElement(C,v,"beforeend")},100)),A.bottomOffsetRefresh&&(A.bottomOffsetRefresh===!0&&(A.bottomOffsetRefresh={}),e.extend(!0,A.bottomOffsetRefresh,r),y=document.createElement("div"),x=A.row.total*A.row.height<e.size(C.parentNode).height+1?"none":"drag",e.css(y,{position:"absolute",height:A.bottomOffsetRefresh.distance+"px",width:"100%",bottom:-A.bottomOffsetRefresh.distance+"px"}),y.innerHTML="",T=function(){"waitEnd"===x&&(x="startRefresh",z=A.bottomOffsetRefresh.distance,y.innerHTML=A.bottomOffsetRefresh.loadContent,e.css(C,{height:e.size(C).height+z+"px"}),e.css(y,{bottom:0}),_.refresh(),A.refresh("bottom"))},C.addEventListener("touchend",T,!1),_.on("scroll",function(){"drag"===x&&_.y<_.maxScrollY-A.bottomOffsetRefresh.distance&&(x="waitEnd"),"waitEnd"===x&&_.y>=_.maxScrollY-A.bottomOffsetRefresh.distance&&(x="drag")}),e.delay(function(){e.insertElement(C,y,"beforeend")},100)),P.trigger("init"),e.extend(P,{scroll:_,refresh:function(){_.refresh()},scrollTo:function(){_.scrollTo.apply(_,e.makeArray(arguments))},gotoTop:function(t,n){n=parseInt(n)||300,t&&A.topOffsetRefresh&&"startRefresh"!==w&&(w="startRefresh",v.innerHTML=A.topOffsetRefresh.loadContent,e.css(C,{marginTop:A.topOffsetRefresh.distance+"px"}),e.delay(function(){A.refresh("top")},n)),_.scrollTo(_.x,0,n)},setTopRefresh:function(t){A.topOffsetRefresh&&(v.innerHTML=A.topOffsetRefresh[t?"successContent":"failContent"],e.delay(function(){e.animate(C,{marginTop:"0"},50,"ease-out"),e.delay(function(){w="drag",v.innerHTML=A.topOffsetRefresh.dragContent},80)},A.topOffsetRefresh.displayDelay),A.bottomOffsetRefresh&&t&&(x=A.row.total*A.row.height<e.size(C.parentNode).height+1?"none":"drag",y.innerHTML=""))},setBottomRefresh:function(t,n){if(A.bottomOffsetRefresh){var i=t?"":A.bottomOffsetRefresh.failContent;x="drag",n&&(x="end",i=A.bottomOffsetRefresh.endContent),y.innerHTML=i,n||!t&&A.bottomOffsetRefresh.failContent?(e.delay(function(){_.scrollTo(_.x,_.y+z,A.bottomOffsetRefresh.displayDelay/2)},A.bottomOffsetRefresh.displayDelay/2),e.delay(function(){e.css(C,{height:e.size(C).height-z+"px"}),e.css(y,{bottom:-z+"px"}),z=0,_.refresh()},A.bottomOffsetRefresh.displayDelay)):t?(e.css(C,{height:e.size(C).height-z+"px"}),e.css(y,{bottom:-z+"px"}),z=0,_.refresh(),e.delay(function(){_.scrollTo(_.x,_.y-2*A.bottomOffsetRefresh.distance,500)})):(e.css(C,{height:e.size(C).height-z+"px"}),e.css(y,{bottom:-z+"px"}),z=0,_.refresh())}},fixPosition:function(){e.delay(d)},appendNode:function(t,n,i){t&&C&&(e.css(t,c(n,i)),e.contains(C,t)||C.appendChild(t))},getShowArea:f,checkShow:function(t){return t.some(function(t){return p(t[0],t[1])})},resetNum:function(t,e){A.column.num=t,A.row.num=e,g()},resetTotal:function(t,n,i,o){A.column.total=t,A.row.total=n,A.scrollOpt.scrollX&&e.css(C,"width",Math.max(A.column.total*A.column.width,e.size(C.parentNode).width+1)+"px"),A.scrollOpt.scrollY&&e.css(C,"height",Math.max(A.row.total*A.row.height,e.size(C.parentNode).height+1)+"px"),A.bottomOffsetRefresh&&(x=A.row.total*A.row.height<e.size(C.parentNode).height+1?"none":"drag",y.innerHTML=""),e.delay(function(){_.refresh(),l(_.x,_.y,i||0,o||0)})},destroy:function(){P.off(),_.destroy(),_=null,A.topOffsetRefresh&&e.removeEvent(C,b),A.bottomOffsetRefresh&&e.removeEvent(C,T),A=null,C=null,H&&H.destroy(),H=null,Y&&Y.destroy(),Y=null,X.forEach(function(t){t.node&&(e.removeNode(t.node),t.node=null)}),X.length=0,X=null}})}var e=QApp.util,n=e.iScroll=window.IScroll,i={scrollX:!1,scrollY:!0,freeScroll:!1,mouseWheel:!1,probeType:3,preventDefault:!1},o={distance:50,displayDelay:1e3,dragContent:"drag to refresh",endContent:"stop to refresh",loadContent:"loading",successContent:"success",failContent:"failure"},r={distance:50,displayDelay:1e3,loadContent:"loading",endContent:"end",failContent:""},s={builderNodes:!0,template:'<div class="item"></div>',moreDis:50,bindScrolls:{},scrollOpt:{},dataFilter:e.noop,changeFilter:e.noop,refresh:e.noop,topOffsetRefresh:!1,bottomOffsetResfresh:!1};t.iScroll=n,t.setTopRefreshOpt=function(t){e.extend(!0,o,t)},t.setBottomRefreshOpt=function(t){e.extend(!0,r,t)},window.NScroll=QApp.util.nScroll=t}(),function(){function t(t){return JSON.parse(JSON.stringify(t.$model))}function e(t,n){"array"===r.type(t)?(n=r.mix(!0,{},{_:n}),t={_:t}):n=r.mix(!0,{},n);for(var i in t)if("undefined"!=typeof n[i]&&t.hasOwnProperty(i)&&"hasOwnProperty"!==i)switch(r.type(t[i])){case"object":e(t[i],n[i]);break;case"array":for(r.each(n[i],function(n,o){var r=typeof t[i][n];"object"===r&&null!==t[i][n]?e(t[i][n],o):n>=t[i].size()?t[i].push(o):t[i].set(n,o)});t[i].length>n[i].length;)t[i].pop();break;default:t[i]=n[i]}}function n(t,e){return((t.hasAttributes()?r.slice(t.attributes):[]).filter(function(t){return!t.name.indexOf(e)})[0]||{}).name}function i(t,e,n){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),r.mix(i,n),t.dispatchEvent(i)}function o(t,e){c.forEach(function(n){e.on(n,function(){i(t,n.toLowerCase())})})}var r=window.avalon||QApp.avalon,s=QApp.util.nScroll,a={showLines:10,lineHeight:0,getData:function(){}},c=["beforeScrollStart","scrollCancel","scrollStart","scroll","scrollEnd","flick","zoomStart","zoomEnd"],l=100;r&&(r.bindingHandlers.iscroll=function(c,h){var u,d,f=c.element,p=c.value.match(/[^, ]+/g),g=h[0],m=r.mix({},a,g.iscroll,f.dataset,p&&p[1]?g[p[1]]:null),v=m.id||p&&"$"!==p[0]&&p[0]||"iscroll"+setTimeout("1"),y=f.children[0],w=f.children[0]&&f.children[0].children[0],x=y&&n(y,"ms-each"),b=w&&n(w,"ms-repeat");if(g.scrolls=g.scrolls||{},f.removeAttribute("ms-iscroll"),x||b){var T,S,E,k=[],_=0;x?(T=y.getAttribute(x),y.setAttribute(x,T+"$")):b&&(T=w.getAttribute(b),w.setAttribute(b,T+"$")),S=T+"$",g.$watch(T,function(){var n,r=g[T],a=g[S],c=a.length;if(_=r.size()>=m.showLines?m.showLines:r.size(),u){for(a.forEach(function(t){t.$unwatch()}),n=0;_>n;n++)n>=c&&(a[n]?a.set(n,t(r[n])):(a.push(t(r[n])),u.appendNode(f.children[0].children[n],1,n)),a[n].$watch("$all",function(t){return function(e,n){r[t][e]=n}}(n)),r[n].$watch("$all",function(t){return function(e,n){a[t][e]=n}}(n)));for(n=_;c>n;n++)a.removeAt(_);k=d.children,u.resetNum(1,_),u.resetTotal(1,r.size()),u.scrollTo(0,0,0)}else{if(a.pushArray(JSON.parse(JSON.stringify(g.$model[T].slice(0,_)))),d=f.children[0],k=d.children,m.lineHeight=m.lineHeight||k[0]&&k[0].offsetHeight,!m.lineHeight)throw"Can not know line height!";u=g.scrolls[v]=s(f,{builderNodes:!1,row:{height:m.lineHeight,num:_,total:r.size()},scrollOpt:m,topOffsetRefresh:m.topOffsetRefresh,bottomOffsetRefresh:m.bottomOffsetRefresh,refresh:function(t){"function"==typeof m.refresh?m.refresh.call(u,t):"string"==typeof m.refresh&&"function"==typeof g[m.refresh]?g[m.refresh].call(u,t):i(f,"refresh",{type:t})},dataFilter:function(n,i,o,s){var c=s%_;_&&("add"===n?(u.appendNode(k[c],o,s),e(a[c],t(r[s])),a[c].$watch("$all",function(t,e){r[s][t]=e}),r[s].$watch("$all",function(t,e){a[c][t]=e})):(r[s].$unwatch(),a[c].$unwatch()))}}),u.on("more",function(t){"y"===t.axis&&"next"===t.seq&&("function"==typeof m.getData?m.getData.call(u,r.length):"string"==typeof m.getData&&"function"==typeof g[m.getData]?g[m.getData].call(u,r.length):i(f,"getdata",{start:r.length}))}),o(f,u.scroll)}}),g[T].$watch("length",function(t){E&&clearTimeout(E),E=setTimeout(function(){u&&u.resetTotal(0,g[T].size(),0,1)},l)})}else u=g.scrolls[v]=s(f,m),o(f,u),g.$watch("$all",function(){E&&clearTimeout(E),E=setTimeout(function(){u&&u.refresh()},l)});g.$remove=function(){u&&(u.destroy(),u=null)}})}(),function(){var t=QApp.util,e=t.iScroll,n=300,i="qapp-scroll",o={preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)$/}};QApp.addPlugin(["scroll","ui.scroll"],o,function(o,r,s){function a(){c&&clearTimeout(c),c=t.delay(function(){l&&l.refresh()},n)}var c,l;return o.on("ready",function(){var n=document.createElement(i);t.appendNodes(n,o.nodes),o.root.appendChild(n),l=o.scroll=new e(o.root,r),o.root.addEventListener("DOMSubtreeModified",function(){a()},!1),o.refreshScroll=a,t.delay(a)}),o.on("destroy",function(){c&&clearTimeout(c),l&&l.destroy()}),{}})}(),function(){var t=QApp.util,e=t.iScroll,n=300,i={scrollX:!1,scrollY:!0,freeScroll:!1,mouseWheel:!1,probeType:3,preventDefault:!1};QApp.addWidget("scroll",function(o,r,s){if(e){var a,c={},l=function(){a&&clearTimeout(a),a=t.delay(function(){c&&c.refresh&&c.refresh()},n)};if(t.css(o,"overflow","hidden"),t.addEvent(o,"DOMSubtreeModified",function(){l()}),t.delay(l),s)if(s.isShow){var h=new e(o,t.extend({},i,r));t.each(s.widgets,function(t,e){e===c&&(s.widgets[t]=h)}),c=h}else{var u=s._events.show=s._events.show||[];u.unshift({callback:function(){var n=new e(o,t.extend({},i,r));t.each(s.widgets,function(t,e){e===c&&(s.widgets[t]=n)}),c=n},ctx:s})}else{var h=new e(o,t.extend({},i,r));c=h}return c}})}(),function(){function t(){var t=(e.router.getCurInfo()||{}).view.split(":")[0];if(t&&o.viewOptions[t]){var n=o.viewOptions[t].nav;n&&n.title&&(document.title=n.title.text)}}var e=window.QApp,n=e.util,i=e.sniff,o={indexView:"index",viewOptions:{},transferInApp:!0,useWechatHeader:!0,hdHeight:44};if(i.pc||i.webApp)i.webApp&&e.config({type:"app"});else{var r=!1;i.browsers.wechat&&e.config({type:"mobile",root:{top:o.useWechatHeader?function(){if(n.isNumber(o.hdHeight)){var t=parseInt(window.dpr)||1;return-t*o.hdHeight}return n.isFunction(o.hdHeight)?-o.hdHeight():0}():0}}),o.transferInApp&&e.router.on("willForward",function(t){return e.router.transfer(t.view,t.query),r||(window.addEventListener("pageshow",function(){e.router.resetHistory()},!0),r=!0),!1})}e.wx={config:function(r){return r&&(r.indexView=r.indexView||e.config().indexView,n.extend(!0,o,r),e.config({indexView:o.indexView})),i.browsers.wechat&&t(),o}}}();