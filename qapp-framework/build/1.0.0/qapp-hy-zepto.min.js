!function(){"use strict";function t(t,e){pt[t]=e()}function e(t){return pt[t]}function n(){}function i(t){var e,n=[];for(e in t)n.push(e);return n}function o(t,e){var n=qt[t===wt||t!==t?t:Ct.call(t)]||t&&t.nodeName||"#";return t===bt?n="Undefined":"#"===n.charAt(0)&&(n=t==t.document&&t.document!=t?"Window":9===t.nodeType?"Document":t.callee?"Arguments":isFinite(t.length)&&t.item?"NodeList":Ct.call(t).slice(8,-1)),e?e===n:n}function r(t){return o(t,"Object")}function s(t){return o(t,"Array")}function a(t){return o(t,"String")}function c(t){return o(t,"Function")}function l(t){return t&&1===t.nodeType?t instanceof Node?vt:_t.test(Ct.call(t)):yt}function u(t){return o(t,"Number")}function h(t){return o(t,"Object")&&Object.getPrototypeOf(t)===Et}function f(t){try{return"{}"===JSON.stringify(t)}catch(e){return FLASE}}function d(t,e,n){var i;for(i in e)n&&(h(e[i])||s(e[i]))?(h(e[i])&&!h(t[i])&&(t[i]={}),s(e[i])&&!s(t[i])&&(t[i]=[]),d(t[i],e[i],n)):e[i]!==bt&&(t[i]=e[i])}function p(t){var e,n=Ot.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t}function g(t,e){var n;for(n in t)e.call(t,n,t[n])}function m(t){if(!t)return yt;var e=t.length;if(e===e>>>0)try{return Ot.call(t)}catch(n){}return yt}function v(t,e){return gt.setTimeout(t,e||0)}function y(t,e){for(var n={},i=0;i<e.length;i++)n[e[i]]=t[i];return n}function w(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=t[e[i]];return n}function b(){return Xt++}function x(){return Ht++}function S(t){return t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})}function T(t){return t.replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/\_/g,"-").toLowerCase()}function E(t){var e;for(e in t)t[e]=wt}function k(t){return t===bt||t===wt}function C(t,e){return t=(t===wt?"":t).toString().trim(),e?encodeURIComponent(t):t}function O(t,e){var n,i,o,r=[];for(n in t)if(k(t[n]))r=r.concat(n);else if(s(t[n]))for(i=0,o=t[n].length;o>i;i++)c(t[n][i])||r.push(n+"="+C(t[n][i],e));else c(t[n])||t[n]===wt||t[n]===bt||r.push(n+"="+C(t[n],e));return r.join("&")}function P(t,e){return k(t)?t:e?decodeURIComponent(t):t}function _(t,e){for(var n=t.trim().split("&"),i={},o=0,r=n.length;r>o;o++)if(n[o]){var s=n[o].split("="),a=s[0],c=s[1];a in i?i[a]=[].concat(i[a],P(c,e)):i[a]=P(c,e)}return i}function A(t){var e,n=yt;return function(){return n?e:(n=vt,e=t.apply(this,arguments),t=wt,e)}}function N(){var t=function(){};return p(t.prototype,Wt),new t}function X(){function t(t,a,l){c(n)&&!o&&(o=vt,n(r)),c(t)&&("resolved"===i?t.apply(wt,e):"pending"===i&&s.add("resolve",t)),c(a)&&("rejected"===i?a.apply(wt,e):"pending"===i&&s.add("reject",a)),c(l)&&s.add("notify",l)}var e,n,i="pending",o=yt,r={},s=function(){var t={resolve:[],reject:[],notify:[]};return{add:function(e,n){t[e].push(n)},remove:function(e,n){var i=t[e].indexOf(n);i>-1&&t[e].splice(i,1)},clear:function(e){t[e].length=0},fire:function(e,n){t[e].forEach(function(t){t.apply(wt,n)})},destroy:function(){t.resolve.length=0,t.reject.length=0,t.notify.length=0}}}();return r.enabled=vt,r.all=function(e){return t(e,e),r},r.done=function(e){return t(e),r},r.fail=function(e){return t(wt,e),r},r.progress=function(e){return t(wt,wt,e),r},r.unProgress=function(t){return s.remove("notify",t),r},r.then=function(e,n,i){return t(e,n,i),r},r.resolve=function(){return"pending"===i&&(i="resolved",e=Ot.call(arguments),s.fire("resolve",e)),r},r.reject=function(){return"pending"===i&&(i="rejected",e=Ot.call(arguments),s.fire("reject",e)),r},r.notify=function(){return s.fire("notify",Ot.call(arguments)),r},r.state=function(){return i},r.startWith=function(t){return n=t,r},r.destroy=function(){r.enabled=yt,r.notify("destroy"),i=wt,e=wt,o=wt,n=wt,r.destroy=function(){},r=wt,s.destroy(),s=wt},r}function H(t,e,n){var i=new X,o=n?t:t.slice(0),r=[],s=-1,a=function(t){return(a=e&&e.length?function(t){return e[t]}:function(t){return t})(t)},l=function(){s++;var n=o.shift();if(n&&c(n.all))n.all(function(e){i.notify(a(s),e,t),r[s]=e,l()});else if(n)if(c(n)){var u=n(r[s-1],r);u&&c(u.all)?u.all(function(e){i.notify(a(s),e,t),r[s]=e,l()}):(i.notify(a(s),u,t),r[s]=u,l())}else i.notify(a(s),n,t),r[s]=n,l();else e&&e.length&&(r=y(r,e)),i.resolve.call(wt,r)};return i.startWith(l)}function D(t,e){var n=new X,i=t.slice(0),o=[],r=0,s=function(){r===i.length&&(e&&e.length&&(o=y(o,e)),n.resolve.call(wt,o))},a=function(){i.forEach(function(t,e){t&&c(t.all)?(o[e]=bt,t.all(function(t){o[e]=t,r++,s()})):(o[e]=t,r++)}),s()};return n.startWith(a)}function L(t){Pt.test(mt.readyState)&&mt.body?t():F(mt,"DOMContentLoaded",function(){t()},yt)}function Y(t){var e,n,i="div";return[["li","ul"],["tr","tbody"],["td","tr"],["th","tr"],["tbody","table"],["option","select"]].some(function(e){return 0===t.indexOf("<"+e[0])?(i=e[1],vt):void 0}),e=mt.createElement(i),e.innerHTML=t,n=m(e.children),e=mt.createDocumentFragment(),n.forEach(function(t){e.appendChild(t)}),{box:e,children:n}}function M(t,e){e=[].concat(e),e.forEach(function(e){t.appendChild(e)})}function I(t,e,n){switch(n=n?n.toLowerCase():"beforeend"){case"beforebegin":t.parentNode.insertBefore(e,t);break;case"afterbegin":t.insertBefore(e,t.firstChild);break;case"beforeend":t.appendChild(e);break;case"afterend":t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)}return e}function R(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function z(t,e,n){var i=n===yt||null===n||void 0===n,o=Lt[e];if("boolean"==typeof t[o]&&(t[o]=!!n,n||(i=vt)),i)return t.removeAttribute(e);var r=At.test(t)?yt:e in t.cloneNode(yt);r?t[e]=n:t.setAttribute(e,n)}function j(t,e){if(a(e)){if(!(arguments.length>2))return t.getAttribute(e);z(t,e,arguments[2])}else g(e,function(e,n){z(t,e,n)})}function q(t,e){if(t&&t.style)if(a(e)){if(!(arguments.length>2)){var n,i=gt.getComputedStyle(t,wt);return i&&(n=i[S(e)]),n}var o=arguments[2];Rt.test(e)?t.style[zt]=e+"("+o+")":(e=S(e),o||0===o?t.style[e]=o:t.style.removeProperty(e))}else{var r=[],s="";g(e,function(t,e){Rt.test(t)?s+=t+"("+e+") ":r.push(T(t)+":"+e)}),s.length&&r.push(T(zt)+":"+s),t.style.cssText+=";"+r.join(";")+";"}}function V(t,e){t&&t.style&&[].concat(e).forEach(function(e){t.style.removeProperty(e),t.style.removeProperty(jt+e)})}function W(t){if(t.target||(t.target=t.srcElement||document),3==t.target.nodeType&&(t.target=t.target.parentNode),t.pageX===wt&&t.clientX!==wt){var e=mt.documentElement,n=mt.body;t.pageX=t.clientX+(e.scrollLeft||n&&n.scrollLeft||0)-(e.clientLeft||n&&n.clientLeft||0),t.pageY=t.clientY+(e.scrollTop||n&&n.scrollTop||0)-(e.clientTop||n&&n.clientTop||0)}return t}function F(t,e,n,i){t.addEventListener(e,n,!!i)}function B(t,e,n){t.removeEventListener(e,n)}function $(t,e,n){var i=mt.createEvent("Events");i.initEvent(e,!0,!0),p(i,n),t.dispatchEvent(i)}function Q(t,e){t.className=(t.className+Nt+e).split(/\s+/).filter(function(t,e,n){return n.lastIndexOf(t)===e}).join(Nt)}function U(t,e){e=Nt+e.replace(/\s+/g,Nt)+Nt,t.className=t.className.split(/\s+/).filter(function(t){return-1===e.indexOf(Nt+t+Nt)}).join(Nt)}function Z(t){var e=mt.createElement("style");e.type="text/css",e.innerHTML=t,mt.querySelector("head").appendChild(e)}function J(t){var e;if(Tt.ios&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type){e=t.value.length;try{t.setSelectionRange(e,e)}catch(n){t.focus()}}else t.focus()}function G(t){var e=mt.activeElement;t=t||mt.body,e&&Ft(t,e)&&c(e.blur)&&e.blur()}function K(t){function e(e){var n=t.documentElement,i=t.body;return Math.max(i["scroll"+e],n["scroll"+e],i["offset"+e],n["offset"+e],n["client"+e])}return{width:e("Width"),height:e("Height")}}function tt(t){function e(e){return t.document.documentElement["client"+e]}return{width:e("Width"),height:e("Height")}}function et(t){var e,n=o(t);switch(n){case"Document":e=K(t);break;case"Window":e=tt(t);break;default:e={width:parseInt(q(t,"width"),10),height:parseInt(q(t,"height"),10)}}return e}function nt(t){var e=t.getBoundingClientRect(),n=t.ownerDocument.body,i=t.ownerDocument.documentElement,o=Math.max(gt.pageYOffset||0,i.scrollTop,n.scrollTop),r=Math.max(gt.pageXOffset||0,i.scrollLeft,n.scrollLeft),s=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0;return{left:e.left+r-a,top:e.top+o-s}}function it(t,e){return{left:t.left-e.left,top:t.top-e.top}}function ot(t){return Ft(t.ownerDocument.body,t)?arguments.length>1?it(nt(t),nt(arguments[1])):nt(t):{top:NaN,left:NaN}}function rt(t){var e={};if(t)if(t.dataset)p(e,t.dataset);else for(var n=t.attributes,i=0,o=n.length;o>i;i++){var r=n[i].name,s=n[i].value;0===r.indexOf("data-")&&(r=S(r.substring(5)),e[r]=s)}return e}function st(t,e,n){return c(t)?t.apply(e,m(n)||[]):void 0}function at(t,e,n){function i(n,i,r){function a(){var e=n,s=rt(e);return o[i]&&o[i][c]?o[i][c]({evt:r,el:e,box:t,data:s},s):vt}var c=wt;if($t(e,n))return yt;if(!Ft(t,n))return yt;for(;n&&n!==t&&(1!==n.nodeType||(c=n.getAttribute(s),!c||a()!==yt));)n=n.parentNode}e||(e=[]),e=[].concat(e);var o={},r=function(t){var e=t.target,n=t.type;i(e,n,t)},s=n||"action-type",a={};return a.add=function(e,n,i,s){o[n]||(o[n]={},F(t,n,r,!!s));var a=o[n];a[e]=i},a.remove=function(e,n){o[n]&&(delete o[n][e],f(o[n])&&(delete o[n],B(t,n,r)))},a.pushExcept=function(t){e.push(t)},a.removeExcept=function(t){if(t)for(var n=0,i=e.length;i>n;n+=1)e[n]===t&&e.splice(n,1);else e=[]},a.clearExcept=function(){e=[]},a.fireAction=function(e,n,i,r){var s={};r&&r.data&&(s=r.data),o[n]&&o[n][e]&&o[n][e]({evt:i,el:wt,box:t,data:s,fireFrom:"fireAction"},s)},a.fireInject=function(e,n,i){var r=e.getAttribute(s),a=rt(e);r&&o[n]&&o[n][r]&&o[n][r]({evt:i,el:e,box:t,data:a,fireFrom:"fireInject"},a)},a.fireDom=function(t,e,n){i(t,e,n||{})},a.destroy=function(){for(var e in o){for(var n in o[e])delete o[e][n];delete o[e],B(t,e,r)}},a}function ct(t,e){var n=y(Qt.exec(t)||[],Ut);return n.query=n.query?_(n.query.substring(1),e):{},n.hash=n.hash?_(n.hash.substring(1),e):{},n.getQuery=function(t){return n.query[t]},n.getHash=function(t){return n.hash[t]},n.setQuery=function(t,e){return e===bt?n.query[t]=wt:n.query[t]=e,n},n.setHash=function(t,e){return e===bt?n.hash[t]=wt:n.hash[t]=e,n},n.toUrl=function(t){var e=n.protocol+"://",i=O(n.query,t),o=O(n.hash,t);return n.protocol&&"file"===n.protocol.toLowerCase()&&(e+="/"),e+n.hostname+(n.port||"")+n.path+(n.name||"")+(i?"?"+i:"")+(o?"#"+o:"")},n}function lt(t,e,n){var i;Jt.insertBefore(t,Jt.firstChild),n&&(i=v(function(){t.onload=wt,R(t),e.reject({type:"Timeout"})},n)),t.onload=function(){i&&clearTimeout(i),t.onload=wt,t.onerror=wt,e.resolve()},t.onerror=function(){i&&clearTimeout(i),R(t),t.onload=wt,t.onerror=wt,e.reject({type:"Error"})}}function ut(t,e,n){var i=p({},Zt,n),o=Gt[t]&&Gt[t](e,i);return o&&(i.onComplete||i.onFail||i.onTimeout)&&o.then(i.onComplete,function(t){"Timeout"===t.type&&c(i.onTimeout)&&i.onTimeout(t),"Error"===t.type&&c(i.onFail)&&i.onFail(t)}),o}function ht(t,e){console[t].apply(console,["["+t.toUpperCase()+"]"].concat(m(e)))}function ft(t){ue.done(t)}var dt={version:"1.0.0"},pt=dt._packages={},gt=window,mt=document,vt=!0,yt=!1,wt=null,bt=void 0,xt={app:"qapp-app",view:"qapp-view",widget:"qapp-widget",role:"qapp-role"},St={type:"touch",indexView:"index",animate:vt,defaultAnimate:"moveEnter",autoInit:vt,hashRouter:vt,hashSupport:{all:vt,exist:[],except:[],usePath:yt},jsonParam:yt,customRoot:vt,preventMove:yt,appRoot:wt,screen:{rotate:yt,autoResize:vt},root:{top:0,right:0,bottom:0,left:0},logLevel:1},Tt=function(){var t={browsers:{},info:{}},e=navigator.userAgent,n=navigator.platform,i=e.match(/(Android);?[\s\/]+([\d.]+)?/),o=e.match(/(iPad).*OS\s([\d_]+)/),r=e.match(/(iPod)(.*OS\s([\d_]+))?/),s=e.match(/(iPhone\sOS)\s([\d_]+)/),a=-1==e.indexOf("Safari"),c={wechat:e.match(/(MicroMessenger)\/([\d\.]+)/),alipay:e.match(/(AlipayClient)\/([\d\.]+)/),qq:e.match(/(MQQBrowser)\/([\d\.]+)/),weibo:e.match(/(weibo__)([\d\.]+)/),uc:e.match(/(UCBrower)\/([\d\.]+)/),opera:e.match(/(Opera)\/([\d\.]+)/)};t.ios=t.android=t.iphone=t.ipad=t.ipod=!1,i&&(t.os="android",t.osVersion=i[2],t.android=!0),(o||s||r)&&(t.os="ios",t.ios=!0),s&&(t.osVersion=s[2].replace(/_/g,"."),t.iphone=!0,t.imobile=!0),o&&(t.osVersion=o[2].replace(/_/g,"."),t.ipad=!0),r&&(t.osVersion=r[3]?r[3].replace(/_/g,"."):null,t.ipod=!0,t.imobile=!0),t.ios&&t.osVersion&&e.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]),t.osVersion&&(t.osVersionN=parseInt(t.osVersion.match(/\d+\.?\d*/)[0])),t.pixelRatio=window.devicePixelRatio||1,t.retina=t.pixelRatio>=2;for(var l in c)c[l]?(a=!1,t.browsers[l]=c[l][2]):t.browsers[l]=!1;return t.webApp="ios"==t.os&&a,e.split(" ").forEach(function(e){var n=e.split("/");2==n.length&&(t.info[n[0]]=n[1])}),t.pc=0===n.indexOf("Mac")||0===n.indexOf("Win")||0===n.indexOf("linux")&&!t.android,t}(),Et=Object.prototype,kt=Array.prototype,Ct=Et.toString,Ot=kt.slice,Pt=/complete|loaded|interactive/,_t=/Element$/,At=/^\[object SVG\w*Element\]$/,Nt=" ",Xt=1,Ht=1e3,Dt="autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelected,contentEditable,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected",Lt={};Dt.replace(/\w+/g,function(t){Lt[t.toLowerCase()]=t});var Yt,Mt=["Webkit","","Moz","O"],It=mt.createElement("div"),Rt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,zt="",jt="";Mt.every(function(t){return It.style[t+"TransitionProperty"]!==bt?(t&&(jt="-"+t.toLowerCase()+"-"),Yt=t.toLowerCase(),yt):void 0}),It=wt,zt=jt+"transform";var qt={"[object HTMLDocument]":"Document","[object HTMLCollection]":"NodeList","[object StaticNodeList]":"NodeList","[object IXMLDOMNodeList]":"NodeList","[object DOMWindow]":"Window","[object global]":"Window","null":"Null",NaN:"NaN",undefined:"Undefined"};"Boolean,Number,String,Function,Array,Date,RegExp,Window,Document,Arguments,NodeList,Null,Undefined".replace(/\w+/gi,function(t){qt["[object "+t+"]"]=t});var Vt=function(t,e){for(var n,i=-1,o=t.length,r=1;++i<o&&r;)n=t[i],r&=n.callback.apply(n.ctx,e)!==!1;return!!r},Wt={on:function(t,e,n){this._events=this._events||{},this._events[t]=this._events[t]||[];var i=this._events[t];return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){var i=this,o=A(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){if(!this._events)return this;var o,r,s,a,c,l,u,h;if(!t&&!e&&!n)return this._events=bt,this;for(a=t?[t]:i(this._events),c=0,l=a.length;l>c;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=o=[],e||n)for(u=0,h=s.length;h>u;u++)r=s[u],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&o.push(r);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=Ot.call(arguments,1),n=this._events[t],i=this._events.all,o=1;return n&&(o&=Vt(n,e)),i&&o&&(o&=Vt(i,e)),!!o}},Ft=mt.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:function(t,e){return t!==e&&(t.contains?t.contains(e):vt)},Bt=function(){function t(t){var e=t.parentNode;e&&q(e,{"transform-style":"preserve-3d","backface-visibility":"hidden"})}function e(t){var e=t.parentNode;V(e,["transform-style","backface-visibility"])}var n,i,o,r,s=200,a=25,c="linear";return n=jt+"transition-property",i=jt+"transition-duration",r=jt+"transition-delay",o=jt+"transition-timing-function",function(l,u,h,f,d){function p(t){t&&t.target!==l||(B(l,y,p),E=vt,v(function(){x&&e(l),V(l,"transition"),S.resolve()}))}var m=arguments.length,y=Yt+"TransitionEnd",w={},b=[],x="";3>m&&(h=s),4>m&&(f=c),5>m&&(d=0),g(u,function(t,e){Rt.test(t)?x+=t+"("+e+") ":w[t]=e,b.push(T(t))}),x&&(w[zt]=x,b.push(zt)),h>0&&(w[n]=b.join(", "),w[i]=h/1e3+"s",w[r]=d/1e3+"s",w[o]=f);var S=new X,E=yt;return h>0&&(F(l,y,p,yt),v(function(){E||p()},h+d+2*a)),v(function(){x&&t(l),q(l,w),S.notify("start")},a),0>=h&&v(p),S}}(),$t=function(t,e){for(var n=0,i=t.length;i>n;n+=1)if(Ft(t[n],e))return vt;return yt},Qt=/(\w+):\/\/\/?([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(\?[^#]*)?(#.*)?/i,Ut=["url","protocol","hostname","port","path","name","query","hash"],Zt={charset:"UTF-8",timeout:3e4,onComplete:wt,onTimeout:wt,onFail:wt},Jt=mt.getElementsByTagName("head")[0],Gt={script:function(t,e){var n=new X,i=e.charset,o=e.timeout,r=mt.createElement("script");return r.type="text/javascript",r.charset=i,n.startWith(function(){n.notify("element",r),lt(r,n,o),r.src=t})},style:function(t,e){var n=new X,i=e.charset,o=e.timeout,r=mt.createElement("link");return r.type="text/css",r.charset=i,r.rel="stylesheet",n.startWith(function(){lt(r,n,o),r.href=t})},image:function(t,e){var n=new X,i=new Image,o=e.timeout,r=wt;return i.onload=function(){i.onload=wt,i.onerror=wt,r&&clearTimeout(r),n.resolve(i)},i.onerror=function(){i.onload=wt,i.onerror=wt,r&&clearTimeout(r),n.reject({type:"Error"})},o&&(r=v(function(){i.onload=wt,i.onerror=wt,r&&clearTimeout(r),n.reject({type:"Timeout"})},o)),n.startWith(function(){i.src=t})}},Kt="resize",te=N(),ee=function(t){return t.width>t.height?"landscape":"portrait"};te.get=function(){return ee(et(gt))},L(function(){var t=et(gt);gt.addEventListener(Kt,function(){var e=et(gt);t.width!==e.width&&t.height!==e.height&&(t=e,te.trigger("change",{type:Kt,width:e.width,height:e.height,orientation:ee(e)}))})});var ne=["info","debug","warn","error"];ne.forEach(function(t,e){ht[t]=function(){e>=St.logLevel&&ht(t,arguments)}});var ie=ct(location.href).query.logLevel;ie&&(St.logLevel=parseInt(ie)),t("fetchNode",function(){function t(t){t.resolve()}return function(e){var n=e.options;return(new X).startWith(function(i){n.html||c(n.fetch)?n.html?t(i):n.fetch.length?n.fetch.call(e,function(e){n.html=e||"",t(i)}):(n.html=n.fetch.call(e)||"",t(i)):(n.html="",t(i))})}}),t("display",function(){return{show:function(t,e,n,i){var o=this;return o.isShow?(q(o.root,p({width:"100%",height:"100%",zIndex:x()},n||e)),o.trigger("refresh")):(o.once("completed",function(){q(o.root,p({width:"100%",height:"100%",zIndex:x()},e)),o.trigger("beforeShow"),St.animate&&n?Bt(o.root,n,i).done(function(){o.trigger("show")}):(q(o.root,n||{}),o.trigger("show"))}),o.renderTo(l(t)?t:St.appRoot)),o},hide:function(){var t=this;return t.isShow&&(t.trigger("beforeHide"),t.trigger("hide")),t}}}),t("pluginM",function(){var t=dt._plugins={},e=[];return{add:function(e,n,i){var o=[].concat(e);o.forEach(function(e){t[e]||(t[e]={options:n,adapter:i})})},exists:function(e){return!!t[e]},get:function(e){return t[e]},setOpt:function(e,n){t[e]&&p(vt,t[e].options,n)},getGlobal:function(){return e},setGlobal:function(t){e=e.concat(t)}}}),t("widgetM",function(){var t=dt._widgets={};return{add:function(e,n,i){t[e]={eventName:i&&(a(i)?i:"tap"),adapter:n}},exists:function(e){return!!t[e]},isEvent:function(e){return!!t[e].eventName},get:function(e){return t[e]},show:function(e,n,i,o){return t[e]?l(n)?t[e].adapter(n,i,o):t[e].adapter(wt,n,i):void 0}}}),t("view",function(){function t(){return mt.createElement(xt.view)}function n(t){var e=t.options.init;g(e,function(e,n){t[e]=c(n)?n.bind(t):n})}function i(t){g(t.options.bindEvents,function(e,n){c(n)&&t.on(e,n.bind(t))})}function o(t){var e=d.getGlobal();e.concat(t.options.plugins).forEach(function(e){var n,i=a(e)?e:e.name,o=e.options||t.options[S(i)+"Options"]||{},r=d.get(i);r&&c(r.adapter)&&(n=c(o)?o:p(vt,{},r.options,o),t.plugins[i]=r.adapter(t,n,St))})}function r(t,e){var n={param:{}};return g(rt(t),function(t,i){if(!t.indexOf(e)){var o=t.substring(e.length).replace(/\w/i,function(t){return t.toLowerCase()});o.indexOf("param")?n[o]=i:n.param[o.substring(5).replace(/\w/i,function(t){return t.toLowerCase()})]=i}}),n}function s(t,e){e=(a(e)?t.root.querySelector(e):e)||t.root,m(e.querySelectorAll("["+xt.widget+"]")).forEach(function(e){var n,i,o,s,a,l=j(e,xt.widget);y.exists(l)&&(i=y.get(l).eventName,s=y.get(l).adapter,o=function(){a=r(e,l),n=s(e,a,t),a.id&&(t.widgets[a.id]=n)},y.isEvent(l)?(a=r(e,l),i=a.eventType||i,F(e,i,o,yt),t.on("destroy",function(){B(e,i,o)})):t.isReady?o():t.on("ready",function(){o()}),t.on("destroy",function(){n&&c(n.destroy)&&n.destroy(),n=wt,s=wt,a=wt,o=wt}))})}function u(t){t.isReady=vt,t.trigger("ready"),st(t.options.ready,t),t.trigger("completed")}function h(t){var e=this;e.options=p(vt,{},T,t),e.name=e.options.name||"view-"+b(),e.container=wt,e.isReady=yt,e.isShow=yt,e.root=wt,e.nodes=wt,e.param={},e.plugins={},e.widgets={},e.extra=p({},e.options.extra),e._locked=yt,e._renderEventTimer=wt,e._renderDeferred=new X,n(e),i(e),o(e),e.on("show",function(){e.isShow=vt}),e.on("hide",function(){e.isShow=yt})}var f=e("fetchNode"),d=e("pluginM"),y=e("widgetM"),w=e("display"),x=10,T={init:{},html:wt,fetch:wt,classNames:[],attrs:{},styles:{},destroyDom:vt,supportHash:vt,ready:wt,subViews:[],plugins:[],bindEvents:{},extra:{}};return p(h.prototype,Wt,{renderTo:function(e){var n=this;return n._locked||(n._locked=vt,n.container=e,n.isReady?(n.trigger("rendered"),n.container.appendChild(n.root),n.trigger("loaded"),n._locked=yt,n.trigger("completed")):(n.root=t(),j(n.root,"qapp-name",n.name),Q(n.root,n.options.classNames.join(" ")),j(n.root,n.options.attrs),q(n.root,n.options.styles),n.trigger("loadStart"),f(n).done(function(){n.html=n.options.html,n.trigger("loadEnd"),n.container.appendChild(n.root),n.renderHTML().done(function(){n.trigger("rendered"),n.trigger("loaded"),n._locked=yt,u(n)})}))),n},renderHTML:function(t){var e=this,n=e._renderDeferred,i=function(t){e._renderEventTimer&&(clearTimeout(e._renderEventTimer),e._renderEventTimer=wt),e._renderEventTimer=v(function(){e.root&&(e._renderEventTimer=wt,n.resolve())},x)};return e.html=t||e.html,e.nodes=Y(e.html).children,e.nodes.length?(F(e.root,"DOMNodeInserted",i,yt),M(e.root,e.nodes),n.done(function(){B(e.root,"DOMNodeInserted",i),s(e)}),e._renderEventTimer=v(function(){e.root&&(e._renderEventTimer=wt,n.resolve())},x)):e.root&&(s(e),n.resolve()),n},staticBuild:function(t){var e=this;return t&&l(t)&&(e.trigger("loadStart"),e.html=t.innerHTML||"",e.trigger("loadEnd"),e.container=t.parentNode||t,e.root=t,j(e.root,"qapp-name",e.name),Q(e.root,e.options.classNames.join(" ")),j(e.root,e.options.attrs),q(e.root,e.options.styles),e.nodes=m(t.children)||[],s(e),e.trigger("rendered"),e.trigger("loaded"),u(e),e.trigger("completed"),e.trigger("beforeShow"),e.trigger("show"),e.trigger("actived")),e},show:w.show,hide:w.hide,close:w.hide,mergeParam:function(t){var e=this;return p(vt,e.param,t),e},fn:function(t){var e=this;return function(){return c(e[t])?e[t].apply(this,m(arguments)):wt}},frontOn:function(t,e){var n=this,i=n._events[t]=n._events[t]||[];return i.unshift({callback:e,ctx:n}),n},scanWidget:function(t){s(this,t)},showWidget:function(t,e,n){var i=dt._widgets;return i[t]?l(e)?i[t].adapter(e,n,this):i[t].adapter(wt,e,n,this):void 0},destroy:function(){var t=this;return t.options.destroyDom&&R(t.root),clearTimeout(t._renderEventTimer),t._renderDeferred&&t._renderDeferred.destroy(),g(t.plugins,function(t,e){e&&c(e.destroy)&&e.destroy()}),g(t.widgets,function(t,e){e&&c(e.destroy)&&e.destroy()}),t.trigger("destroy"),t.off(),E(t),t.destroyed=vt,t}}),h}),t("taskQ",function(){function t(t){dt.trigger("running",vt),H(t,[],vt).done(function(){n.forEach(function(t){t&&c(t.destroy)&&t.destroy()}),n=wt,dt.trigger("running",yt)}).progress(function(){e.trigger("ev")})}var e=N(),n=wt,i=500,o={push:function(e){n?n.push(e):(n=[e],t(n))},pushTask:function(t){o.push((new X).startWith(function(e){try{t(e)}catch(n){}v(function(){e&&c(e.resolve)&&e.resolve()},i)}))},addListener:function(t){e.on("ev",t)}};return o}),t("viewM",function(){function t(t){}function n(t){return t.split(":")[0]}function i(e,n,i){var o;y[e]&&y[e][n]?i(y[e][n]):d[e]?(o=y[e][n]=new h(p({name:e+":"+n},d[e])),o.on("destroy",function(){y[e][n]=wt}),i(o)):t(e)}function o(e,n){var i=wt;return y[e]&&y[e][n]?i=y[e][n]:d[e]?(i=y[e][n]=new h(p({name:e+":"+n},d[e])),i.on("destroy",function(){y[e][n]=wt})):t(e),i}function r(t){var e=t.split(":");return{name:e[0],index:e[1]||0}}function s(t,e){g(e,function(e,n){0===e.indexOf("on")&&c(n)&&"onComplete"!=e&&t.on(e.substring(2).replace(/\w/,function(t){return t.toLowerCase()}),n)})}function u(t){return p.apply(wt,[vt,{}].concat(m(t).map(function(t){return a(t)?d[t]||{}:t})))}var h=e("view"),f=e("taskQ"),d=dt._viewOptionsMap={},y=dt._viewMap={},w={define:function(t){a(t)&&(d[t]=u(arguments),y[t]=[])},undefine:function(t){a(t)&&(d[t]=wt)},getOptions:function(t){return d[t]},create:function(){var t=new h(u(arguments)),e=t.name;if(e){var n=r(e);y[n.name][n.index]=t,t.on("destroy",function(){y[n.name][n.index]=wt})}return t},structure:function(t,e){e=e||{},e.ani=a(e.ani)?{name:e.ani}:e.ani||{};var n=p(vt,{},w.getOptions(t.split(":")[0])),i=e.ani.name||St.defaultAnimate;n.name=t,n.init=n.init||{},n.init.param=e.param||{},n.styles=p(n.styles||{},e.styles),n.classNames=(n.classNames||[]).concat(e.classNames),i&&(n.plugins=(n.plugins||[]).concat([{name:i,options:p({},w.getExtraOption(t,i),e.ani)}]));var o=w.create(n);return o.param=p({},e.param),s(o,e),o.complete=function(t){c(e.onComplete)&&e.onComplete.call(o,t)},o.on("callback",o.complete),o},build:function(t){var e,n=u(m(arguments).slice(1));return t&&l(t)&&(n.name=j(t,"qapp-name"),e=new h(n),e.staticBuild(t)),e},show:function(t,e){var n=m(arguments),i=w.structure(t,e);return f.pushTask(function(t){i.once("show",function(){t.resolve()}),i.once("hide",function(){v(function(){c(i.destroy)&&i.destroy()})}),i.show.apply(i,n.slice(2))}),i},exists:function(t){return!!d[t]},get:function(t,e){var n,o={};return a(t)&&(o=r(t)),c(e)?void i(o.name,o.index,function(t){e(t)}):n={invoke:function(){var t=m(arguments),e=t.shift();return i(o.name,o.index,function(n){st(n[e],n,t)}),n},pushMessage:function(t,e){var i=y[o.name]&&y[o.name][o.index];return i&&i.trigger(t,e),n}}},getSync:function(t){var e,n={};return a(t)&&(e=t.split(":"),n={name:e[0],index:e[1]||0}),o(n.name,n.index)},getExtraOption:function(t,e){var i,o=d[n(t)];return o?(i=o.extra&&o.extra[St.type]||o.extra||{},i[e]):void 0},getHashParams:function(t){var e=d[n(t)];return e?e.hashParams||[]:[]},getRealName:n};return w}),t("viewQ",function(){function t(){var t,e=p[0];return e&&e.root&&(t=parseInt(q(e.root,"z-index"))),(t||x())-1}function i(){return p.length?p[p.length-1]:void 0}function o(t){var e,n=p.length;for(e=n-1;e>-1;e--)if(p[e].name==t)return e;return-1}function r(t){if(t.indexOf(":new")>-1)return t.replace(":new",":"+b());for(var e=0,n=p.length;n>e;e++)if(t==p[e].name.split(":")[0])return!1;return t}function s(t,e,n,i,o){e=e||"show",g(function(r){t.on(e.replace("_",""),function(){v(function(){r.resolve().done(o)})}),c(n)?n():(t[e](i),e.indexOf("hide")>-1&&!i&&r.resolve())})}function a(t){s(t,"_hide",function(){h.hide.call(t)})}function l(t){function e(){y.preView=y.curView,y.curView=t.name}var n=t.hide,i=t.close,o=t._events.show=t._events.show||[],r=t._events.actived=t._events.actived||[];o.unshift({callback:e,ctx:t}),r.unshift({callback:e,ctx:t}),t.once("hide",function(){var e=p.indexOf(t);e>-1&&(p.splice(e,1),v(function(){c(t.destroy)&&t.destroy()}))}),t.hide=t._hide=function(e){e===vt?n.call(t):g(function(e){t.once("hide",function(){v(e.resolve)}),n.call(t)})},t.close=t._close=function(e){e===yt?i.call(t):g(function(e){t.once("hide",function(){v(e.resolve)}),i.call(t)})}}var u,h=e("display"),f=e("taskQ"),d=e("viewM"),p=[],g=f.pushTask,m=d.getRealName,y={curView:wt,preView:wt,add:function(t,e,i,o,s){g(function(a){if(t=r(t),c(s)&&s(t)===yt)return void a.resolve().done(l);var l=c(o)?o:n;t&&d.exists(m(t))?(y[i?"unshift":"push"](d.structure(t,e),l),a.resolve()):a.resolve().done(l)})},push:function(t,e){l(t),t.once("show",function(){var e=i();v(function(){t.trigger("actived"),e&&e.trigger("deactived")}),p.push(t)}),s(t,"show",wt,yt,function(){e(t)})},unshift:function(e,n){l(e),e.once("show",function(){p.unshift(e),1===p.length&&v(function(){e.trigger("actived")})}),e.on("beforeShow",function(){e.initialShow=yt,q(e.root,"z-index",t()-1)}),s(e,"show",function(){e.show(vt)},yt,function(){n(e)})},pop:function(t,e,n){var o=i();if(t===bt&&(t=1),o&&t>0){var r=function(i){var r,c=p.length,l=c-t;if(l>=0)for(r=l;c-1>r;r++)a(p[r]);l>0&&t>0&&o.once("hide",function(){var t=p[l-1];t&&(e&&e.data&&t.trigger("receiveData",e),t.trigger("actived"))}),s(o,"_hide",wt,i,n)};g(function(e){t<p.length?r(vt):t==p.length&&(m(p[0].name)!==St.indexView?(y.add(St.indexView,{},vt),g(function(t){r(yt),t.resolve()})):p.length>1&&(t=p.length-1,r(vt))),e.resolve()})}},remove:function(t,e,n){g(function(i){var r=o(t);r>-1&&y.pop(p.length-r,e,n),i.resolve()})},backTo:function(t,e,n,i){g(function(r){var s=o(t),a=p.length;-1===s?y.add(m(t),{param:n},vt,function(t){u._reset(t),y.pop(a,e,i)}):(a=p.length-s-1,y.pop(a,e,i)),r.resolve()})},refresh:function(t){var e=i();e&&e.trigger("receiveData",t)},clear:function(t,e){g(function(n){y.pop(p.length,t,e),n.resolve()})},inject:function(t){u=t}};return y}),t("history",function(){function t(t){return t.length>2&&t.lastIndexOf(":0")==t.length-2?t.substring(0,t.length-2):t}function n(t){t=B(t);var e=S.getOptions(t);return e&&e.supportHash!==yt?X.all&&X.except.indexOf(t)>-1?yt:X.all||-1!==X.exist.indexOf(t)?vt:yt:yt}function i(t){return t[t.length-1]}function o(t,e){return F.trigger("change",{type:t,data:p(vt,{},e)})}function r(){var t={},e=h();if(e.view&&e.view.indexOf("__")){if(C)I=R;else if(e.query[R])M=e.query[R],I=Y+M;else{do M=b(),I=Y+M;while(P[I]);d(e,vt)}try{t=JSON.parse(P.getItem(I))||{}}catch(n){}t.basePath==Q&&(z=m(t.history),q=t.index,z[q]!==e.view&&(z=[],q=0,P.removeItem(I))),z.length||z.push(e.view),j=z.slice(0),V=q}}function s(){try{P.setItem(I,JSON.stringify({basePath:Q,history:z,index:q}))}catch(t){}}function a(t,e){e?z[q]=t:(q++,z=z.slice(0,q),z.push(t)),s()}function c(){var t,e=T.hash,n=e.indexOf("#");return H?e=T.pathname.replace(H.basePath,"").replace(H.ext,""):(e=n>-1?e.slice(n+1):"",t=e.indexOf("#"),t>-1&&(e=e.slice(0,t))),e}function l(t,e){var n=Q+"#"+t;if(w=t,D){if(H){var i=t.split("?");n=Q+i[0]+H.ext+(i.length>1?"?"+i.slice(1).join("?"):"")}E[(e?"replace":"push")+"State"]({path:n},mt.title,n)}else e?T.replace(n):T.href=n}function h(e){e=e||c();var n=e.split("?"),i=t(n[0])||St.indexView,o=_(n[1]||"",vt);if(St.jsonParam&&o._param)try{o=p(vt,o,JSON.parse(o._param)),delete o._param}catch(r){}return{view:i,query:o}}function f(){return x?x:x=A?function(){var t=h();return t[R]=bt,t}():i(W)}function d(t,e){t=t||{};var n,i=t.view||St.indexView,r=t.query||{},s=f();if(e=e||i==s.view,x=wt,A){if(C||(r[R]=M),a(i,e),o("willForward",{view:i,query:r})===yt)return yt;n=O(St.jsonParam?{_param:JSON.stringify(r)}:r,vt),l(i+(n?"?"+n:""),e)}else{var c={view:i,query:r};e?W[W.length-1]=c:W.push(c)}return vt}function g(t){var e,i=t?h(t):f(),r=i.view,c=z.indexOf(r);-1===c?(a(r),o("forward",{info:i})):(e=c-q,q=c,0>e?n(i.view)?o("back",{info:i,param:$.shift()}):E.back():0===e?o("refresh",{info:i}):1===e?n(i.view)?o("forward",{info:i}):E.go(q<z.length-1?1:-1):v(function(){T.reload()}),s())}function y(){gt.addEventListener(L,function(){w!==c()&&(w=c(),x=wt,g())})}var w,x,S=e("viewM"),T=gt.location,E=gt.history,k=gt.sessionStorage,C=!!k,P=C?gt.sessionStorage:gt.localStorage,A=vt,X=wt,H=wt,D=!!E.pushState,L=D?"popstate":"hashchange",Y="QAPP_HISTORY_",M=0,I="",R="_history",z=[],j=[],q=0,V=0,W=[],F=N(),B=S.getRealName,$=[],Q=function(){var t=ct(T.href);return t.hash={},delete t.query._qtid,t.toUrl()}(),U={basePath:Q,start:function(){var t;if(A){if(X=St.hashSupport,H=D?X.usePath:yt,H&&(E.basePath=Q=T.origin+H.basePath),w=c(),t=f(),r(),!n(t.view)){if(q>0)return q--,x=wt,E.back(),s(),void v(function(){U.start(flag)},100);t={view:St.indexView,query:{}},d(t,vt)}o("init",{info:f()}),y()}else t={view:St.indexView,query:h().query},W.push(t),o("init",{info:t})},analyzeHash:h,setHashInfo:d,getHashInfo:f,refreshParam:function(t){var e=f();e.query=p(e.query,t),d(e,vt)},back:function(t,e){u(t)||(t=1,e=t);var n=f().view,r={view:B(n),name:n,data:e};if(t=t||1,A)if($.push(r),q>t-1)E.go(-t);else{var s=St.indexView;0===q&&s===n?(dt.trigger("close"),
E.go(-1)):(q>0&&E.go(-q),d({view:s},vt),o("home",{info:f()}))}else{var a=W.length-t;1>a&&(a=1),W=W.slice(0,a),x=wt,o("back",{info:i(W),param:r})}},backTo:function(t,e,n){var i,r=A?z:W.map(function(t){return t.view}),s=A?q:r.length-1;for(i=s;i>-1;i--)if(!n&&B(r[i])===t||r[i]===t)return i===s?o("refresh",{info:f(),param:e}):U.back(s-i,e),vt;return yt},home:function(t){U.back(A?q:W.length-1,t)},exit:function(){dt.trigger("close"),A?E.go(-q-1):E.back()},onChange:function(t){F.on("change",t)},buildHash:function(t,e){var n=t.view,i=t.query,o=O(St.jsonParam?{_param:JSON.stringify(i)}:i,vt);return(e?"":Q)+"#"+n+(o?"?"+o:"")},buildPath:function(t){var e=t.view,n=t.query,i=O(St.jsonParam?{_param:JSON.stringify(n)}:n,vt);return Q+e+H.ext+(i?"?"+i:"")},reset:function(){z=j.slice(0),q=V},getAll:function(){return{index:q,list:A?z:W}},setOptions:function(t,e){A=!!t,X=e,H=D&&X?X.usePath:yt},usePath:function(){return H}};return U}),t("router",function(){function t(t){if(t){var e,n=t.complete;t.hide=function(t){y.back(1,t||e)},t.complete=function(i){e=i,st(n,t,[i])}}}function n(e){r.onChange(function(e){var n=e.data,i=n.info,o=n.param,r=e.type;switch(r){case"init":St.autoInit&&s.add(i.view,{param:i.query},vt,function(e){t(e),f.trigger(r,e)});break;case"forward":v(function(){f.trigger("willForward",i)===!1?history.back():s.add(i.view,{param:i.query},yt,function(e){t(e),f.trigger(r,e)})},100);break;case"refresh":s.refresh({view:a.getRealName(i.view),name:i.view,data:o}),f.trigger(r);break;case"back":case"home":v(function(){s.backTo(i.view,o,i.query,function(){f.trigger(r)})},100);break;case"willForward":return f.trigger(r,n)}}),r.start(e)}function i(){h.add("router","tap",function(t){var e,n,i,o,s=t.el,a=j(s,"href"),c=j(s,"target"),l=_(j(s,"param")||"",vt);a.indexOf("#!")?a.indexOf("#")||(a=a.slice(1),e=r.analyzeHash(a),"_blank"===c?y.open(e.view+":new",{param:p(e.query,l)}):(o=e.view.split(":"),n=o.length>0,"0"==o[1]&&(e.view=o[0]),y.backTo(e.view,l,n)===yt&&y.open(e.view,{param:p(e.query,l)}))):2==a.indexOf("home")?y.home(l):(a=a.slice(2),i=a.match(u),i&&y.back(i[2]||1,l))})}function o(t){return function(){var e=m(arguments);return e[1]&&e[1].skipFilter||g.reduce(function(t,n){return t&&n(e)!==yt},vt)?st(r[t],r,e):void 0}}var r=e("history"),s=e("viewQ"),a=e("viewM"),l=yt,u=/back(\((\d+)\))?/,h=at(mt,[],xt.role),f=N(),d=[],g=[],y=p(f,{start:function(){l||(l=vt,n(),i(),r.onChange(function(t){f.trigger("history",t)}))},open:function(e,n,i){var o=m(arguments);if(o[1]&&o[1].skipFilter||d.reduce(function(t,e){return t&&e(o)!==yt},vt)){n=n||{};var a=n.param||{};s.add(e,n,!!n.atBottom,function(e){e?(t(e),st(i,e,[e]),n.atBottom||f.trigger("forward",e)):st(i)},function(t){return r.setHashInfo({view:t,query:a})})}},transfer:function(t,e){v(function(){if(r.usePath())location.href=r.buildPath({view:t,query:e});else{var n=ct(r.basePath);n.setQuery("_qtid",Date.now()),location.href=n.toUrl()+r.buildHash({view:t,query:e},!0)}})},back:o("back"),backTo:o("backTo"),home:o("home"),"goto":function(t,e,n,i){r.backTo(t,n,i)===yt&&y.open(t,e)},exit:r.exit,refreshParam:r.refreshParam,addOpenFilter:function(t){c(t)&&(d=d.concat(t))},removeOpenFilter:function(t){var e=d.indexOf(t);e>-1&&d.splice(e,1)},addBackFilter:function(t){c(t)&&(g=g.concat(t))},removeBackFilter:function(t){var e=g.indexOf(t);e>-1&&g.splice(e,1)},getCurViewName:function(t){return s.curView&&(t?s.curView:a.getRealName(s.curView))},getPreViewName:function(t){return s.preView&&(t?s.preView:a.getRealName(s.preView))},buildUrl:function(t){return r.usePath()?r.buildPath(t):r.buildHash(t)},getCurInfo:r.getHashInfo,resetHistory:r.reset,_getHistory:function(){return r.getAll()},_newSite:function(){gt.open(r.basePath)},_reset:t});return s.inject(y),y});var oe=e("viewM"),re=e("history"),se=e("router"),ae=e("pluginM"),ce=e("widgetM"),le={},ue=new X,he=[],fe=100;ft(function(){function t(){i=n.clientWidth,o=n.clientHeight,p(le,{width:i,height:o,rootWidth:i-St.root.left-St.root.right,rootHeight:o-St.root.top-St.root.bottom}),q(mt.body,"height",o+"px"),q(r,{height:le.rootHeight+"px",width:le.rootWidth+"px"})}function e(){var e=n.clientHeight;(Tt.ios||e>o-fe)&&e!=o&&t()}var n=mt.documentElement,i=n.clientWidth,o=n.clientHeight,r=mt.createElement(xt.app);p(le,{width:i,height:o,rootTop:St.root.top,rootLeft:St.root.left}),q(mt.body,"height",o+"px"),St.customRoot?(le.rootWidth=i-St.root.left-St.root.right,le.rootHeight=o-St.root.top-St.root.bottom,q(r,{top:le.rootTop+"px",left:le.rootLeft+"px",height:le.rootHeight+"px",width:le.rootWidth+"px"}),M(mt.body,r)):(le.rootWidth=i,le.rootHeight=o,r=mt.body),dt.root=St.appRoot=r,dt.checkResize=e,se.start(),St.screen&&(St.screen.autoResize&&gt.addEventListener("resize",e),St.screen.rotate&&te.on("change",t)),St.preventMove&&F(mt,"touchmove",function(t){t.preventDefault()})}),dt=p(dt,N()),p(dt,{config:function(t){var e=p(vt,St,t),n=e.plugins,i=e.globalPlugins;return s(i)&&ae.setGlobal(i),s(n)?n.forEach(function(t){t&&n.name&&ae.setOpt(t.name,t.options)}):n&&g(n,function(t,e){t&&ae.setOpt(t,e)}),re.setOptions(e.hashRouter,e.hashSupport),e},root:mt.body,origin:le,defineView:oe.define,undefineView:oe.undefine,createView:oe.create,buildView:oe.build,existsView:oe.exists,getView:oe.get,getViewSync:oe.getSync,addPlugin:ae.add,configPlugin:ae.setOpt,setGlobalPlugins:ae.setGlobal,addWidget:ce.add,showWidget:ce.show,router:se,open:se.open,exit:se.exit,view:oe,show:oe.show,showView:oe.show,hash:{getInfo:re.getHashInfo,setInfo:re.setHashInfo,analyzeHash:re.analyzeHash,setParam:re.refreshParam,build:re.buildHash},sniff:Tt});var de=dt.util={};de.ready=L,dt.ready=ft,dt.addReadyDependencies=function(t){he.push(t)},de.query=function(t){return mt.querySelector(t)},de.queryAll=function(t){return mt.querySelectorAll(t)},de.is=o,de.isObject=r,de.isString=a,de.isArray=s,de.isFunction=c,de.isNumber=u,de.isElement=l,de.isPlainObject=h,de.isEmptyObject=f,de.extend=p,de.each=g,de.makeArray=m,de.delay=v,de.associate=y,de.mapping=w,de.camelCase=S,de.dasherize=T,de.empty=E,de.noop=n,de.getUniqueID=b,de.getZIndex=x,de.jsonToQuery=O,de.queryToJson=_,de.parseURL=ct,de.loader=ut,de.builder=Y,de.appendNodes=M,de.insertElement=I,de.removeNode=R,de.attr=j,de.css=q,de.removeStyle=V,de.addClass=Q,de.removeClass=U,de.fixEvent=W,de.addEvent=F,de.removeEvent=B,de.dispatchEvent=$,de.createStyle=Z,de.size=et,de.position=ot,de.contains=Ft,de.focus=J,de.blur=G,de.animate=Bt,de.dataSet=rt,de.delegatedEvent=at,de.CustEvent=de.custEvent=Wt,de.Deferred=de.deferred=X,de.queue=H,de.parallel=D,dt.logger=de.logger=ht,gt.QApp=dt,L(function(){he.length?D(he).done(function(){ue.resolve()}):ue.resolve()}),function(){var t=dt.util;dt.addPlugin("static",function(e,n,i){e.on("rendered",function(){e.root&&t.css(e.root,{position:"absolute",width:"100%",height:"100%"})})})}(),function(){function t(t){V(t,s)}function e(t){q(t,a,""),V(t,a)}function n(t){return~(t+"").indexOf("%")||~(t+"").indexOf("px")?t:t+"px"}function i(t,e,n){e.on("loadEnd",function(){j(e.root,"qapp-ani",t),q(e.root,a,"hidden")}),e.on("beforeHide",function(){G(e.root)}),e.on("destroy",function(){e.show=wt,e.hide=wt})}function o(t,e){var n,i,o=-1;for(n=0,i=t.length;i>n;n++)if(t[n].view===e){o=n;break}return o}function r(t,e,n,i,o){var r=0;return D(t.map(function(t,o){return e>o?(t.view.trigger("beforeHide"),Bt(t.view.root,i?l(t.translate,0,0):l(0,t.translate,0),n)):(r+=t.distance,Bt(t.view.root,i?l(r,0,0):l(0,r,0),n))}))}var s="display",a="visibility",c=function(){var t=navigator.userAgent.toLowerCase();return Tt.ios||Tt.android&&t.indexOf("micromessenger")>-1?1:2}(),l=1==c?function(t,e,n){return{translate3d:t+"px, "+e+"px, "+n+"px"}}:function(t,e,n){return{translate:t+"px, "+e+"px",translateZ:n+"px"}},u=10,h={position:"right",distance:0,duration:200,zIndex:0},f={},d=yt;dt.addPlugin("moveEnter",h,function(s,a,g){var m,y,w={position:"absolute",top:0,zIndex:a.zIndex||x()},b=g.type.indexOf&&-1===g.type.indexOf("pad"),S="right"===a.position||"left"===a.position,T="right"===a.position||"bottom"===a.position?-1:1,E=yt,k=yt,C=yt;if(a.panBack===bt&&(a.panBack="app"===g.type),b&&(a.distance=S?le.rootWidth:le.rootHeight),m=T*a.distance,g.animate||(a.duration=0),b?(y=[],w.width="100%",w.height="100%"):(f[a.position]||(f[a.position]=[]),y=f[a.position],w[S?"height":"width"]="100%"),a.panBack&&b&&("right"===a.position||"left"===a.position)){var O=function(t){return~t.directions.indexOf(a.position)?t.clientX-t.offsetX<u:yt},P=function(t){C?q(s.root,l(t.offsetX,0,0)):k||(k=vt,C=O(t))},_=function(t){C&&(C=yt,Math.abs(t.offsetX)>Math.abs(a.distance)/2?s.hide():Bt(s.root,l(0,0,0),a.duration/2).done()),k=yt};s.on("show",function(){F(s.root,"pan",P),F(s.root,"panend",_)}),s.on("hide",function(){B(s.root,"pan",P),B(s.root,"panend",_)}),s.on("rendered",function(){var t=mt.createElement("div");t.className="touch-opacity",q(t,{position:"absolute",zIndex:"9999",width:n(u),height:"100%",backgroundColor:"rgba(255, 255, 255, 0)"}),q(t,"right"===a.position?"left":"right","0"),Q(s.root,"shadow"),s.root.appendChild(t)})}return s.on("loaded",function(){a.distance||(a.distance=et(s.root)[S?"width":"height"]),b?3===c?"bottom"===a.position?w.top=n(le.rootHeight):w[a.position]=n(-a.distance):("bottom"===a.position?w.top=n(le.rootHeight-a.distance):w[a.position]=n(0),p(w,S?l(-T*a.distance,0,0):l(0,-T*a.distance,0))):"bottom"!==a.position?w[a.position]=n(-a.distance):w.top=n(le.rootHeight),q(s.root,w)}),i("moveEnter",s,a),s.show=function(n){if(G(),!d){d=vt,E=vt;var i=o(y,s);~i?r(y,i,n===vt||s.preventAnimate?0:a.duration,S).done(function(){y.splice(0,i).forEach(function(t){t.view.trigger("hide")}),d=yt,E=yt,s.trigger("refresh")}):(s.once("completed",function(){t(s.root),e(s.root),s.trigger("beforeShow"),y.unshift({view:s,distance:b?0:m,translate:b?-m:0}),v(function(){r(y,0,n===vt||s.preventAnimate?0:a.duration,S,s.root).done(function(){d=yt,E=yt,V(s.root,"transform"),s.trigger("show")})})}),s.renderTo(dt.root))}return s},s.hide=function(t){if((!d||b&&!E)&&s.isShow){d=vt;var e=o(y,s);r(y,e+1,t===vt||s.preventAnimate?0:a.duration,S).done(function(){y.splice(0,e+1).forEach(function(t){t.view.trigger("hide")}),d=yt})}return s},s.on("destroy",function(){w=wt,y=wt,s=wt}),{setOption:function(t){a=p({},h,t)}}})}()}(),function(){function t(t,e,n,i){t.addEventListener(e,n,!!i)}function e(t){var e=t.length;if(e===e>>>0)try{return Y.call(t)}catch(n){}return!0}function n(e){/complete|loaded|interactive/.test(document.readyState)&&document.body?e():t(document,"DOMContentLoaded",function(){e()})}function i(){return 2==x}function o(t){return Object.getOwnPropertyNames(t)}function r(t){return 0===o(t).length}function s(t){return"tagName"in t?t:t.parentNode}function a(t){var e=document.createEvent("HTMLEvents");return e.initEvent(t,!0,!0),e}function c(t,e){L&&t&&t.dispatchEvent&&t.dispatchEvent(e)}function l(t,e){return b.forEach(function(n){t[n]=e[n]}),t}function u(t,e){var n=[],i=Math.abs(t),o=Math.abs(e),r=Math.tan(k/180*Math.PI),s=i>o;return(i>0||o>0)&&(n.push(s?t>0?"right":"left":e>0?"down":"up"),s&&o/i>r?n.push(e>0?"down":"up"):!s&&i/o>r&&n.push(t>0?"right":"left")),n}function h(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function f(t,e){var n=Math.atan2(e,t)/Math.PI*180;return 0>n?n+360:n}function d(t,e){var n=Math.atan(-1*e/t)/Math.PI*180;return 0>n?n+180:n}function p(t,e){for(var n=X-d(t,e);Math.abs(n-H)>90;)0>H?n-=180:n+=180;return H=n}function g(t,e,n,i,o){var r=a(t);return r.offsetX=e,r.offsetY=n,r.degree=f(e,n),r.directions=u(e,n),o&&(r.duration=o,r.speedX=r.offsetX/o,r.speedY=r.offsetY/o),l(r,i)}function m(t,e,n,i,o,r,s){var c=a(t);return c.centerX=e,c.centerY=n,void 0!==i&&(c.scale=i),void 0!==o&&(c.deflection=o),c.touchs=[r,s],c}function v(){var t=!0;for(var e in A)if("end"!=A[e].status){t=!1;break}return t}function y(t){M[t?"disable":"enable"]()}var w=window.QApp,b=["screenX","screenY","clientX","clientY","pageX","pageY"],x=2,S=200,T=300,E=10,k=15,C=500,O=10,P=null,_=null,A={},N=0,X=0,H=0,D=!0,L=!0,Y=Array.prototype.slice;n(function(){function n(t){r(A)&&(P=s(t.touches[0].target)),e(t.changedTouches).forEach(function(t,e){var n=o(A);if(n.length<x){var r=l({},t),s={startTouch:r,curTouch:r,startTime:Date.now(),status:"tapping",other:null,handler:setTimeout(function(){s&&("tapping"==s.status&&(s.status="pressing",c(P,l(a("press"),r))),clearTimeout(s.handler),s.handler=null)},S)};if(c(P,l(a("feel"),r)),A[t.identifier]=s,i()&&1==n.length){var u=A[n[0]].startTouch,f=r.clientX-u.clientX,p=r.clientY-u.clientY,g=(r.clientX+u.clientX)/2,m=(r.clientY+u.clientY)/2;s.other=A[n[0]],A[n[0]].other=s,_={centerX:g,centerY:m,pinch:!1,deflection:!1,distance:h(f,p)},X=d(f,p)}}})}function u(t){e(t.changedTouches).forEach(function(t,e){var n=A[t.identifier];if(n){var o=n.startTouch,r=t.clientX-o.clientX,s=t.clientY-o.clientY;if("tapping"==n.status||"pressing"==n.status?h(r,s)>E&&(n.status="panning",n.startMoveTime=Date.now(),c(P,g("pan",r,s,t))):"panning"==n.status&&c(P,g("pan",r,s,t)),i()&&n.other&&"end"!=n.other.status){var a=n.other.curTouch,u=t.clientX-a.clientX,f=t.clientY-a.clientY,d=(t.clientX+a.clientX)/2,v=(t.clientY+a.clientY)/2,y=h(u,f);if(_.pinch?c(P,m("pinch",d,v,y/_.distance,void 0,t,a)):Math.abs(_.distance-y)>O&&(_.pinch=!0,c(P,m("pinch",d,v,y/_.distance,void 0,t,a))),_.deflection){var w=p(u,f);c(P,m("rotate",d,v,void 0,w,t,a))}else{var w=p(u,f);Math.abs(w)>k&&(c(P,m("rotate",d,v,void 0,w,t,a)),_.deflection=!0)}}n.curTouch=l({},t)}})}function f(t){if(e(t.changedTouches).forEach(function(t,e){var n=A[t.identifier];if(n){if(n.handler&&(clearTimeout(n.handler),n.handler=null),"tapping"==n.status)c(P,l(a("tap"),t));else if("pressing"==n.status)D&&c(P,l(a("tap"),t)),c(P,l(a("pressend"),t));else if("panning"==n.status){var o=n.startTouch,r=t.clientX-o.clientX,s=t.clientY-o.clientY,u=Date.now()-n.startMoveTime;c(P,g("panend",r,s,t,u)),T>u&&c(P,g("flick",r,s,t,u))}if(i()&&n.other&&"end"!=n.other.status){var f=n.other.curTouch,d=t.clientX-f.clientX,v=t.clientY-f.clientY,y=(t.clientX+f.clientX)/2,w=(t.clientY+f.clientY)/2,b=h(d,v);if(_.pinch&&c(P,m("pinchend",y,w,b/_.distance,void 0,t,f)),_.deflection){var x=p(d,v);c(P,m("rotatend",y,w,void 0,x,t,f))}x=0}n.status="end"}}),v())for(var n in A)delete A[n]}var y=document.body;t(y,"touchstart",n),t(y,"touchmove",u),t(y,"touchend",f),t(y,"tap",function(t){var e=Date.now();C>e-N?(c(P,l(a("doubletap"),t)),N=0):N=e})});var M={enable:function(){L=!0},disable:function(){L=!1},disableLongTap:function(){D=!1}};w.on("running",y),w.gesture=M,w.gesture.disableTransferCtrl=function(){w.off("running",y)}}(),function(){"use strict";function t(e,i){function o(t,e){return function(){return t.apply(e,arguments)}}var r;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=e,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!t.notNeeded(e)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,l=s.length;l>c;c++)a[s[c]]=o(a[s[c]],a);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,n.hijacked||n,i):o.call(e,t,n,i)},e.addEventListener=function(t,n,i){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(e,t,n,i)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=i&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(i&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;i&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,s,a,c,l,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(l=t.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=u.tagName.toLowerCase(),"label"===a){if(e=this.findControl(u)){if(this.focus(u),n)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-s>100||i&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),i&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return i&&!o&&(c=u.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,i,o,r;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t,QApp.addPlugin("fastclick",{},function(e,n){var i;return e.on("show",function(){i=new t(e.root,n)}),e.on("destroy",function(){i&&i.destroy&&i.destroy()}),{getEntity:function(){return i}}}),QApp.setGlobalPlugins("fastclick")}(),function(){function t(t){if(null==t.pageX&&null!=t.clientX){var e=document.documentElement,n=document.body;t.pageX=t.clientX+(e.scrollLeft||n&&n.scrollLeft||0)-(e.clientLeft||n&&n.clientLeft||0),t.pageY=t.clientY+(e.scrollTop||n&&n.scrollTop||0)-(e.clientTop||n&&n.clientTop||0)}return t}function e(t){var e=E(t),n=T(t);return{left:e.left,top:e.top,right:e.left+n.width,bottom:e.top+n.height}}function n(n,i){var o=e(n);return i=t(i),i.pageX>=o.left&&i.pageX<=o.right&&i.pageY>=o.top&&i.pageY<=o.bottom}function i(t){b(t,u)}function o(t){w(t,h,""),b(t,h)}function r(t){return~(t+"").indexOf("%")||~(t+"").indexOf("px")?t:t+"px"}function s(){return A||(A=l.createElement("div"),w(A,{position:"absolute",top:0,left:0,width:r(f.width),height:r(f.height)})),A}function a(t,e,n){e.on("loadEnd",function(){d.attr(e.root,"qapp-ani",t),d.css(e.root,h,"hidden")}),e.on("beforeHide",function(){k(e.root)}),e.on("destroy",function(){e.show=null,e.hide=null}),e.autoHide=n.autoHide&&"false"!==n.autoHide,N(e)}var c=window,l=document,u="display",h="visibility",f=QApp.origin,d=QApp.util,p=d.extend,g=d.delay,m=d.appendNodes,v=d.addClass,y=(d.addEvent,d.removeEvent,d.removeNode),w=d.css,b=d.removeStyle,x=d.contains,S=d.animate,T=d.size,E=d.position,k=(d.parallel,d.blur),C=d.getZIndex,O=(d.getUniqueID,d.delegatedEvent),P=(d.dispatchEvent,d.isFunction,function(){var t=QApp.sniff,e=navigator.userAgent.toLowerCase();return t.ios||t.android&&e.indexOf("micromessenger")>-1?1:2}()),_=1==P?function(t,e,n){return{translate3d:t+"px, "+e+"px, "+n+"px"}}:function(t,e,n){return{translate:t+"px, "+e+"px",translateZ:n+"px"}},A=null,N=function(){function t(t){o.unshift(t)}function e(t){var e=o.indexOf(t);~e&&o.splice(e,1)}function i(n){n.once("show",function(){t(n)}),n.once("hide",function(){e(n),n=null})}var o=[],r="";return i.setNextView=function(t){r=t},d.ready(function(){l.body.addEventListener("touchstart",function(t){var e=o[0];!e||!e.autoHide||x(e.root,t.target)||n(e.root,t)||e.relyElement&&x(e.relyElement,t.target)||(e.isContainer?e.decHide():e.hide())},!1)}),i}();!function(){function t(t,e,n){w(t,p(e,{top:r(f.height-n.distance),height:r(n.distance),zIndex:n.zIndex},_(0,n.distance,0)))}var e=500,n={autoHide:!0,distance:0,duration:200,showMask:!0,maskColor:"rgba(0, 0, 0, 0.4)",zIndex:0};QApp.addPlugin(["actionSheet","ui.actionSheet"],n,function(n,r,h){var d,x,E={position:"absolute",left:0,width:"100%"},O=!1;return h.animate||(r.duration=0),r.zIndex=r.zIndex||C(),n.on("loaded",function(){r.distance||(n.root.style.height="auto",r.distance=T(n.root).height),t(n.root,E,r),v(n.root,"shadow")}),n.show=function(t){return t&&t.fromHash&&(t=!0),k(),N.setNextView(n.name),r.showMask&&(d=s(),w(d,{display:"block",backgroundColor:r.maskColor,zIndex:r.zIndex}),m(l.body,d)),O||(O=!0,n.isShow?(O=!1,n.trigger("refresh")):(x=T(c).height!==f.height?e:0,n.once("completed",function(){i(n.root),o(n.root),n.trigger("beforeShow"),g(function(){S(n.root,_(0,0,0),t===!0||n.preventAnimate?0:r.duration,"ease-out",x).done(function(){n.isShow=!0,O=!1,b(n.root,"transform"),n.trigger("show")})})}),n.renderTo(l.body))),n},n.hide=function(t){return!O&&n.isShow&&(O=!0,n.trigger("beforeHide"),S(n.root,E,t===!0||n.preventAnimate?0:r.duration/2,"ease-out").done(function(){n.isShow=!1,d&&(w(d,u,"none"),y(d)),O=!1,n.trigger("hide")})),n},n.refresh=function(){n.root.style.height="auto",r.distance=T(n.root).height,t(n.root,E,r)},n.on("destroy",function(){E=null,d=null,n=null}),a("actionSheet",n,r),{setOption:function(t){r=p({},r,t)}}})}(),function(){var t={autoHide:!1,maskColor:"rgba(0, 0, 0, .4)",duration:200,width:0,height:0,zIndex:0};QApp.addPlugin(["ui.dialog","dialog"],t,function(t,e,n){var c,h=f.width,d=f.height,g=!1;return n.animate||(e.duration=0),e.zIndex=e.zIndex||C(),t.on("loaded",function(){var n=T(t.root);e.width||(e.width=n.width),e.height||(e.height=n.height),w(t.root,p({position:"absolute",width:r(e.width),height:r(e.height),zIndex:e.zIndex,display:"none",top:r((d-e.height)/2),left:r((h-e.width)/2)},_(0,d,0))),v(t.root,"shadow")}),t.show=function(n){return n&&n.fromHash&&(n=!0),N.setNextView(t.name),c=s(),w(c,{display:"block",backgroundColor:e.maskColor,zIndex:e.zIndex}),m(l.body,c),g||(g=!0,t.isShow?(g=!1,t.trigger("refresh")):(t.once("completed",function(){i(t.root),o(t.root),t.trigger("beforeShow"),S(t.root,_(0,0,0),n===!0||t.preventAnimate?0:e.duration).done(function(){t.isShow=!0,g=!1,b(t.root,"transform"),t.trigger("show")})}),t.renderTo(l.body))),t},t.hide=function(n){return!g&&t.isShow&&(g=!0,t.trigger("beforeHide"),S(t.root,_(0,d,0),n===!0||t.preventAnimate?0:e.duration).done(function(){t.isShow=!1,c&&(w(c,u,"none"),y(c)),g=!1,t.trigger("hide")})),t},t.on("destroy",function(){c=null,t=null}),a("dialog",t,e),{setOption:function(t){e=p({},e,t)}}})}(),function(){function t(t,e,n){var i=0,o=0;switch(n){case"right":i=r(d.position(t).top),o=r(d.position(t).left+d.size(t).width);break;case"left":i=r(d.position(t).top),o=r(d.position(t).left-parseInt(e.width));break;case"bottom":i=r(d.position(t).top+d.size(t).height),o=r("left"===e.position?d.position(t).left:"right"===e.position?d.position(t).left+d.size(t).width-e.width:d.position(t).left+d.size(t).width/2-e.width/2);break;case"top":i=r(d.position(t).top-parseInt(e.height)),o=r("left"===e.position?d.position(t).left:"right"===e.position?d.position(t).left+d.size(t).width-e.width:d.position(t).left+d.size(t).width/2-e.width/2)}return{top:i,left:o}}function e(t,e){if(e.autoDirection&&"false"!==e.autoDirection){var n=e.direction,i=E(t),o=i.left,r=i.top,s=T(t),a=s.width,c=s.height,l=f.width,u=f.height,h=e.width,d=e.height,p=l>=o+a+h,g=o-h>=0,m=u>=r+c+d,v=r-d>=0;return"right"===n?p||(n=g?"left":"bottom"):"left"===n&&(g||(n=p?"right":"bottom")),"bottom"===n?m||(n="top"):"top"===n&&(v||(n="bottom")),n}return e.direction}var n,s=null,c={autoHide:!0,autoDirection:!1,direction:"right",duration:200,width:0,height:0,position:"center",dropDown:!1,bgColor:"rgba(0, 0, 0, 0.4)",group:!1,item:null},h={opacity:0},m={opacity:1};QApp.ready(function(){n=O(l.body,[],"qapp-popup-group")}),QApp.addPlugin(["popup","ui.popup"],c,function(f,d,v){var b=!1,x=!1;return v.animate||(d.duration=0),d.dropDown&&(d.useArrow=!1,d.autoDirection=!1,d.direction="bottom",d.dropDuration=d.duration,d.duration=0),d.zIndex=d.zIndex||C(),f.on("loaded",function(){var t=T(f.root);d.width||(d.width=t.width),d.height||(d.height=t.height),w(f.root,{display:"none",position:"absolute",width:r(d.width),height:r(d.height),zIndex:d.zIndex}),w(f.root,d.dropDown?m:h)}),f.show=function(a,c){if(f.relyElement=a,N.setNextView(f.name),!b){b=!0;var u=e(a,d),h=t(a,d,u);f.isShow?(i(f.root),o(f.root),w(f.root,{top:h.top,left:h.left}),b=!1,f.trigger("refresh")):(f.once("completed",function(){if(f.trigger("beforeShow"),i(f.root),o(f.root),w(f.root,{top:h.top,left:h.left}),d.dropDown){var t,e=f.root.childNodes,n=-1;do n++,t=e[n];while(3===t.nodeType);w(t,p({height:r(d.height)},_(0,-d.height,0))),w(f.root,{position:"absolute",zIndex:d.zIndex,width:r(d.width),height:r(d.dropDown),backgroundColor:d.bgColor,overflow:"hidden"}),s&&y(s),g(function(){S(t,_(0,0,0),c===!0||f.preventAnimate?0:d.dropDuration,"ease-out").done(function(){f.isShow=!0,b=!1,f.trigger("show")})})}else S(f.root,m,c===!0||f.preventAnimate?0:d.duration).done(function(){f.isShow=!0,b=!1,f.trigger("show")})}),f.once("rendered",function(){d.group&&n.add(d.group,"touchstart",function(t){t.el!==d.item&&(x=!0)}),f.root.addEventListener("tap",function(t){f&&f.root===t.target&&(f.once("hide",function(){f.destroy()}),f.hide(),t.stopPropagation())},!0)}),f.renderTo(l.body))}return f},f.hide=function(t){if(f.relyElement=null,!b&&f.isShow)if(b=!0,f.trigger("beforeHide"),d.dropDown){var e,i=f.root.childNodes,o=t===!0||f.preventAnimate?0:d.dropDuration,r=-1;do r++,e=i[r];while(3===e.nodeType);o/=2,d.group&&x?S(e,{opacity:0},o,"ease-in").done(function(){f.isShow=!1,b=!1,f.options.destroyDom=!1,s&&y(s),s=f.root,g(function(){S(s,{opacity:0},o,"ease-in").done(function(){y(s),s=null})},100),n.remove(d.group,"touchstart"),f.trigger("hide")}):S(e,p({opacity:0},_(0,-d.height,0)),t===!0||f.preventAnimate?0:o,"ease-in").done(function(){f.isShow=!1,b=!1,f.trigger("hide")})}else S(f.root,h,t===!0||f.preventAnimate?0:d.duration).done(function(){f.isShow=!1,b=!1,w(f.root,u,"none"),f.trigger("hide")});return f},f.on("destroy",function(){f=null}),a("popup",f,d),{setOption:function(t){d=p({},c,t)}}})}()}(),function(){function t(){}function e(){return null}function n(n){var i=n in window&&window[n];return i?{size:function(){return i.length},key:function(){return i.key?function(t){return i.key(t)}:e}(),get:function(){return i.getItem?function(t){try{return JSON.parse(i.getItem(t))}catch(e){return null}}:e}(),set:function(){return i.setItem?function(t,e){try{return i.setItem(t,JSON.stringify(e))}catch(n){return}}:t}(),remove:function(){return i.removeItem?function(t){return i.removeItem(t)}:t}(),clear:function(){return i.clear?function(){return i.clear()}:t}()}:l}function i(){return(new Date).getTime()}function o(){var t,e,n,o,r=i();for(t=0,e=u.size();e>t;t++)n=u.key(t),o=u.get(n),o&&n!==a&&(o.expires>0&&o.createTime+o.expires<r?u.remove(n):d[n]=o.data)}function r(){this._source={}}function s(t){return m[t]||(m[t]=new r),m[t]}var a="_baseInfo",c=6048e5,l={size:function(){return 0},get:e,set:t,remove:t,clear:t},u=n("localStorage"),h=n("sessionStorage"),f=!1,d={},p=function(t,e,n){var o=arguments.length,r=null;return 1===o?(f&&t in d?r=d[t]:(r=h.get(t)||function(){
var e=u.get(t);if(e){if(0===e.expires||e.createTime+e.expires>i())return e.data;u.remove(t)}return null}(),d[t]=r),r):o>1?void 0===e||null===e?(delete d[t],h.remove(t)||u.remove(t)):(d[t]=e,n=n||0,-1===n?h.set(t,e):u.set(t,{data:e,createTime:i(),expires:n})):void 0};p.setCache=function(t){f=!!t},p.clear=function(){var t=u.get(a);h.clear(),u.clear(),u.set(a,t)},p.init=function(t){var e=u.get(a)||{},n=e.version,r=e.cTime,s=!1;n&&n===t||(s=!0,u.clear(),n=t),(!r||i()-r>c)&&(s=!0,o(),r=i()),s&&u.set(a,{version:n,cTime:r})},QApp.util.storage=p;var g=QApp.util,m={};g.extend(r.prototype,{get:function(t){var e=this._source[t];return g.isArray(e)?e.slice(0):g.isObject(e)?g.extend(!0,{},e):e},set:function(t,e){g.isArray(e)?this._source[t]=e.slice(0):g.isObject(e)?this._source[t]=g.extend(!0,{},e):this._source[t]=e,this.trigger("change",t,e)},merge:function(t,e){void 0!==this._source[t]&&(e=g.extend(!0,this._source[t],e)),this.set(t,e)},remove:function(t){this._source[t]=void 0,this.trigger("change",t)},clear:function(){for(var t in this._source)this.remove(t)},onChange:function(t){this.on("change",t)},destroy:function(){this.off(),this._source=null}},g.CustEvent);var v=(QApp.dataSource={init:function(t){return s(t)},get:function(t,e){return m[t]?m[t].get(e):void 0},set:function(t,e,n){s(t).set(e,n)},merge:function(t,e,n){s(t).merge(e,n)},remove:function(t,e){s(t).remove(e)},clear:function(t){m[t]&&m[t].clear()},onChange:function(t,e){s(t).onChange(e)}},[]),y=QApp.hy?QApp.hy.config().hybridId:"global",w=QApp.dataSource.init(y),b=QApp.util.storage;w.on("change",function(t,e){v.indexOf(t)>-1&&b(t,e)}),w.addLocalKeys=function(t){v=v.concat(t),v.forEach(function(t){w.set(t,b(t))})},w.refresh=function(){v.forEach(function(t){w.set(t,b(t))})},QApp.hy&&QApp.hy.on("actived",function(){w.refresh()}),QApp.util.globalContext=w}();var Zepto=function(){function t(t){return null==t?String(t):B[$.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function o(e){return"object"==t(e)}function r(t){return o(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){return"number"==typeof t.length}function a(t){return _.call(t,function(t){return null!=t})}function c(t){return t.length>0?T.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(t){return t in X?X[t]:X[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function h(t,e){return"number"!=typeof e||H[l(t)]?e:e+"px"}function f(t){var e,n;return N[t]||(e=A.createElement(t),A.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),N[t]=n),N[t]}function d(t){return"children"in t?P.call(t.children):T.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function p(t,e,n){for(S in e)n&&(r(e[S])||J(e[S]))?(r(e[S])&&!r(t[S])&&(t[S]={}),J(e[S])&&!J(t[S])&&(t[S]=[]),p(t[S],e[S],n)):e[S]!==x&&(t[S]=e[S])}function g(t,e){return null==e?T(t):T(t).filter(e)}function m(t,n,i,o){return e(n)?n.call(t,i,o):n}function v(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className,i=n&&n.baseVal!==x;return e===x?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function w(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?T.parseJSON(t):t:e):t}catch(n){return t}}function b(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)b(t.childNodes[n],e)}var x,S,T,E,k,C,O=[],P=O.slice,_=O.filter,A=window.document,N={},X={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,L=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,M=/^(?:body|html)$/i,I=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],j=A.createElement("table"),q=A.createElement("tr"),V={tr:A.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:q,th:q,"*":A.createElement("div")},W=/complete|loaded|interactive/,F=/^[\w-]*$/,B={},$=B.toString,Q={},U=A.createElement("div"),Z={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(t){return t instanceof Array};return Q.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,o=t.parentNode,r=!o;return r&&(o=U).appendChild(t),i=~Q.qsa(o,e).indexOf(t),r&&U.removeChild(t),i},k=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return _.call(t,function(e,n){return t.indexOf(e)==n})},Q.fragment=function(t,e,n){var i,o,s;return L.test(t)&&(i=T(A.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(Y,"<$1></$2>")),e===x&&(e=D.test(t)&&RegExp.$1),e in V||(e="*"),s=V[e],s.innerHTML=""+t,i=T.each(P.call(s.childNodes),function(){s.removeChild(this)})),r(n)&&(o=T(i),T.each(n,function(t,e){R.indexOf(t)>-1?o[t](e):o.attr(t,e)})),i},Q.Z=function(t,e){return t=t||[],t.__proto__=T.fn,t.selector=e||"",t},Q.isZ=function(t){return t instanceof Q.Z},Q.init=function(t,n){var i;if(!t)return Q.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&D.test(t))i=Q.fragment(t,RegExp.$1,n),t=null;else{if(n!==x)return T(n).find(t);i=Q.qsa(A,t)}else{if(e(t))return T(A).ready(t);if(Q.isZ(t))return t;if(J(t))i=a(t);else if(o(t))i=[t],t=null;else if(D.test(t))i=Q.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==x)return T(n).find(t);i=Q.qsa(A,t)}}return Q.Z(i,t)},T=function(t,e){return Q.init(t,e)},T.extend=function(t){var e,n=P.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){p(t,n,e)}),t},Q.qsa=function(t,e){var n,o="#"==e[0],r=!o&&"."==e[0],s=o||r?e.slice(1):e,a=F.test(s);return i(t)&&a&&o?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:P.call(a&&!o?r?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},T.contains=function(t,e){return t!==e&&t.contains(e)},T.type=t,T.isFunction=e,T.isWindow=n,T.isArray=J,T.isPlainObject=r,T.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},T.inArray=function(t,e,n){return O.indexOf.call(e,t,n)},T.camelCase=k,T.trim=function(t){return null==t?"":String.prototype.trim.call(t)},T.uuid=0,T.support={},T.expr={},T.map=function(t,e){var n,i,o,r=[];if(s(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&r.push(n);else for(o in t)n=e(t[o],o),null!=n&&r.push(n);return c(r)},T.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},T.grep=function(t,e){return _.call(t,e)},window.JSON&&(T.parseJSON=JSON.parse),T.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){B["[object "+e+"]"]=e.toLowerCase()}),T.fn={forEach:O.forEach,reduce:O.reduce,push:O.push,sort:O.sort,indexOf:O.indexOf,concat:O.concat,map:function(t){return T(T.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return T(P.apply(this,arguments))},ready:function(t){return W.test(A.readyState)&&A.body?t(T):A.addEventListener("DOMContentLoaded",function(){t(T)},!1),this},get:function(t){return t===x?P.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return O.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):T(_.call(this,function(e){return Q.matches(e,t)}))},add:function(t,e){return T(C(this.concat(T(t,e))))},is:function(t){return this.length>0&&Q.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==x)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):s(t)&&e(t.item)?P.call(t):T(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return T(n)},has:function(t){return this.filter(function(){return o(t)?T.contains(this,t):T(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!o(t)?t:T(t)},last:function(){var t=this[this.length-1];return t&&!o(t)?t:T(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?T(t).filter(function(){var t=this;return O.some.call(n,function(e){return T.contains(e,t)})}):1==this.length?T(Q.qsa(this[0],t)):this.map(function(){return Q.qsa(this,t)}):[]},closest:function(t,e){var n=this[0],o=!1;for("object"==typeof t&&(o=T(t));n&&!(o?o.indexOf(n)>=0:Q.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return T(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=T.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(C(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return P.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return _.call(d(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return T.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=T(t).get(0),o=i.parentNode||this.length>1;return this.each(function(e){T(this).wrapAll(n?t.call(this,e):o?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){T(this[0]).before(t=T(t));for(var e;(e=t.children()).length;)t=e.first();T(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=T(this),o=i.contents(),r=n?t.call(this,e):t;o.length?o.wrapAll(r):i.append(r)})},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(T(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=T(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return T(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return T(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;T(this).empty().append(m(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=m(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(o(t))for(S in t)v(this,S,t[S]);else v(this,t,m(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:x},removeAttr:function(t){return this.each(function(){1===this.nodeType&&v(this,t)})},prop:function(t,e){return t=Z[t]||t,1 in arguments?this.each(function(n){this[t]=m(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(I,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?w(i):x},val:function(t){return 0 in arguments?this.each(function(e){this.value=m(this,t,e,this.value)}):this[0]&&(this[0].multiple?T(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=T(this),i=m(this,t,e,n.offset()),o=n.offsetParent().offset(),r={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i=this[0],o=getComputedStyle(i,"");if(!i)return;if("string"==typeof e)return i.style[k(e)]||o.getPropertyValue(e);if(J(e)){var r={};return T.each(J(e)?e:[e],function(t,e){r[e]=i.style[k(e)]||o.getPropertyValue(e)}),r}}var s="";if("string"==t(e))n||0===n?s=l(e)+":"+h(e,n):this.each(function(){this.style.removeProperty(l(e))});else for(S in e)e[S]||0===e[S]?s+=l(S)+":"+h(S,e[S])+";":this.each(function(){this.style.removeProperty(l(S))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(T(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?O.some.call(this,function(t){return this.test(y(t))},u(t)):!1},addClass:function(t){return t?this.each(function(e){E=[];var n=y(this),i=m(this,t,e,n);i.split(/\s+/g).forEach(function(t){T(this).hasClass(t)||E.push(t)},this),E.length&&y(this,n+(n?" ":"")+E.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===x?y(this,""):(E=y(this),m(this,t,e,E).split(/\s+/g).forEach(function(t){E=E.replace(u(t)," ")}),void y(this,E.trim()))})},toggleClass:function(t,e){return t?this.each(function(n){var i=T(this),o=m(this,t,n,y(this));o.split(/\s+/g).forEach(function(t){(e===x?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===x?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===x?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=M.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(T(t).css("margin-top"))||0,n.left-=parseFloat(T(t).css("margin-left"))||0,i.top+=parseFloat(T(e[0]).css("border-top-width"))||0,i.left+=parseFloat(T(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!M.test(t.nodeName)&&"static"==T(t).css("position");)t=t.offsetParent;return t})}},T.fn.detach=T.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});T.fn[t]=function(o){var r,s=this[0];return o===x?n(s)?s["inner"+e]:i(s)?s.documentElement["scroll"+e]:(r=this.offset())&&r[t]:this.each(function(e){s=T(this),s.css(t,m(this,o,e,s[t]()))})}}),z.forEach(function(e,n){var i=n%2;T.fn[e]=function(){var e,o,r=T.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:Q.fragment(n)}),s=this.length>1;return r.length<1?this:this.each(function(t,e){o=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var a=A.documentElement.contains(o);r.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!o)return T(t).remove();o.insertBefore(t,e),a&&b(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},T.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return T(t)[e](this),this}}),Q.Z.prototype=T.fn,Q.uniq=C,Q.deserializeValue=w,T.zepto=Q,T}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=f++)}function n(t,n,r,s){if(n=i(n),n.ns)var a=o(n.ns);return(m[e(t)]||[]).filter(function(t){return t&&(!n.e||t.e==n.e)&&(!n.ns||a.test(t.ns))&&(!r||e(t.fn)===e(r))&&(!s||t.sel==s)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function o(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function r(t,e){return t.del&&!y&&t.e in w||!!e}function s(t){return b[t]||y&&w[t]||t}function a(n,o,a,c,u,f,d){var p=e(n),g=m[p]||(m[p]=[]);o.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var o=i(e);o.fn=a,o.sel=u,o.e in b&&(a=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=f;var p=f||a;o.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=c;var e=p.apply(n,t._args==h?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},o.i=g.length,g.push(o),"addEventListener"in n&&n.addEventListener(s(o.e),o.proxy,r(o,d))})}function c(t,i,o,a,c){var l=e(t);(i||"").split(/\s/).forEach(function(e){n(t,e,o,a).forEach(function(e){delete m[l][e.i],"removeEventListener"in t&&t.removeEventListener(s(e.e),e.proxy,r(e,c))})})}function l(e,n){return!n&&e.isDefaultPrevented||(n||(n=e),t.each(E,function(t,i){var o=n[t];e[t]=function(){return this[i]=x,o&&o.apply(n,arguments)},e[i]=S}),(n.defaultPrevented!==h?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function u(t){var e,n={originalEvent:t};for(e in t)T.test(e)||t[e]===h||(n[e]=t[e]);return l(n,t)}var h,f=1,d=Array.prototype.slice,p=t.isFunction,g=function(t){return"string"==typeof t},m={},v={},y="onfocusin"in window,w={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:a,remove:c},t.proxy=function(n,i){var o=2 in arguments&&d.call(arguments,2);if(p(n)){var r=function(){return n.apply(i,o?o.concat(d.call(arguments)):arguments)};return r._zid=e(n),r}if(g(i))return o?(o.unshift(n[i],n),t.proxy.apply(null,o)):t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var x=function(){return!0},S=function(){return!1},T=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,o,r){var s,l,f=this;return e&&!g(e)?(t.each(e,function(t,e){f.on(t,n,i,e,r)}),f):(g(n)||p(o)||o===!1||(o=i,i=n,n=h),(p(i)||i===!1)&&(o=i,i=h),o===!1&&(o=S),f.each(function(h,f){r&&(s=function(t){return c(f,t.type,o),o.apply(this,arguments)}),n&&(l=function(e){var i,r=t(e.target).closest(n,f).get(0);return r&&r!==f?(i=t.extend(u(e),{currentTarget:r,liveFired:f}),(s||o).apply(r,[i].concat(d.call(arguments,1)))):void 0}),a(f,e,o,i,n,l||s)}))},t.fn.off=function(e,n,i){var o=this;return e&&!g(e)?(t.each(e,function(t,e){o.off(t,n,e)}),o):(g(n)||p(i)||i===!1||(i=n,n=h),i===!1&&(i=S),o.each(function(){c(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=g(e)||t.isPlainObject(e)?t.Event(e):l(e),e._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,i){var o,r;return this.each(function(s,a){o=u(g(e)?t.Event(e):e),o._args=i,o.target=a,t.each(n(a,e.type||e),function(t,e){return r=e.proxy(o),o.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){g(t)||(e=t,t=e.type);var n=document.createEvent(v[t]||"Events"),i=!0;if(e)for(var o in e)"bubbles"==o?i=!!e[o]:n[o]=e[o];return n.initEvent(t,i,!0),l(n)}}(Zepto),function(t){function e(e,n,i){var o=t.Event(n);return t(e).trigger(o,i),!o.isDefaultPrevented()}function n(t,n,i,o){return t.global?e(n||y,i,o):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function o(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function r(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:void n(e,i,"ajaxSend",[t,e])}function s(t,e,i,o){var r=i.context,s="success";i.success.call(r,t,s,e),o&&o.resolveWith(r,[t,s,e]),n(i,r,"ajaxSuccess",[e,i,t]),c(s,e,i)}function a(t,e,i,o,r){var s=o.context;o.error.call(s,i,e,t),r&&r.rejectWith(s,[i,e,t]),n(o,s,"ajaxError",[i,o,t||e]),c(e,i,o)}function c(t,e,i){var r=i.context;i.complete.call(r,e,t),n(i,r,"ajaxComplete",[e,i]),o(i)}function l(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==S?"json":b.test(t)?"script":x.test(t)&&"xml")||"text"}function h(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=h(e.url,e.data),e.data=void 0)}function d(e,n,i,o){return t.isFunction(n)&&(o=i,i=n,n=void 0),t.isFunction(i)||(o=i,i=void 0),{url:e,data:n,success:i,dataType:o}}function p(e,n,i,o){var r,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,c){r=t.type(c),o&&(n=i?o:o+"["+(a||"object"==r||"array"==r?n:"")+"]"),!o&&s?e.add(c.name,c.value):"array"==r||!i&&"object"==r?p(e,c,i,n):e.add(n,c)})}var g,m,v=0,y=window.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,S="application/json",T="text/html",E=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var i,o,c=e.jsonpCallback,l=(t.isFunction(c)?c():c)||"jsonp"+ ++v,u=y.createElement("script"),h=window[l],f=function(e){t(u).triggerHandler("error",e||"abort")},d={abort:f};return n&&n.promise(d),t(u).on("load error",function(r,c){clearTimeout(o),t(u).off().remove(),"error"!=r.type&&i?s(i[0],d,e,n):a(null,c||"error",d,e,n),window[l]=h,i&&t.isFunction(h)&&h(i[0]),h=i=void 0}),r(d,e)===!1?(f("abort"),d):(window[l]=function(){i=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),y.head.appendChild(u),e.timeout>0&&(o=setTimeout(function(){f("timeout")},e.timeout)),d)},t.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),o=t.Deferred&&t.Deferred();for(g in t.ajaxSettings)void 0===n[g]&&(n[g]=t.ajaxSettings[g]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),f(n),n.cache===!1&&(n.url=h(n.url,"_="+Date.now()));var c=n.dataType,d=/\?.+=\?/.test(n.url);if("jsonp"==c||d)return d||(n.url=h(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),t.ajaxJSONP(n,o);var p,v=n.accepts[c],y={},w=function(t,e){y[t.toLowerCase()]=[t,e]},b=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,x=n.xhr(),S=x.setRequestHeader;if(o&&o.promise(x),n.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",v||"*/*"),(v=n.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(v)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&w("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(m in n.headers)w(m,n.headers[m]);if(x.setRequestHeader=w,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=l,clearTimeout(p);var e,i=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==b){c=c||u(n.mimeType||x.getResponseHeader("content-type")),e=x.responseText;try{"script"==c?(0,eval)(e):"xml"==c?e=x.responseXML:"json"==c&&(e=E.test(e)?null:t.parseJSON(e))}catch(r){i=r}i?a(i,"parsererror",x,n,o):s(e,x,n,o)}else a(x.statusText||null,x.status?"error":"abort",x,n,o)}},r(x,n)===!1)return x.abort(),a(null,"abort",x,n,o),x;if(n.xhrFields)for(m in n.xhrFields)x[m]=n.xhrFields[m];var T="async"in n?n.async:!0;x.open(n.type,n.url,T,n.username,n.password);for(m in y)S.apply(x,y[m]);return n.timeout>0&&(p=setTimeout(function(){x.onreadystatechange=l,x.abort(),a(null,"timeout",x,n,o)},n.timeout)),x.send(n.data?n.data:null),x},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var o,r=this,s=e.split(/\s/),a=d(e,n,i),c=a.success;return s.length>1&&(a.url=s[0],o=s[1]),a.success=function(e){r.html(o?t("<div>").html(e.replace(w,"")).find(o):e),c&&c.apply(r,arguments)},t.ajax(a),this};var k=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(k(t)+"="+k(e))},p(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),r=!!t.match(/\(Macintosh\; Intel /),s=t.match(/(iPad).*OS\s([\d_]+)/),a=t.match(/(iPod)(.*OS\s([\d_]+))?/),c=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=t.match(/Windows Phone ([\d.]+)/),h=l&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),d=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),g=t.match(/(BB10).*Version\/([\d.]+)/),m=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=t.match(/PlayBook/),y=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),w=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),x=!y&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=x||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!i)&&(n.version=i[1]),o&&(e.android=!0,e.version=o[2]),c&&!a&&(e.ios=e.iphone=!0,e.version=c[2].replace(/_/g,".")),s&&(e.ios=e.ipad=!0,e.version=s[2].replace(/_/g,".")),a&&(e.ios=e.ipod=!0,e.version=a[3]?a[3].replace(/_/g,"."):null),u&&(e.wp=!0,e.version=u[1]),l&&(e.webos=!0,e.version=l[2]),h&&(e.touchpad=!0),p&&(e.blackberry=!0,e.version=p[2]),g&&(e.bb10=!0,e.version=g[2]),m&&(e.rimtabletos=!0,e.version=m[2]),v&&(n.playbook=!0),f&&(e.kindle=!0,e.version=f[1]),d&&(n.silk=!0,n.version=d[1]),!d&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),y&&(n.chrome=!0,n.version=y[1]),w&&(n.firefox=!0,n.version=w[1]),b&&(n.ie=!0,n.version=b[1]),S&&(r||e.ios)&&(n.safari=!0,r&&(n.version=S[1])),x&&(n.webview=!0),e.tablet=!!(s||v||o&&!t.match(/Mobile/)||w&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(o||c||l||p||g||y&&t.match(/Android/)||y&&t.match(/CriOS\/([\d.]+)/)||w&&t.match(/Mobile/)||b&&t.match(/Touch/)))}e.call(t,navigator.userAgent),t.__detect=e}(Zepto),function(t){function e(e,i){var c=e[a],l=c&&o[c];if(void 0===i)return l||n(e);if(l){if(i in l)return l[i];var u=s(i);if(u in l)return l[u]}return r.call(t(e),i)}function n(e,n,r){var c=e[a]||(e[a]=++t.uuid),l=o[c]||(o[c]=i(e));return void 0!==n&&(l[s(n)]=r),l}function i(e){var n={};return t.each(e.attributes||c,function(e,i){0==i.name.indexOf("data-")&&(n[s(i.name.replace("data-",""))]=t.zepto.deserializeValue(i.value))}),n}var o={},r=t.fn.data,s=t.camelCase,a=t.expando="Zepto"+ +new Date,c=[];t.fn.data=function(i,o){return void 0===o?t.isPlainObject(i)?this.each(function(e,o){t.each(i,function(t,e){n(o,t,e)})}):0 in this?e(this[0],i):void 0:this.each(function(){n(this,i,o)})},t.fn.removeData=function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.each(function(){var n=this[a],i=n&&o[n];i&&t.each(e||i,function(t){delete i[e?s(this):t]})})},["remove","empty"].forEach(function(e){var n=t.fn[e];t.fn[e]=function(){var t=this.find("*");return"remove"===e&&(t=t.add(this)),t.removeData(),n.call(this)}})}(Zepto),function(t){function e(n){var i=[["resolve","done",t.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",t.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",t.Callbacks({memory:1})]],o="pending",r={state:function(){return o},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var n=arguments;return e(function(e){t.each(i,function(i,o){var a=t.isFunction(n[i])&&n[i];s[o[1]](function(){var n=a&&a.apply(this,arguments);if(n&&t.isFunction(n.promise))n.promise().done(e.resolve).fail(e.reject).progress(e.notify);else{var i=this===r?e.promise():this,s=a?[n]:arguments;e[o[0]+"With"](i,s)}})}),n=null}).promise()},promise:function(e){return null!=e?t.extend(e,r):r}},s={};return t.each(i,function(t,e){var n=e[2],a=e[3];r[e[1]]=n.add,a&&n.add(function(){o=a},i[1^t][2].disable,i[2][2].lock),s[e[0]]=function(){return s[e[0]+"With"](this===s?r:this,arguments),this},s[e[0]+"With"]=n.fireWith}),r.promise(s),n&&n.call(s,s),s}var n=Array.prototype.slice;t.when=function(i){var o,r,s,a=n.call(arguments),c=a.length,l=0,u=1!==c||i&&t.isFunction(i.promise)?c:0,h=1===u?i:e(),f=function(t,e,i){return function(r){e[t]=this,i[t]=arguments.length>1?n.call(arguments):r,i===o?h.notifyWith(e,i):--u||h.resolveWith(e,i)}};if(c>1)for(o=new Array(c),r=new Array(c),s=new Array(c);c>l;++l)a[l]&&t.isFunction(a[l].promise)?a[l].promise().done(f(l,s,a)).fail(h.reject).progress(f(l,r,o)):--u;return u||h.resolveWith(s,a),h.promise()},t.Deferred=e}(Zepto),function(t){t.Callbacks=function(e){e=t.extend({},e);var n,i,o,r,s,a,c=[],l=!e.once&&[],u=function(t){for(n=e.memory&&t,i=!0,a=r||0,r=0,s=c.length,o=!0;c&&s>a;++a)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,c&&(l?l.length&&u(l.shift()):n?c.length=0:h.disable())},h={add:function(){if(c){var i=c.length,a=function(n){t.each(n,function(t,n){"function"==typeof n?e.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!=typeof n&&a(n)})};a(arguments),o?s=c.length:n&&(r=i,u(n))}return this},remove:function(){return c&&t.each(arguments,function(e,n){for(var i;(i=t.inArray(n,c,i))>-1;)c.splice(i,1),o&&(s>=i&&--s,a>=i&&--a)}),this},has:function(e){return!(!c||!(e?t.inArray(e,c)>-1:c.length))},empty:function(){return s=c.length=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||h.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!c||i&&!l||(e=e||[],e=[t,e.slice?e.slice():e],o?l.push(e):u(e)),
this},fire:function(){return h.fireWith(this,arguments)},fired:function(){return!!i}};return h}}(Zepto),function(){var t=QApp.util,e={eventType:"tap"};QApp.addPlugin("zepto",e,function(e,n){var i=e.options.ready;t.isFunction(i)&&(e.options.ready=function(){var t=Zepto(this.root);i.call(this,t)}),e.on("loaded",function(){e.options.bindActions&&t.each(e.options.bindActions,function(i,o){var r=i.split(":"),s=r[0],a=r[1]||n.eventType;t.isFunction(o)?Zepto(e.root).delegate(s,a,function(t){return o.call(e,t)}):Zepto(e.root).delegate(s,a,function(n){return t.isFunction(e[o])?e[o].call(e,n):void 0})})})})}(),function(t,e,n){function i(t,n){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var i in n)this.options[i]=n[i];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,n,i){var o=e.createElement("div"),r=e.createElement("div");return i===!0&&(o.style.cssText="position:absolute;z-index:9999",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),r.className="iScrollIndicator","h"==t?(i===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",r.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(i===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",r.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",n||(o.style.pointerEvents="none"),o.appendChild(r),o}function r(n,i){this.wrapper="string"==typeof i.el?e.querySelector(i.el):i.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=n,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in i)this.options[o]=i[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(t,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(t,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[a.style.transform]=this.scroller.translateZ,this.wrapperStyle[a.style.transitionDuration]=a.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var s=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},a=function(){function i(t){return s===!1?!1:""===s?t:s+t.charAt(0).toUpperCase()+t.substr(1)}var o={},r=e.createElement("div").style,s=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],n=0,i=e.length;i>n;n++)if(t=e[n]+"ransform",t in r)return e[n].substr(0,e[n].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(t,e){for(var n in e)t[n]=e[n]},o.addEvent=function(t,e,n,i){t.addEventListener(e,n,!!i)},o.removeEvent=function(t,e,n,i){t.removeEventListener(e,n,!!i)},o.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},o.momentum=function(t,e,i,o,r,s){var a,c,l=t-e,u=n.abs(l)/i;return s=void 0===s?6e-4:s,a=t+u*u/(2*s)*(0>l?-1:1),c=u/s,o>a?(a=r?o-r/2.5*(u/8):o,l=n.abs(a-t),c=l/u):a>0&&(a=r?r/2.5*(u/8):0,l=n.abs(t)+a,c=l/u),{destination:n.round(a),duration:c}};var a=i("transform");return o.extend(o,{hasTransform:a!==!1,hasPerspective:i("perspective")in r,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:i("transition")in r}),o.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),o.extend(o.style={},{transform:a,transitionTimingFunction:i("transitionTimingFunction"),transitionDuration:i("transitionDuration"),transitionDelay:i("transitionDelay"),transformOrigin:i("transformOrigin")}),o.hasClass=function(t,e){var n=new RegExp("(^|\\s)"+e+"(\\s|$)");return n.test(t.className)},o.addClass=function(t,e){if(!o.hasClass(t,e)){var n=t.className.split(" ");n.push(e),t.className=n.join(" ")}},o.removeClass=function(t,e){if(o.hasClass(t,e)){var n=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(n," ")}},o.offset=function(t){for(var e=-t.offsetLeft,n=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,n-=t.offsetTop;return{left:e,top:n}},o.preventDefaultException=function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return n.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,i=.4;return 0===t?0:1==t?1:i*n.pow(2,-10*t)*n.sin((t-e/4)*(2*n.PI)/e)+1}}}),o.tap=function(t,n){var i=e.createEvent("Event");i.initEvent(n,!0,!0),i.pageX=t.pageX,i.pageY=t.pageY,t.target.dispatchEvent(i)},o.click=function(t){var n,i=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(n=e.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,t.view,1,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),n._constructed=!0,i.dispatchEvent(n))},o.sniff=function(){var t={isAndroid:!1,osVersionN:0};if(QApp&&QApp.sniff){var e=QApp.sniff;t.isAndroid=e.android,t.osVersionN=e.osVersionN}return t}(),o}();i.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==a.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||a.eventType[t.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,i=t.touches?t.touches[0]:t;this.initiated=a.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(n.round(e.x),n.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault?t.preventDefault():a.sniff.isAndroid&&a.sniff.osVersionN<5&&t.preventDefault();var e,i,o,r,s=t.touches?t.touches[0]:t,c=s.pageX-this.pointX,l=s.pageY-this.pointY,u=a.getTime();if(this.pointX=s.pageX,this.pointY=s.pageY,this.distX+=c,this.distY+=l,o=n.abs(this.distX),r=n.abs(this.distY),!(u-this.endTime>300&&10>o&&10>r)){if(this.directionLocked||this.options.freeScroll||(o>r+this.options.directionLockThreshold?this.directionLocked="h":r>=o+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}c=this.hasHorizontalScroll?c:0,l=this.hasVerticalScroll?l:0,e=this.x+c,i=this.y+l,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+c/3:e>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+l/3:i>0?0:this.maxScrollY),this.directionX=c>0?-1:0>c?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,i),u-this.startTime>300&&(this.startTime=u,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,i,o=(t.changedTouches?t.changedTouches[0]:t,a.getTime()-this.startTime),r=n.round(this.x),s=n.round(this.y),c=n.abs(r-this.startX),l=n.abs(s-this.startY),u=0,h="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(r,s),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>o&&100>c&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>o&&(e=this.hasHorizontalScroll?a.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:r,duration:0},i=this.hasVerticalScroll?a.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:s,duration:0},r=e.destination,s=i.destination,u=n.max(e.duration,i.duration),this.isInTransition=1),this.options.snap){var f=this._nearestSnap(r,s);this.currentPage=f,u=this.options.snapSpeed||n.max(n.max(n.min(n.abs(r-f.x),1e3),n.min(n.abs(s-f.y),1e3)),300),r=f.x,s=f.y,this.directionX=0,this.directionY=0,h=this.options.bounceEasing}return r!=this.x||s!=this.y?((r>0||r<this.maxScrollX||s>0||s<this.maxScrollY)&&(h=a.ease.quadratic),void this.scrollTo(r,s,u,h)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,n=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),e==this.x&&n==this.y?!1:(this.scrollTo(e,n,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var n=this._events[t].indexOf(e);n>-1&&this._events[t].splice(n,1)}},_execEvent:function(t){if(this._events[t]){var e=0,n=this._events[t].length;if(n)for(;n>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,n,i){t=this.x+t,e=this.y+e,n=n||0,this.scrollTo(t,e,n,i)},scrollTo:function(t,e,n,i){i=i||a.ease.circular,this.isInTransition=this.options.useTransition&&n>0,!n||this.options.useTransition&&i.style?(this._transitionTimingFunction(i.style),this._transitionTime(n),this._translate(t,e)):this._animate(t,e,n,i.fn)},scrollToElement:function(t,e,i,o,r){if(t=t.nodeType?t:this.scroller.querySelector(t)){var s=a.offset(t);s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,i===!0&&(i=n.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=n.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=i||0,s.top-=o||0,s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top,e=void 0===e||null===e||"auto"===e?n.max(n.abs(this.x-s.left),n.abs(this.y-s.top)):e,this.scrollTo(s.left,s.top,e,r)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.scrollerStyle[a.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[a.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=n.round(t),e=n.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(e){var n=e?a.removeEvent:a.addEvent,i=this.options.bindToWrapper?this.wrapper:t;n(t,"orientationchange",this),n(t,"resize",this),this.options.click&&n(this.wrapper,"click",this,!0),this.options.disableMouse||(n(this.wrapper,"mousedown",this),n(i,"mousemove",this),n(i,"mousecancel",this),n(i,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(n(this.wrapper,a.prefixPointerEvent("pointerdown"),this),n(i,a.prefixPointerEvent("pointermove"),this),n(i,a.prefixPointerEvent("pointercancel"),this),n(i,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(n(this.wrapper,"touchstart",this),n(i,"touchmove",this),n(i,"touchcancel",this),n(i,"touchend",this)),n(this.scroller,"transitionend",this),n(this.scroller,"webkitTransitionEnd",this),n(this.scroller,"oTransitionEnd",this),n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,n,i=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(i=i[a.style.transform].split(")")[0].split(", "),e=+(i[12]||i[4]),n=+(i[13]||i[5])):(e=+i.left.replace(/[^-\d.]/g,""),n=+i.top.replace(/[^-\d.]/g,"")),{x:e,y:n}},_initIndicators:function(){function t(t){for(var e=a.indicators.length;e--;)t.call(a.indicators[e])}var e,n=this.options.interactiveScrollbars,i="string"!=typeof this.options.scrollbars,s=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:o("v",n,this.options.scrollbars),interactive:n,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),s.push(e)),this.options.scrollX&&(e={el:o("h",n,this.options.scrollbars),interactive:n,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),s.push(e))),this.options.indicators&&(s=s.concat(this.options.indicators));for(var c=s.length;c--;)this.indicators.push(new r(this,s[c]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,i,o,r,s=this;if(void 0===this.wheelTimeout&&s._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){s._execEvent("scrollEnd"),s.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,i=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,i=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=i,i=0),this.options.snap)return o=this.currentPage.pageX,r=this.currentPage.pageY,e>0?o--:0>e&&o++,i>0?r--:0>i&&r++,void this.goToPage(o,r);o=this.x+n.round(this.hasHorizontalScroll?e:0),r=this.y+n.round(this.hasVerticalScroll?i:0),o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),r>0?r=0:r<this.maxScrollY&&(r=this.maxScrollY),this.scrollTo(o,r,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,o,r,s,a=0,c=0,l=0,u=this.options.snapStepX||this.wrapperWidth,h=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(i=n.round(u/2),o=n.round(h/2);l>-this.scrollerWidth;){for(this.pages[a]=[],t=0,r=0;r>-this.scrollerHeight;)this.pages[a][t]={x:n.max(l,this.maxScrollX),y:n.max(r,this.maxScrollY),width:u,height:h,cx:l-i,cy:r-o},r-=h,t++;l-=u,a++}else for(s=this.options.snap,t=s.length,e=-1;t>a;a++)(0===a||s[a].offsetLeft<=s[a-1].offsetLeft)&&(c=0,e++),this.pages[c]||(this.pages[c]=[]),l=n.max(-s[a].offsetLeft,this.maxScrollX),r=n.max(-s[a].offsetTop,this.maxScrollY),i=l-n.round(s[a].offsetWidth/2),o=r-n.round(s[a].offsetHeight/2),this.pages[c][e]={x:l,y:r,width:s[a].offsetWidth,height:s[a].offsetHeight,cx:i,cy:o},l>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.x-this.startX),1e3),n.min(n.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,o=this.pages.length,r=0;if(n.abs(t-this.absStartX)<this.snapThresholdX&&n.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);o>i;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(o=this.pages[i].length;o>r;r++)if(e>=this.pages[0][r].cy){e=this.pages[0][r].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),r==this.currentPage.pageY&&(r+=this.directionY,0>r?r=0:r>=this.pages[0].length&&(r=this.pages[0].length-1),e=this.pages[0][r].y),{x:t,y:e,pageX:i,pageY:r}},goToPage:function(t,e,i,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var r=this.pages[t][e].x,s=this.pages[t][e].y;i=void 0===i?this.options.snapSpeed||n.max(n.max(n.min(n.abs(r-this.x),1e3),n.min(n.abs(s-this.y),1e3)),300):i,this.currentPage={x:r,y:s,pageX:t,pageY:e},this.scrollTo(r,s,i,o)},next:function(t,e){var n=this.currentPage.pageX,i=this.currentPage.pageY;n++,n>=this.pages.length&&this.hasVerticalScroll&&(n=0,i++),this.goToPage(n,i,t,e)},prev:function(t,e){var n=this.currentPage.pageX,i=this.currentPage.pageY;n--,0>n&&this.hasVerticalScroll&&(n=0,i--),this.goToPage(n,i,t,e)},_initKeys:function(e){var n,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(n in this.options.keyBindings)"string"==typeof this.options.keyBindings[n]&&(this.options.keyBindings[n]=this.options.keyBindings[n].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(n in i)this.options.keyBindings[n]=this.options.keyBindings[n]||i[n];a.addEvent(t,"keydown",this),this.on("destroy",function(){a.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var e,i=this.options.snap,o=i?this.currentPage.pageX:this.x,r=i?this.currentPage.pageY:this.y,s=a.getTime(),c=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(n.round(e.x),n.round(e.y)),this.isInTransition=!1),this.keyAcceleration=200>s-c?n.min(this.keyAcceleration+l,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=i?1:this.wrapperWidth:r+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=i?1:this.wrapperWidth:r-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX,r=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,r=0;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:r+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:r-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(o,r);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollY&&(r=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,r,0),this.keyTime=s}},_animate:function(t,e,n,i){function o(){var f,d,p,g=a.getTime();return g>=h?(r.isAnimating=!1,r._translate(t,e),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(g=(g-u)/n,p=i(g),f=(t-c)*p+c,d=(e-l)*p+l,r._translate(f,d),r.isAnimating&&s(o),void(3==r.options.probeType&&r._execEvent("scroll")))}var r=this,c=this.x,l=this.y,u=a.getTime(),h=u+n;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},r.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),a.removeEvent(t,"touchend",this),a.removeEvent(t,a.prefixPointerEvent("pointerup"),this),a.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var n=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=n.pageX,this.lastPointY=n.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(t,"touchmove",this),this.options.disablePointer||a.addEvent(t,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e,n,i,o,r=t.touches?t.touches[0]:t,s=a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=r.pageX-this.lastPointX,this.lastPointX=r.pageX,n=r.pageY-this.lastPointY,this.lastPointY=r.pageY,i=this.x+e,o=this.y+n,this._pos(i,o),1==this.scroller.options.probeType&&s-this.startTime>300?(this.startTime=s,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.scroller.x-i.x),1e3),n.min(n.abs(this.scroller.y-i.y),1e3)),300);this.scroller.x==i.x&&this.scroller.y==i.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.indicatorStyle[a.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[a.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&n.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&n.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=n.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=n.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=n.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=n.max(this.indicatorHeight-3*(e-this.maxPosY),8),
this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>e?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?n.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?n.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=t?250:500,i=t?0:300;t=t?"1":"0",this.wrapperStyle[a.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),i)}}},i.utils=a,"undefined"!=typeof module&&module.exports&&(module.exports=i),t.IScroll=i}(window,document,Math),function(){function t(t,a){function c(t,e){var n="translate3d("+t*_.column.width+"px, "+e*_.row.height+"px, 0)";return{transform:n,"-webkit-transform":n}}function l(t,n,i,o){var r=0,s=_.column.num-1,a=0,l=_.row.num-1,u=!1,h=!1,f=[],p=null;t>0?t=0:t<C.maxScrollX&&(t=C.maxScrollX),r=parseInt(Math.abs(t)/_.column.width),s=r+_.column.num-1,P.column!==r&&(P.column=r,u=!0),n>0?n=0:n<C.maxScrollY+I&&(n=C.maxScrollY+I),a=parseInt(Math.abs(n)/_.row.height),l=a+_.row.num-1,P.row!==a&&(P.row=a,h=!0),(u||h)&&(p=d(),N.forEach(function(t){var e=!1,n=t.column,i=t.row;if(r>n&&n+_.column.num<_.column.total){do n+=_.column.num;while(r>n);n<_.column.total&&(e=!0)}else if(n>s&&n-_.column.num>-1){e=!0;do n-=_.column.num;while(n>s)}if(a>i&&i+_.row.num<_.row.total){do i+=_.row.num;while(a>i);i<_.row.total&&(e=!0)}else if(i>l&&i-_.row.num>-1){e=!0;do i-=_.row.num;while(i>l)}e&&(f.push({type:"change",el:t.node,from:{column:t.column,row:t.row},to:{column:n,row:i}}),_.dataFilter("remove",t.node,t.column,t.row,p),t.column=n,t.row=i,_.dataFilter("add",t.node,n,i,p))}),_.builderNodes&&f.forEach(function(t){e.css(t.el,c(t.to.column,t.to.row))}),_.changeFilter(f,p))}function u(t){var e=Math.abs(t),n=parseInt(e/_.column.width),i=-(e%_.column.width>_.column.width/2?n+1:n)*_.column.width;return{move:i!==t,x:i}}function h(t){var e=Math.abs(t),n=parseInt(e/_.row.height),i=-(e%_.row.height>_.row.height/2?n+1:n)*_.row.height;return{move:i!==t,y:i}}function f(){var t=u(C.x),e=h(C.y);(t.move||e.move)&&(X&&X.scrollTo(t.x,0,300,IScroll.utils.ease.circular),H&&H.scrollTo(0,e.y,300,IScroll.utils.ease.circular),C.scrollTo(t.x,e.y,300,IScroll.utils.ease.circular))}function d(){return[P.column,P.row,P.column+_.column.num-1,P.row+_.row.num-1]}function p(t,e){return t>=P.column&&t<P.column+_.column.num-1&&e>=P.row&&e<P.row+_.row.num-1}function g(){var t=[],n=d();for(_.builderNodes&&N.forEach(function(t){e.removeNode(t.node)}),N=[],T=0;T<_.column.num;T++)for(E=0;E<_.row.num;E++)_.builderNodes&&(k=e.builder(_.template).children[0],e.css(k,c(T,E)),A.appendChild(k)),N.push({column:T,row:E,node:k}),_.dataFilter("add",k||null,T,E,n),t.push({type:"create",el:k||null,from:{},to:{column:T,row:E}});_.changeFilter(t,n),O.trigger("ready")}function m(t,e,n,i){D?t<_.moreDis&&t>C.maxScrollX-_.moreDis&&(D=!1):t>=_.moreDis?(D=!0,O.trigger("more",{axis:"x",seq:"prev"})):t<=C.maxScrollX-_.moreDis&&(D=!0,O.trigger("more",{axis:"x",seq:"next"})),L?e<_.moreDis&&e>C.maxScrollY-_.moreDis&&(L=!1):e>=_.moreDis?(L=!0,O.trigger("more",{axis:"y",seq:"prev"})):e<=C.maxScrollY-_.moreDis&&(L=!0,O.trigger("more",{axis:"y",seq:"next"}))}var v,y,w,b,x,S,T,E,k,C=null,O=function(){var t=function(){};return e.extend(t.prototype,e.CustEvent),new t}(),P={column:0,row:0},_=e.extend({},s,a),A=t&&t.children[0],N=[],X=_.bindScrolls.x||null,H=_.bindScrolls.y||null,D=!1,L=!1,Y=!1,M=!1,I=0;if(!A)throw"Dom Structure Error!";return _.scrollOpt=e.extend({},i,_.scrollOpt),_.scrollOpt.scrollX&&_.column?(Y=!0,_.column.num=_.column.num||parseInt(e.size(t).width/_.column.width)+2,e.css(A,"width",Math.max(_.column.total*_.column.width,e.size(A.parentNode).width+1)+"px")):_.column={num:1,total:1,width:1},_.scrollOpt.scrollY&&_.row?(M=!0,_.row.num=_.row.num||parseInt(e.size(t).height/_.row.height)+2,e.css(A,"height",Math.max(_.row.total*_.row.height,e.size(A.parentNode).height+1)+"px")):_.row={num:1,total:1,height:1},C=new n(t,_.scrollOpt),(Y||M)&&(C.on("scroll",function(){l(C.x,C.y,C.directionX,C.directionY)}),C.on("scrollEnd",function(){X&&C.x<=0&&C.x>=C.maxScrollX&&X.scrollTo(C.x,0),H&&C.y<=0&&C.y>=C.maxScrollY&&H.scrollTo(0,C.y)}),e.delay(g)),C.on("scroll",function(){m(C.x,C.y,C.directionX,C.directionY)}),C.on("scrollEnd",function(){X&&C.x<=0&&C.x>=C.maxScrollX&&X.scrollTo(C.x,0),H&&C.y<=0&&C.y>=C.maxScrollY&&H.scrollTo(0,C.y)}),X&&(C.on("scroll",function(){C.x<=0&&C.x>=C.maxScrollX&&X.scrollTo(C.x,0)}),X.on("scroll",function(){X.x<=0&&X.x>=X.maxScrollX&&X.x>=C.maxScrollX&&(C.scrollTo(X.x,C.y),l(X.x,C.y,X.directionX,0))})),H&&(C.on("scroll",function(){C.y<=0&&C.y>=C.maxScrollY&&H.scrollTo(0,C.y)}),H.on("scroll",function(){H.y<=0&&H.y>=H.maxScrollY&&H.y>=C.maxScrollY&&(C.scrollTo(C.x,H.y),l(C.x,H.y,0,H.directionY))})),_.topOffsetRefresh&&(_.topOffsetRefresh===!0&&(_.topOffsetRefresh={}),e.extend(!0,_.topOffsetRefresh,o),v=document.createElement("div"),w="drag",e.css(v,{position:"absolute",height:_.topOffsetRefresh.distance+"px",width:"100%",top:-_.topOffsetRefresh.distance+"px"}),v.innerHTML=_.topOffsetRefresh.dragContent,x=function(){"waitEnd"===w&&(w="startRefresh",v.innerHTML=_.topOffsetRefresh.loadContent,e.css(A,{marginTop:_.topOffsetRefresh.distance+"px"}),C.scrollTo(C.x,C.y-_.topOffsetRefresh.distance,0),_.refresh("top"))},A.addEventListener("touchend",x,!1),C.on("scroll",function(){"drag"===w&&C.y>_.topOffsetRefresh.distance&&(w="waitEnd",v.innerHTML=_.topOffsetRefresh.endContent),"waitEnd"===w&&C.y<=_.topOffsetRefresh.distance&&(w="drag",v.innerHTML=_.topOffsetRefresh.dragContent)}),e.delay(function(){e.insertElement(A,v,"beforeend")},100)),_.bottomOffsetRefresh&&(_.bottomOffsetRefresh===!0&&(_.bottomOffsetRefresh={}),e.extend(!0,_.bottomOffsetRefresh,r),y=document.createElement("div"),b=_.row.total*_.row.height<e.size(A.parentNode).height+1?"none":"drag",e.css(y,{position:"absolute",height:_.bottomOffsetRefresh.distance+"px",width:"100%",bottom:-_.bottomOffsetRefresh.distance+"px"}),y.innerHTML="",S=function(){"waitEnd"===b&&(b="startRefresh",I=_.bottomOffsetRefresh.distance,y.innerHTML=_.bottomOffsetRefresh.loadContent,e.css(A,{height:e.size(A).height+I+"px"}),e.css(y,{bottom:0}),C.refresh(),_.refresh("bottom"))},A.addEventListener("touchend",S,!1),C.on("scroll",function(){"drag"===b&&C.y<C.maxScrollY-_.bottomOffsetRefresh.distance&&(b="waitEnd"),"waitEnd"===b&&C.y>=C.maxScrollY-_.bottomOffsetRefresh.distance&&(b="drag")}),e.delay(function(){e.insertElement(A,y,"beforeend")},100)),O.trigger("init"),e.extend(O,{scroll:C,refresh:function(){C.refresh()},scrollTo:function(){C.scrollTo.apply(C,e.makeArray(arguments))},gotoTop:function(t,n){n=parseInt(n)||300,t&&_.topOffsetRefresh&&"startRefresh"!==w&&(w="startRefresh",v.innerHTML=_.topOffsetRefresh.loadContent,e.css(A,{marginTop:_.topOffsetRefresh.distance+"px"}),e.delay(function(){_.refresh("top")},n)),C.scrollTo(C.x,0,n)},setTopRefresh:function(t){_.topOffsetRefresh&&(v.innerHTML=_.topOffsetRefresh[t?"successContent":"failContent"],e.delay(function(){e.animate(A,{marginTop:"0"},50,"ease-out"),e.delay(function(){w="drag",v.innerHTML=_.topOffsetRefresh.dragContent},80)},_.topOffsetRefresh.displayDelay),_.bottomOffsetRefresh&&t&&(b=_.row.total*_.row.height<e.size(A.parentNode).height+1?"none":"drag",y.innerHTML=""))},setBottomRefresh:function(t,n){if(_.bottomOffsetRefresh){var i=t?"":_.bottomOffsetRefresh.failContent;b="drag",n&&(b="end",i=_.bottomOffsetRefresh.endContent),y.innerHTML=i,n||!t&&_.bottomOffsetRefresh.failContent?(e.delay(function(){C.scrollTo(C.x,C.y+I,_.bottomOffsetRefresh.displayDelay/2)},_.bottomOffsetRefresh.displayDelay/2),e.delay(function(){e.css(A,{height:e.size(A).height-I+"px"}),e.css(y,{bottom:-I+"px"}),I=0,C.refresh()},_.bottomOffsetRefresh.displayDelay)):t?(e.css(A,{height:e.size(A).height-I+"px"}),e.css(y,{bottom:-I+"px"}),I=0,C.refresh(),e.delay(function(){C.scrollTo(C.x,C.y-2*_.bottomOffsetRefresh.distance,500)})):(e.css(A,{height:e.size(A).height-I+"px"}),e.css(y,{bottom:-I+"px"}),I=0,C.refresh())}},fixPosition:function(){e.delay(f)},appendNode:function(t,n,i){t&&A&&(e.css(t,c(n,i)),e.contains(A,t)||A.appendChild(t))},getShowArea:d,checkShow:function(t){return t.some(function(t){return p(t[0],t[1])})},resetNum:function(t,e){_.column.num=t,_.row.num=e,g()},resetTotal:function(t,n,i,o){_.column.total=t,_.row.total=n,_.scrollOpt.scrollX&&e.css(A,"width",Math.max(_.column.total*_.column.width,e.size(A.parentNode).width+1)+"px"),_.scrollOpt.scrollY&&e.css(A,"height",Math.max(_.row.total*_.row.height,e.size(A.parentNode).height+1)+"px"),_.bottomOffsetRefresh&&(b=_.row.total*_.row.height<e.size(A.parentNode).height+1?"none":"drag",y.innerHTML=""),e.delay(function(){C.refresh(),l(C.x,C.y,i||0,o||0)})},destroy:function(){O.off(),C.destroy(),C=null,_.topOffsetRefresh&&e.removeEvent(A,x),_.bottomOffsetRefresh&&e.removeEvent(A,S),_=null,A=null,H&&H.destroy(),H=null,X&&X.destroy(),X=null,N.forEach(function(t){t.node&&(e.removeNode(t.node),t.node=null)}),N.length=0,N=null}})}var e=QApp.util,n=e.iScroll=window.IScroll,i={scrollX:!1,scrollY:!0,freeScroll:!1,mouseWheel:!1,probeType:3,preventDefault:!1},o={distance:50,displayDelay:1e3,dragContent:"drag to refresh",endContent:"stop to refresh",loadContent:"loading",successContent:"success",failContent:"failure"},r={distance:50,displayDelay:1e3,loadContent:"loading",endContent:"end",failContent:""},s={builderNodes:!0,template:'<div class="item"></div>',moreDis:50,bindScrolls:{},scrollOpt:{},dataFilter:e.noop,changeFilter:e.noop,refresh:e.noop,topOffsetRefresh:!1,bottomOffsetResfresh:!1};t.iScroll=n,t.setTopRefreshOpt=function(t){e.extend(!0,o,t)},t.setBottomRefreshOpt=function(t){e.extend(!0,r,t)},window.NScroll=QApp.util.nScroll=t}(),function(){function t(t){return JSON.parse(JSON.stringify(t.$model))}function e(t,n){"array"===r.type(t)?(n=r.mix(!0,{},{_:n}),t={_:t}):n=r.mix(!0,{},n);for(var i in t)if("undefined"!=typeof n[i]&&t.hasOwnProperty(i)&&"hasOwnProperty"!==i)switch(r.type(t[i])){case"object":e(t[i],n[i]);break;case"array":for(r.each(n[i],function(n,o){var r=typeof t[i][n];"object"===r&&null!==t[i][n]?e(t[i][n],o):n>=t[i].size()?t[i].push(o):t[i].set(n,o)});t[i].length>n[i].length;)t[i].pop();break;default:t[i]=n[i]}}function n(t,e){return((t.hasAttributes()?r.slice(t.attributes):[]).filter(function(t){return!t.name.indexOf(e)})[0]||{}).name}function i(t,e,n){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),r.mix(i,n),t.dispatchEvent(i)}function o(t,e){c.forEach(function(n){e.on(n,function(){i(t,n.toLowerCase())})})}var r=window.avalon||QApp.avalon,s=QApp.util.nScroll,a={showLines:10,lineHeight:0,getData:function(){}},c=["beforeScrollStart","scrollCancel","scrollStart","scroll","scrollEnd","flick","zoomStart","zoomEnd"],l=100;r&&(r.bindingHandlers.iscroll=function(c,u){var h,f,d=c.element,p=c.value.match(/[^, ]+/g),g=u[0],m=r.mix({},a,g.iscroll,d.dataset,p&&p[1]?g[p[1]]:null),v=m.id||p&&"$"!==p[0]&&p[0]||"iscroll"+setTimeout("1"),y=d.children[0],w=d.children[0]&&d.children[0].children[0],b=y&&n(y,"ms-each"),x=w&&n(w,"ms-repeat");if(g.scrolls=g.scrolls||{},d.removeAttribute("ms-iscroll"),b||x){var S,T,E,k=[],C=0;b?(S=y.getAttribute(b),y.setAttribute(b,S+"$")):x&&(S=w.getAttribute(x),w.setAttribute(x,S+"$")),T=S+"$",g.$watch(S,function(){var n,r=g[S],a=g[T],c=a.length;if(C=r.size()>=m.showLines?m.showLines:r.size(),h){for(a.forEach(function(t){t.$unwatch()}),n=0;C>n;n++)n>=c&&(a[n]?a.set(n,t(r[n])):(a.push(t(r[n])),h.appendNode(d.children[0].children[n],1,n)),a[n].$watch("$all",function(t){return function(e,n){r[t][e]=n}}(n)),r[n].$watch("$all",function(t){return function(e,n){a[t][e]=n}}(n)));for(n=C;c>n;n++)a.removeAt(C);k=f.children,h.resetNum(1,C),h.resetTotal(1,r.size()),h.scrollTo(0,0,0)}else{if(a.pushArray(JSON.parse(JSON.stringify(g.$model[S].slice(0,C)))),f=d.children[0],k=f.children,m.lineHeight=m.lineHeight||k[0]&&k[0].offsetHeight,!m.lineHeight)throw"Can not know line height!";h=g.scrolls[v]=s(d,{builderNodes:!1,row:{height:m.lineHeight,num:C,total:r.size()},scrollOpt:m,topOffsetRefresh:m.topOffsetRefresh,bottomOffsetRefresh:m.bottomOffsetRefresh,refresh:function(t){"function"==typeof m.refresh?m.refresh.call(h,t):"string"==typeof m.refresh&&"function"==typeof g[m.refresh]?g[m.refresh].call(h,t):i(d,"refresh",{type:t})},dataFilter:function(n,i,o,s){var c=s%C;C&&("add"===n?(h.appendNode(k[c],o,s),e(a[c],t(r[s])),a[c].$watch("$all",function(t,e){r[s][t]=e}),r[s].$watch("$all",function(t,e){a[c][t]=e})):(r[s].$unwatch(),a[c].$unwatch()))}}),h.on("more",function(t){"y"===t.axis&&"next"===t.seq&&("function"==typeof m.getData?m.getData.call(h,r.length):"string"==typeof m.getData&&"function"==typeof g[m.getData]?g[m.getData].call(h,r.length):i(d,"getdata",{start:r.length}))}),o(d,h.scroll)}}),g[S].$watch("length",function(t){E&&clearTimeout(E),E=setTimeout(function(){h&&h.resetTotal(0,g[S].size(),0,1)},l)})}else h=g.scrolls[v]=s(d,m),o(d,h),g.$watch("$all",function(){E&&clearTimeout(E),E=setTimeout(function(){h&&h.refresh()},l)});g.$remove=function(){h&&(h.destroy(),h=null)}})}(),function(){var t=QApp.util,e=t.iScroll,n=300,i="qapp-scroll",o={preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)$/}};QApp.addPlugin(["scroll","ui.scroll"],o,function(o,r,s){function a(){c&&clearTimeout(c),c=t.delay(function(){l&&l.refresh()},n)}var c,l;return o.on("ready",function(){var n=document.createElement(i);t.appendNodes(n,o.nodes),o.root.appendChild(n),l=o.scroll=new e(o.root,r),o.root.addEventListener("DOMSubtreeModified",function(){a()},!1),o.refreshScroll=a,t.delay(a)}),o.on("destroy",function(){c&&clearTimeout(c),l&&l.destroy()}),{}})}(),function(){var t=QApp.util,e=t.iScroll,n=300,i={scrollX:!1,scrollY:!0,freeScroll:!1,mouseWheel:!1,probeType:3,preventDefault:!1};QApp.addWidget("scroll",function(o,r,s){if(e){var a,c={},l=function(){a&&clearTimeout(a),a=t.delay(function(){c&&c.refresh&&c.refresh()},n)};if(t.css(o,"overflow","hidden"),t.addEvent(o,"DOMSubtreeModified",function(){l()}),t.delay(l),s)if(s.isShow){var u=new e(o,t.extend({},i,r));t.each(s.widgets,function(t,e){e===c&&(s.widgets[t]=u)}),c=u}else{var h=s._events.show=s._events.show||[];h.unshift({callback:function(){var n=new e(o,t.extend({},i,r));t.each(s.widgets,function(t,e){e===c&&(s.widgets[t]=n)}),c=n},ctx:s})}else{var u=new e(o,t.extend({},i,r));c=u}return c}})}(),function(){function t(){var t={},e=w.values.QN241;try{t=JSON.parse(e)}catch(n){try{t=JSON.parse(decodeURIComponent(e))}catch(i){}}return t}function e(){return{nickName:w.values.QN42,userName:w.values._q}}function n(){function t(){var t=null;try{t=JSON.parse(v.getItem(i))}catch(e){}return v.removeItem(i),t}function e(t){try{v.setItem(i,JSON.stringify(t))}catch(e){}}if(I={exists:A.hyApp||A.pc,config:function(t){m.extend(Y,t)},invoke:function(t,e,n,i){var o=!1;I.exists?(M.invoke(t,function(t){o||(o=!0,e(t))},n),0!==i&&m.delay(function(){o||(o=!0,e({ret:!1,errcode:-1}))},i||Y.bridgeDelay)):e({ret:!1,errmsg:"Not Found Hy",errcode:-1})},on:function(t,e){M.on(t,e||m.noop)},once:function(t,e){M.once(t,e||m.noop)},register:function(t,e,n){0===t.indexOf("once")?I[t]=function(t){I.once(e,t||_noop)}:0===t.indexOf("on")?I[t]=function(t){I.on(e,t||_noop)}:I[t]=function(t,i){m.isFunction(t)&&(i=t,t={}),I.invoke(e,i||m.noop,t,n)}}},I.register("back","webview.back",0),I.register("navRefresh","navigation.refresh",0),I.register("open","webview.open",0),I.register("setWebViewAttribute","webview.attribute"),I.register("getHistory","view.list"),I.register("checkApi","checkJsApi"),I.register("login",k,0),I.register("enableGesture","qunarnative.gesturesView"),I.register("hideLoading","webview.hideLoadView"),I.register("onNavClick","navigation.click"),I.register("onReceiveData","webview.onReceiveData"),I.register("onShow","webview.onShow"),I.register("onceShow","webview.onShow"),I.register("onHide","webview.onHide"),I.register("onBack","webview.targetClosed"),I.register("onResize","webview.resize"),I.register("onLoadingClose","loadingview.close"),M&&g.sniff.ios){var n=80011092,i="Hy_back_param",o=function(){var t=function(){};return m.extend(t.prototype,m.CustEvent),new t}();if(N.indexOf(H)>-1&&L&&L.vid&&parseInt(L.vid)<n){var r=I.open,s=I.back;I.onReceiveData=function(t){o.on("receiveData",t)},I.onShow=function(t){o.on("show",t)},I.onHide=function(t){o.on("hide",t)},I.onBack(function(){var e=t();e&&o.trigger("receiveData",e),o.trigger("show")}),I.back=function(t){t.data&&e(t.data),s(t)},I.open=function(t){var e=t.url,n=e.split("#")[1],i="_hy_param_"+Date.now();n&&(v.setItem(i,n),t.url=e.split("#")[0]+"#"+i),o.trigger("hide"),r(t)}}var a,c=location.hash.substring(1);0===c.indexOf("_hy_param_")&&(a=v.getItem(c),v.removeItem(c),location.hash=a)}}function i(t){v.setItem("perViewName",v.getItem("curViewName")),v.setItem("curViewName",t)}function o(t){var e;switch(t.style){case"icon":e='<i class="yo-ico">&#x'+escape(t.icon).toLowerCase().replace("%u","")+";</i>";break;case"location":e="<h2>"+(t.location||t.text)+'</h2><i class="yo-ico">&#xf033;</i>';break;default:e=t.text}return e}function r(t,e){if(t){var n={left:t.querySelector(O.buttons.left),title:t.querySelector(O.buttons.title),right:t.querySelector(O.buttons.right)};x.forEach(function(t){n[t]&&(e[t]?n[t].innerHTML=O.buildNavHTML(e[t]):"left"===t&&(n[t].innerHTML=O.buildNavHTML({style:"icon",icon:"f07d"})))})}}function s(t){A.hyApp&&I.navRefresh(t)}function a(t){m.dispatchEvent(t,"tap")}function c(t){I.onNavClick(function(e,n){var i,o={};if(b.trigger("nav:"+e.button)===!1&&(o.data=!0),O.buttons[e.button]&&(i=t.querySelector(O.buttons[e.button]),i&&i.hasAttribute("preventNative")&&(o.data=!0),i&&!R))if("left"!=e.button&&"back"!=e.button||o.data)a(i);else{var r=I.back;I.back=m.noop,a(i),I.back=r}m.blur(),R||(R=setTimeout(function(){clearTimeout(R),R=null},1e3)),n(o)})}function l(t,e){var n={};return t&&(n=m.isFunction(t)?t(e)||{}:m.extend(!0,{},t),x.forEach(function(t){n[t]&&(n[t].style?"icon"===n[t].style&&(n[t].icon=unescape("%u"+n[t].icon)):n[t].style="text")})),n.left||(n.left={style:"icon",icon:""}),n}function u(){g.router.on("willForward",function(t){return g.open(t.view,{param:t.query}),!1}),g.router.addOpenFilter(function(t){if(t.length&&t[0]){var e,n,o=t[0],r=o.split(":")[0],s=t[1]||{},a=s.param||{},c=O.viewOptions[r]||{},u=c.nav||{},h=c.type||u.type||O.webViewType,f=c.loadViewType||u.loadViewType||O.loadViewType||"auto";o.indexOf(":new")>-1&&(o=o.replace(":new",":"+m.getUniqueID())),c.schema?(i(o),n=c.schema,0===n.indexOf("//")&&(n=H+":"+n),location.href=n):(e=c.url?c.url:g.router.buildUrl({view:o,query:a}),S[o]={complete:s.onComplete,hide:s.onHide},u=l(u,a),I.open({name:T+"-"+O.hybridId+"-"+o,loadview:f,url:e,type:h,navigation:u})),g.gesture&&(g.gesture.disable(),setTimeout(function(){g.gesture.enable()},1e3))}return!1}),b.trigger("initFilter")}function h(t){window.QunarJSBridge?t(window.QunarJSBridge):document.addEventListener("QunarJSBridgeReady_v1",function(){t(window.QunarJSBridge)},!1)}function f(t,e){g.defineView(t,{html:"<i></i>",styles:{backgroundColor:"transparent"},bindEvents:{show:function(){var t=this,n=!1;e.render.call(t,t.param,function(){A.hyApp&&u()},function(e){!n&&t.hide&&(n=!0,t.complete(e),t.hide())})}},extra:{moveEnter:{duration:0}}})}function d(t,e){function n(){c?window[a]=i:delete window[a],m.removeNode(l)}var i,o,r={},s=!1,a="",c=!1,l=document.createElement("script");l.src=t.url;var u=m.parseURL(l.src);return u.query=m.extend(u.query,t.data),t.jsonpCallback?(c=!0,i=window[t.jsonpCallback]):t.jsonpCallback="QApp_"+ +new Date+C++,a=t.jsonpCallback,u.query[t.jsonp]=a,t.cache===!1&&(u.query.__rnd=+new Date+C++),r.abort=function(){s=!0,e(null,{error:!0,type:"Abort"}),n()},window[a]=function(t){o&&clearTimeout(o),s||(e(t),n())},o=m.delay(function(){e(null,{error:!0,type:"Timeout"}),n()},t.timeout),l.async=!0,l.charset=t.charset,l.src=u.toUrl(),l.onerror=function(){o&&clearTimeout(o),e(null,{error:!0,type:"Fail"}),n()},document.head.appendChild(l),r}function p(t){var n=location.href.split("#")[0]+"#__login_transfer";A.hyApp?I.checkApi({jsApiList:[k]},function(i){i&&i.data&&i.data[k]?I.login({shouldOpenLogin:!0},function(){m.isFunction(t)&&t(e())}):(I.open({type:"navibar-normal",navigation:{title:{style:"text",text:""}},url:O.loginUrl+"?ret="+encodeURIComponent(n)+"&showHeader=false&showFooter=false"}),I.onceShow(function(){m.isFunction(t)&&t(e())}))}):location.href=O.loginUrl+"?ret="+encodeURIComponent(n)+"&goback=1"}var g=window.QApp,m=g.util,v=window.localStorage,y=new m.Deferred,w={originalString:document.cookie,read:function(){this.originalString=document.cookie},_getCookieHash:function(){for(var t=this.originalString.split(";"),e={},n=0;n<t.length;n++)-1!=t[n].indexOf("=")&&(e[t[n].split("=")[0].replace(/(^\s*)/g,"").replace(/(\s*$)/g,"")]=unescape(t[n].split("=")[1]).replace(/(^\s*)/g,"").replace(/(\s*$)/g,""));return e},setCookie:function(t,e,n,i,o){var r=t+"="+escape(e);n&&(r+="; expires="+n.toGMTString()),i&&(r+="; domain="+i),o&&(r+="; path="+o),document.cookie=r,this.originalString=document.cookie,this.values=this._getCookieHash()},deleteCookie:function(t,e,n){this.setCookie(t,"",new Date(1),e,n)},refresh:function(){this.read(),w.values=w._getCookieHash()}};w.refresh();var b=g.hy=function(){var t=function(){};return m.extend(t.prototype,m.CustEvent),new t}(),x=["left","title","right"],S={},T="hy",E=!1,k="login.start",C=0,O={indexView:"index",hybridId:"hy",schemaProtocols:["qunartraveliphone","qunartravelaphone"],barHeight:20,hdHeight:44,webViewType:"navibar-normal",loadViewType:"auto",jsonParam:!1,refreshH5Header:!1,buildNavHTML:o,viewOptions:{},bindEvents:{},ready:null,useAppHeader:!0,useTransfer:!0,buttons:{left:"header .regret",title:"header .title",right:"header .affirm"},loginUrl:"http://user.qunar.com/mobile/login.jsp",logoutUrl:"http://user.qunar.com/passport/logout.jsp",checkLoginUrl:"https://user.qunar.com/webApi/getLoginState.jsp?format=js"},P=location.href,_=P.match(/hybridid=([^\#^\&]*)/);_&&(O.hybridId=_[1]);var A,N=["qunarhyiphone","qunariphonepro","qunariphonelife","qunariphone","qunarhyaphone","qunaraphonelife","qunaraphone"],X=navigator.userAgent.toLowerCase(),H=null,D=(N.concat(O.schemaProtocols)||[]).some(function(t){return X.indexOf(t)>-1?(H=t,!0):void 0}),L=t();b.deviceInfo=L,b.getLoginInfo=e,b.sniff=A={app:D,qunarApp:D,hyApp:!1,independent:X.indexOf("independent")>-1||X.indexOf("qunarhy")>-1,touch:!D&&!g.sniff.pc,pc:g.sniff.pc};var Y={timeout:5e3,bridgeDelay:600},M=null,I=b.bridge={},R=null;g.addPlugin("hy",O,function(t,e){t.refreshHeader=function(n){n=l(n),e.refreshH5Header&&r(t.root,n),s(n)}}),g.setGlobalPlugins("hy"),g.defineView("__login_transfer",{html:"",ready:function(){A.hyApp?I.back():history.go(-3)}}),b.checkLogin=function(t){d({url:O.checkLoginUrl,jsonp:"callback",timeout:5e3},function(e,n){m.isFunction(t)&&t(n?{ret:!1}:{ret:!0,login:e.ret&&e.data&&2==e.data.loginState,state:e.data&&e.data.loginState||0})})},b.login=function(t,n){n?b.checkLogin(function(n){n.ret&&n.login?m.isFunction(t)&&t(e()):p(t)}):p(t)},b.logout=function(){location.href=O.logoutUrl+"?ret="+encodeURIComponent(location.href)},y.done(function(){if(m.isFunction(O.ready)&&O.ready(),m.each(O.viewOptions,function(t,e){e.render&&f(t,e)}),A.hyApp){var t=g.hash.analyzeHash(),e=t.view,n=t.view.split(":")[0],o=t.query||{},r=O.viewOptions[n]||{},s=r.nav||{},a=r.type||s.type||O.webViewType,d=r.loadViewType||s.loadViewType||O.loadViewType,p=r.fixParam||m.noop;I.getHistory(function(t){if(t.ret&&t.data.list){var n=t.data.list.length;E=t.data.list.map(function(t,i){return i==n-1?T+"-"+O.hybridId+"-"+e:m.isString(t)?t:t.name})}}),g.config({type:"mobile",hashRouter:!0,autoInit:!1,root:{top:"navibar-normal"==a?function(){if(m.isNumber(O.hdHeight)){var t=parseInt(window.dpr)||1;return-t*O.hdHeight}return m.isFunction(O.hdHeight)?-O.hdHeight():0}():"navibar-none"==a&&g.sniff.ios?function(){var t=parseInt(window.dpr)||1;return t*parseInt(O.barHeight)}():0}}),"hold"==d&&I.onLoadingClose(function(t,e){e({data:!0})}),g.ready(function(){function t(t,e){var n=r["on"+t.replace(/\w/,function(t){return t.toUpperCase()})];b.trigger(t,e),m.isFunction(n)&&n.call(e)}p(o),s=l(s,o),I.navRefresh(s),I.setWebViewAttribute({name:T+"-"+O.hybridId+"-"+e}),r.disableBackGestrue&&I.enableGesture({enable:!1}),i(e),g.router.getCurViewName=function(){return v.getItem("curViewName")},g.router.getPreViewName=function(){return v.getItem("perViewName")},g.router.home=function(t){var i;if(E&&E.length){for(var o=E.length-1;o>-1;o--)if(E[o-1]&&0!==E[o-1].indexOf(T+"-"+O.hybridId)){i=E[o];break}i||(i=E[0])}else i=O.indexView;I.back({name:i,data:{name:e,view:n,hybridId:O.hybridId,data:t}})},g.exit=g.router.exit=function(t){var i;if(E&&E.length){for(var o=E.length-2;o>-1;o--)if(E[o]&&0!==E[o].indexOf(T+"-"+O.hybridId)){i=g.sniff.ios?E[o]:E[o+1];break}i||(i=E[0])}I.back({name:i,data:{name:e,view:n,hybridId:O.hybridId,data:t}}),g.sniff.ios||I.back()},g.router.back=function(t,i){var o,r={data:{name:e,view:n,hybridId:O.hybridId,data:i}};t=t||1,1!=t&&E&&E.length&&(o=E.length>t?E[E.length-t-1]:E[0]),o&&(r.name=o),I.back(r)},g.router["goto"]=function(t,e,n,i){g.router.backTo(t,n,i)===!1&&g.router.open(t,e)},g.router.backTo=function(t,i,o,r){var s,a;if(r||0===t.indexOf(T+"-"+O.hybridId)||(t=T+"-"+O.hybridId+"-"+t),o||(o=t.indexOf(":")>-1),o&&(t=t.replace(/\:0$/,"")),E&&E.length){if(o){for(a=E.length-1;a>-1;a--)if(E[a]&&E[a]==t){s=t;break}}else for(a=E.length-1;a>-1;a--)if(E[a]&&new RegExp(t+"$").test(E[a])){s=E[a];break}}else s=t;return s?(I.back({name:s,data:{name:e,view:n,hybridId:O.hybridId,data:i}}),!0):!1},g.open(n,{param:o,atBottom:!0},function(o){if(o){var s,a=o.complete,l=!0,h=!1,f=r.bindEvents||{};m.each(f,function(t,e){m.isFunction(e)&&(/^nav:/.test(t)?b.on(t,e):o.on(t,e))}),t("show",o),m.isFunction(f.show)&&f.show.call(o),t("actived",o),m.isFunction(f.actived)&&f.actived.call(o),o.hide=function(t){I.back({data:{view:n,name:e,data:t||s}})},o.complete=function(t){s=t,m.isFunction(a)&&a.call(o,t)},o.hideLoading=function(){I.hideLoading()},I.onReceiveData(function(t){o.trigger("receiveData",t),t&&t.view&&S[t.view]&&(m.isFunction(S[t.view].complete)&&S[t.view].complete(t.data),m.isFunction(S[t.view].hide)&&S[t.view].hide())}),I.onHide(function(){h||(h=!0,I.onShow(function(){w.refresh(),t("actived",o),l||(l=!0,i(e),o.trigger("actived"),g.router.trigger("back",o))})),t("deactived",o),l&&(l=!1,o.trigger("deactived"))}),n==O.indexView?g.router.trigger("init",o):g.router.trigger("forward",o)}c(o.root),u()})}),g.sniff.android&&g.checkResize&&hy.onResize(function(){m.delay(g.checkResize,10)})}else if(A.qunarApp)g.config({indexView:O.indexView}),g.router.on("init",function(){h(function(t){t.call("hideNativeBar")})}),g.on("close",function(){h(function(t){t.call("closeWeb",{},function(t){})})});else if(g.config({indexView:O.indexView}),g.sniff.pc||g.sniff.webApp)g.sniff.webApp&&(A.webApp=!0,g.config({type:"app"}));else{A.mobileApp=!0;var y=!1;(g.sniff.browsers.wechat||g.sniff.browsers.weibo)&&g.config({type:"mobile",root:{top:O.useAppHeader?function(){if(m.isNumber(O.hdHeight)){var t=parseInt(window.dpr)||1;return-t*O.hdHeight}return m.isFunction(O.hdHeight)?-O.hdHeight():0}():0}}),O.useTransfer&&g.router.on("willForward",function(t){return g.router.transfer(t.view,t.query),y||(window.addEventListener("pageshow",function(){g.router.resetHistory()},!0),y=!0),!1})}}),b.config=function(t){if(t&&(t.indexView=t.indexView||g.config().indexView,m.extend(!0,O,t),m.each(O.bindEvents,function(t,e){m.isFunction(e)&&b.on(t,e)}),g.config({indexView:O.indexView,jsonParam:O.jsonParam})),g.sniff.browsers.wechat){var e=(g.router.getCurInfo()||{}).view.split(":")[0];if(e&&O.viewOptions[e]){var n=O.viewOptions[e].nav;n&&n.title&&(document.title=n.title.text)}}return O},g.addReadyDependencies(y),A.qunarApp?(document.addEventListener("WebViewJavascriptBridgeReady",function(t){M=t.bridge,A.qunarApp=!1,A.hyApp=!0,n(),m.delay(function(){y.resolve()},1)}),m.ready(function(){m.delay(function(){y.resolve()},Y.bridgeDelay)})):m.ready(function(){y.resolve()})}();