!function(){"use strict";function e(e,t){pe[e]=t()}function t(e){return pe[e]}function n(){}function o(e){var t,n=[];for(t in e)n.push(t);return n}function r(e,t){var n=ze[e===ye||e!==e?e:Ne.call(e)]||e&&e.nodeName||"#";return e===be?n="Undefined":"#"===n.charAt(0)&&(n=e==e.document&&e.document!=e?"Window":9===e.nodeType?"Document":e.callee?"Arguments":isFinite(e.length)&&e.item?"NodeList":Ne.call(e).slice(8,-1)),t?t===n:n}function i(e){return r(e,"Object")}function a(e){return r(e,"Array")}function c(e){return r(e,"String")}function u(e){return r(e,"Function")}function s(e){return e&&1===e.nodeType?e instanceof Node?me:qe.test(Ne.call(e)):we}function f(e){return r(e,"Number")}function l(e){return r(e,"Object")&&Object.getPrototypeOf(e)===_e}function d(e){try{return"{}"===JSON.stringify(e)}catch(t){return FLASE}}function h(e,t,n){var o;for(o in t)n&&(l(t[o])||a(t[o]))?(l(t[o])&&!l(e[o])&&(e[o]={}),a(t[o])&&!a(e[o])&&(e[o]=[]),h(e[o],t[o],n)):t[o]!==be&&(e[o]=t[o])}function p(e){var t,n=Te.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e}function g(e,t){var n;for(n in e)t.call(e,n,e[n])}function v(e){if(!e)return we;var t=e.length;if(t===t>>>0)try{return Te.call(e)}catch(n){}return we}function m(e,t){return ge.setTimeout(e,t||0)}function w(e,t){for(var n={},o=0;o<t.length;o++)n[t[o]]=e[o];return n}function y(e,t){for(var n=[],o=0;o<t.length;o++)n[o]=e[t[o]];return n}function b(){return Le++}function x(){return He++}function E(e){return e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function O(e){return e.replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/\_/g,"-").toLowerCase()}function _(e){var t;for(t in e)e[t]=ye}function k(e){return e===be||e===ye}function N(e,t){return e=(e===ye?"":e).toString().trim(),t?encodeURIComponent(e):e}function T(e,t){var n,o,r,i=[];for(n in e)if(k(e[n]))i=i.concat(n);else if(a(e[n]))for(o=0,r=e[n].length;r>o;o++)u(e[n][o])||i.push(n+"="+N(e[n][o],t));else u(e[n])||e[n]===ye||e[n]===be||i.push(n+"="+N(e[n],t));return i.join("&")}function S(e,t){return k(e)?e:t?decodeURIComponent(e):e}function q(e,t){for(var n=e.trim().split("&"),o={},r=0,i=n.length;i>r;r++)if(n[r]){var a=n[r].split("="),c=a[0],u=a[1];c in o?o[c]=[].concat(o[c],S(u,t)):o[c]=S(u,t)}return o}function P(e){var t,n=we;return function(){return n?t:(n=me,t=e.apply(this,arguments),e=ye,t)}}function C(){var e=function(){};return p(e.prototype,Be),new e}function L(){function e(e,c,s){u(n)&&!r&&(r=me,n(i)),u(e)&&("resolved"===o?e.apply(ye,t):"pending"===o&&a.add("resolve",e)),u(c)&&("rejected"===o?c.apply(ye,t):"pending"===o&&a.add("reject",c)),u(s)&&a.add("notify",s)}var t,n,o="pending",r=we,i={},a=function(){var e={resolve:[],reject:[],notify:[]};return{add:function(t,n){e[t].push(n)},remove:function(t,n){var o=e[t].indexOf(n);o>-1&&e[t].splice(o,1)},clear:function(t){e[t].length=0},fire:function(t,n){e[t].forEach(function(e){e.apply(ye,n)})},destroy:function(){e.resolve.length=0,e.reject.length=0,e.notify.length=0}}}();return i.enabled=me,i.all=function(t){return e(t,t),i},i.done=function(t){return e(t),i},i.fail=function(t){return e(ye,t),i},i.progress=function(t){return e(ye,ye,t),i},i.unProgress=function(e){return a.remove("notify",e),i},i.then=function(t,n,o){return e(t,n,o),i},i.resolve=function(){return"pending"===o&&(o="resolved",t=Te.call(arguments),a.fire("resolve",t)),i},i.reject=function(){return"pending"===o&&(o="rejected",t=Te.call(arguments),a.fire("reject",t)),i},i.notify=function(){return a.fire("notify",Te.call(arguments)),i},i.state=function(){return o},i.startWith=function(e){return n=e,i},i.destroy=function(){i.enabled=we,i.notify("destroy"),o=ye,t=ye,r=ye,n=ye,i.destroy=function(){},i=ye,a.destroy(),a=ye},i}function H(e,t,n){var o=new L,r=n?e:e.slice(0),i=[],a=-1,c=function(e){return(c=t&&t.length?function(e){return t[e]}:function(e){return e})(e)},s=function(){a++;var n=r.shift();if(n&&u(n.all))n.all(function(t){o.notify(c(a),t,e),i[a]=t,s()});else if(n)if(u(n)){var f=n(i[a-1],i);f&&u(f.all)?f.all(function(t){o.notify(c(a),t,e),i[a]=t,s()}):(o.notify(c(a),f,e),i[a]=f,s())}else o.notify(c(a),n,e),i[a]=n,s();else t&&t.length&&(i=w(i,t)),o.resolve.call(ye,i)};return o.startWith(s)}function j(e,t){var n=new L,o=e.slice(0),r=[],i=0,a=function(){i===o.length&&(t&&t.length&&(r=w(r,t)),n.resolve.call(ye,r))},c=function(){o.forEach(function(e,t){e&&u(e.all)?(r[t]=be,e.all(function(e){r[t]=e,i++,a()})):(r[t]=e,i++)}),a()};return n.startWith(c)}function V(e){Se.test(ve.readyState)&&ve.body?e():U(ve,"DOMContentLoaded",function(){e()},we)}function M(e){var t,n,o="div";return[["li","ul"],["tr","tbody"],["td","tr"],["th","tr"],["tbody","table"],["option","select"]].some(function(t){return 0===e.indexOf("<"+t[0])?(o=t[1],me):void 0}),t=ve.createElement(o),t.innerHTML=e,n=v(t.children),t=ve.createDocumentFragment(),n.forEach(function(e){t.appendChild(e)}),{box:t,children:n}}function I(e,t){t=[].concat(t),t.forEach(function(t){e.appendChild(t)})}function A(e,t,n){switch(n=n?n.toLowerCase():"beforeend"){case"beforebegin":e.parentNode.insertBefore(t,e);break;case"afterbegin":e.insertBefore(t,e.firstChild);break;case"beforeend":e.appendChild(t);break;case"afterend":e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)}return t}function R(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function D(e,t,n){var o=n===we||null===n||void 0===n,r=Ve[t];if("boolean"==typeof e[r]&&(e[r]=!!n,n||(o=me)),o)return e.removeAttribute(t);var i=Pe.test(e)?we:t in e.cloneNode(we);i?e[t]=n:e.setAttribute(t,n)}function W(e,t){if(c(t)){if(!(arguments.length>2))return e.getAttribute(t);D(e,t,arguments[2])}else g(t,function(t,n){D(e,t,n)})}function z(e,t){if(e&&e.style)if(c(t)){if(!(arguments.length>2)){var n,o=ge.getComputedStyle(e,ye);return o&&(n=o[E(t)]),n}var r=arguments[2];Re.test(t)?e.style[De]=t+"("+r+")":(t=E(t),r||0===r?e.style[t]=r:e.style.removeProperty(t))}else{var i=[],a="";g(t,function(e,t){Re.test(e)?a+=e+"("+t+") ":i.push(O(e)+":"+t)}),a.length&&i.push(O(De)+":"+a),e.style.cssText+=";"+i.join(";")+";"}}function F(e,t){e&&e.style&&[].concat(t).forEach(function(t){e.style.removeProperty(t),e.style.removeProperty(We+t)})}function B(e){if(e.target||(e.target=e.srcElement||document),3==e.target.nodeType&&(e.target=e.target.parentNode),e.pageX===ye&&e.clientX!==ye){var t=ve.documentElement,n=ve.body;e.pageX=e.clientX+(t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||n&&n.clientTop||0)}return e}function U(e,t,n,o){e.addEventListener(t,n,!!o)}function Q(e,t,n){e.removeEventListener(t,n)}function X(e,t,n){var o=ve.createEvent("Events");o.initEvent(t,!0,!0),p(o,n),e.dispatchEvent(o)}function J(e,t){e.className=(e.className+Ce+t).split(/\s+/).filter(function(e,t,n){return n.lastIndexOf(e)===t}).join(Ce)}function G(e,t){t=Ce+t.replace(/\s+/g,Ce)+Ce,e.className=e.className.split(/\s+/).filter(function(e){return-1===t.indexOf(Ce+e+Ce)}).join(Ce)}function Y(e){var t=ve.createElement("style");t.type="text/css",t.innerHTML=e,ve.querySelector("head").appendChild(t)}function $(e){var t;if(Oe.ios&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type){t=e.value.length;try{e.setSelectionRange(t,t)}catch(n){e.focus()}}else e.focus()}function Z(e){var t=ve.activeElement;e=e||ve.body,t&&Ue(e,t)&&u(t.blur)&&t.blur()}function K(e){function t(t){var n=e.documentElement,o=e.body;return Math.max(o["scroll"+t],n["scroll"+t],o["offset"+t],n["offset"+t],n["client"+t])}return{width:t("Width"),height:t("Height")}}function ee(e){function t(t){return e.document.documentElement["client"+t]}return{width:t("Width"),height:t("Height")}}function te(e){var t,n=r(e);switch(n){case"Document":t=K(e);break;case"Window":t=ee(e);break;default:t={width:parseInt(z(e,"width"),10),height:parseInt(z(e,"height"),10)}}return t}function ne(e){var t=e.getBoundingClientRect(),n=e.ownerDocument.body,o=e.ownerDocument.documentElement,r=Math.max(ge.pageYOffset||0,o.scrollTop,n.scrollTop),i=Math.max(ge.pageXOffset||0,o.scrollLeft,n.scrollLeft),a=o.clientTop||n.clientTop||0,c=o.clientLeft||n.clientLeft||0;return{left:t.left+i-c,top:t.top+r-a}}function oe(e,t){return{left:e.left-t.left,top:e.top-t.top}}function re(e){return Ue(e.ownerDocument.body,e)?arguments.length>1?oe(ne(e),ne(arguments[1])):ne(e):{top:NaN,left:NaN}}function ie(e){var t={};if(e)if(e.dataset)p(t,e.dataset);else for(var n=e.attributes,o=0,r=n.length;r>o;o++){var i=n[o].name,a=n[o].value;0===i.indexOf("data-")&&(i=E(i.substring(5)),t[i]=a)}return t}function ae(e,t,n){return u(e)?e.apply(t,v(n)||[]):void 0}function ce(e,t,n){function o(n,o,i){function c(){var t=n,a=ie(t);return r[o]&&r[o][u]?r[o][u]({evt:i,el:t,box:e,data:a},a):me}var u=ye;if(Xe(t,n))return we;if(!Ue(e,n))return we;for(;n&&n!==e&&(1!==n.nodeType||(u=n.getAttribute(a),!u||c()!==we));)n=n.parentNode}t||(t=[]),t=[].concat(t);var r={},i=function(e){var t=e.target,n=e.type;o(t,n,e)},a=n||"action-type",c={};return c.add=function(t,n,o,a){r[n]||(r[n]={},U(e,n,i,!!a));var c=r[n];c[t]=o},c.remove=function(t,n){r[n]&&(delete r[n][t],d(r[n])&&(delete r[n],Q(e,n,i)))},c.pushExcept=function(e){t.push(e)},c.removeExcept=function(e){if(e)for(var n=0,o=t.length;o>n;n+=1)t[n]===e&&t.splice(n,1);else t=[]},c.clearExcept=function(){t=[]},c.fireAction=function(t,n,o,i){var a={};i&&i.data&&(a=i.data),r[n]&&r[n][t]&&r[n][t]({evt:o,el:ye,box:e,data:a,fireFrom:"fireAction"},a)},c.fireInject=function(t,n,o){var i=t.getAttribute(a),c=ie(t);i&&r[n]&&r[n][i]&&r[n][i]({evt:o,el:t,box:e,data:c,fireFrom:"fireInject"},c)},c.fireDom=function(e,t,n){o(e,t,n||{})},c.destroy=function(){for(var t in r){for(var n in r[t])delete r[t][n];delete r[t],Q(e,t,i)}},c}function ue(e,t){var n=w(Je.exec(e)||[],Ge);return n.query=n.query?q(n.query.substring(1),t):{},n.hash=n.hash?q(n.hash.substring(1),t):{},n.getQuery=function(e){return n.query[e]},n.getHash=function(e){return n.hash[e]},n.setQuery=function(e,t){return t===be?n.query[e]=ye:n.query[e]=t,n},n.setHash=function(e,t){return t===be?n.hash[e]=ye:n.hash[e]=t,n},n.toUrl=function(e){var t=n.protocol+"://",o=T(n.query,e),r=T(n.hash,e);return n.protocol&&"file"===n.protocol.toLowerCase()&&(t+="/"),t+n.hostname+(n.port||"")+n.path+(n.name||"")+(o?"?"+o:"")+(r?"#"+r:"")},n}function se(e,t,n){var o;$e.insertBefore(e,$e.firstChild),n&&(o=m(function(){e.onload=ye,R(e),t.reject({type:"Timeout"})},n)),e.onload=function(){o&&clearTimeout(o),e.onload=ye,e.onerror=ye,t.resolve()},e.onerror=function(){o&&clearTimeout(o),R(e),e.onload=ye,e.onerror=ye,t.reject({type:"Error"})}}function fe(e,t,n){var o=p({},Ye,n),r=Ze[e]&&Ze[e](t,o);return r&&(o.onComplete||o.onFail||o.onTimeout)&&r.then(o.onComplete,function(e){"Timeout"===e.type&&u(o.onTimeout)&&o.onTimeout(e),"Error"===e.type&&u(o.onFail)&&o.onFail(e)}),r}function le(e,t){console[e].apply(console,["["+e.toUpperCase()+"]"].concat(v(t)))}function de(e){ft.done(e)}var he={version:"1.0.0"},pe=he._packages={},ge=window,ve=document,me=!0,we=!1,ye=null,be=void 0,xe={app:"qapp-app",view:"qapp-view",widget:"qapp-widget",role:"qapp-role"},Ee={type:"touch",indexView:"index",animate:me,defaultAnimate:"moveEnter",autoInit:me,hashRouter:me,hashSupport:{all:me,exist:[],except:[],usePath:we},jsonParam:we,customRoot:me,preventMove:we,appRoot:ye,screen:{rotate:we,autoResize:me},root:{top:0,right:0,bottom:0,left:0},logLevel:1},Oe=function(){var e={browsers:{},info:{}},t=navigator.userAgent,n=navigator.platform,o=t.match(/(Android);?[\s\/]+([\d.]+)?/),r=t.match(/(iPad).*OS\s([\d_]+)/),i=t.match(/(iPod)(.*OS\s([\d_]+))?/),a=t.match(/(iPhone\sOS)\s([\d_]+)/),c=-1==t.indexOf("Safari"),u={wechat:t.match(/(MicroMessenger)\/([\d\.]+)/),alipay:t.match(/(AlipayClient)\/([\d\.]+)/),qq:t.match(/(MQQBrowser)\/([\d\.]+)/),weibo:t.match(/(weibo__)([\d\.]+)/),uc:t.match(/(UCBrower)\/([\d\.]+)/),opera:t.match(/(Opera)\/([\d\.]+)/)};e.ios=e.android=e.iphone=e.ipad=e.ipod=!1,o&&(e.os="android",e.osVersion=o[2],e.android=!0),(r||a||i)&&(e.os="ios",e.ios=!0),a&&(e.osVersion=a[2].replace(/_/g,"."),e.iphone=!0,e.imobile=!0),r&&(e.osVersion=r[2].replace(/_/g,"."),e.ipad=!0),i&&(e.osVersion=i[3]?i[3].replace(/_/g,"."):null,e.ipod=!0,e.imobile=!0),e.ios&&e.osVersion&&t.indexOf("Version/")>=0&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=t.toLowerCase().split("version/")[1].split(" ")[0]),e.osVersion&&(e.osVersionN=parseInt(e.osVersion.match(/\d+\.?\d*/)[0])),e.pixelRatio=window.devicePixelRatio||1,e.retina=e.pixelRatio>=2;for(var s in u)u[s]?(c=!1,e.browsers[s]=u[s][2]):e.browsers[s]=!1;return e.webApp="ios"==e.os&&c,t.split(" ").forEach(function(t){var n=t.split("/");2==n.length&&(e.info[n[0]]=n[1])}),e.pc=0===n.indexOf("Mac")||0===n.indexOf("Win")||0===n.indexOf("linux")&&!e.android,e}(),_e=Object.prototype,ke=Array.prototype,Ne=_e.toString,Te=ke.slice,Se=/complete|loaded|interactive/,qe=/Element$/,Pe=/^\[object SVG\w*Element\]$/,Ce=" ",Le=1,He=1e3,je="autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelected,contentEditable,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected",Ve={};je.replace(/\w+/g,function(e){Ve[e.toLowerCase()]=e});var Me,Ie=["Webkit","","Moz","O"],Ae=ve.createElement("div"),Re=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,De="",We="";Ie.every(function(e){return Ae.style[e+"TransitionProperty"]!==be?(e&&(We="-"+e.toLowerCase()+"-"),Me=e.toLowerCase(),we):void 0}),Ae=ye,De=We+"transform";var ze={"[object HTMLDocument]":"Document","[object HTMLCollection]":"NodeList","[object StaticNodeList]":"NodeList","[object IXMLDOMNodeList]":"NodeList","[object DOMWindow]":"Window","[object global]":"Window","null":"Null",NaN:"NaN",undefined:"Undefined"};"Boolean,Number,String,Function,Array,Date,RegExp,Window,Document,Arguments,NodeList,Null,Undefined".replace(/\w+/gi,function(e){ze["[object "+e+"]"]=e});var Fe=function(e,t){for(var n,o=-1,r=e.length,i=1;++o<r&&i;)n=e[o],i&=n.callback.apply(n.ctx,t)!==!1;return!!i},Be={on:function(e,t,n){this._events=this._events||{},this._events[e]=this._events[e]||[];var o=this._events[e];return o.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){var o=this,r=P(function(){o.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){if(!this._events)return this;var r,i,a,c,u,s,f,l;if(!e&&!t&&!n)return this._events=be,this;for(c=e?[e]:o(this._events),u=0,s=c.length;s>u;u++)if(e=c[u],a=this._events[e]){if(this._events[e]=r=[],t||n)for(f=0,l=a.length;l>f;f++)i=a[f],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=Te.call(arguments,1),n=this._events[e],o=this._events.all,r=1;return n&&(r&=Fe(n,t)),o&&r&&(r&=Fe(o,t)),!!r}},Ue=ve.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(e,t){return e!==t&&(e.contains?e.contains(t):me)},Qe=function(){function e(e){var t=e.parentNode;t&&z(t,{"transform-style":"preserve-3d","backface-visibility":"hidden"})}function t(e){var t=e.parentNode;F(t,["transform-style","backface-visibility"])}var n,o,r,i,a=200,c=25,u="linear";return n=We+"transition-property",o=We+"transition-duration",i=We+"transition-delay",r=We+"transition-timing-function",function(s,f,l,d,h){function p(e){e&&e.target!==s||(Q(s,w,p),_=me,m(function(){x&&t(s),F(s,"transition"),E.resolve()}))}var v=arguments.length,w=Me+"TransitionEnd",y={},b=[],x="";3>v&&(l=a),4>v&&(d=u),5>v&&(h=0),g(f,function(e,t){Re.test(e)?x+=e+"("+t+") ":y[e]=t,b.push(O(e))}),x&&(y[De]=x,b.push(De)),l>0&&(y[n]=b.join(", "),y[o]=l/1e3+"s",y[i]=h/1e3+"s",y[r]=d);var E=new L,_=we;return l>0&&(U(s,w,p,we),m(function(){_||p()},l+h+2*c)),m(function(){x&&e(s),z(s,y),E.notify("start")},c),0>=l&&m(p),E}}(),Xe=function(e,t){for(var n=0,o=e.length;o>n;n+=1)if(Ue(e[n],t))return me;return we},Je=/(\w+):\/\/\/?([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(\?[^#]*)?(#.*)?/i,Ge=["url","protocol","hostname","port","path","name","query","hash"],Ye={charset:"UTF-8",timeout:3e4,onComplete:ye,onTimeout:ye,onFail:ye},$e=ve.getElementsByTagName("head")[0],Ze={script:function(e,t){var n=new L,o=t.charset,r=t.timeout,i=ve.createElement("script");return i.type="text/javascript",i.charset=o,n.startWith(function(){n.notify("element",i),se(i,n,r),i.src=e})},style:function(e,t){var n=new L,o=t.charset,r=t.timeout,i=ve.createElement("link");return i.type="text/css",i.charset=o,i.rel="stylesheet",n.startWith(function(){se(i,n,r),i.href=e})},image:function(e,t){var n=new L,o=new Image,r=t.timeout,i=ye;return o.onload=function(){o.onload=ye,o.onerror=ye,i&&clearTimeout(i),n.resolve(o)},o.onerror=function(){o.onload=ye,o.onerror=ye,i&&clearTimeout(i),n.reject({type:"Error"})},r&&(i=m(function(){o.onload=ye,o.onerror=ye,i&&clearTimeout(i),n.reject({type:"Timeout"})},r)),n.startWith(function(){o.src=e})}},Ke="resize",et=C(),tt=function(e){return e.width>e.height?"landscape":"portrait"};et.get=function(){return tt(te(ge))},V(function(){var e=te(ge);ge.addEventListener(Ke,function(){var t=te(ge);e.width!==t.width&&e.height!==t.height&&(e=t,et.trigger("change",{type:Ke,width:t.width,height:t.height,orientation:tt(t)}))})});var nt=["info","debug","warn","error"];nt.forEach(function(e,t){le[e]=function(){t>=Ee.logLevel&&le(e,arguments)}});var ot=ue(location.href).query.logLevel;ot&&(Ee.logLevel=parseInt(ot)),e("fetchNode",function(){function e(e){e.resolve()}return function(t){var n=t.options;return(new L).startWith(function(o){n.html||u(n.fetch)?n.html?e(o):n.fetch.length?n.fetch.call(t,function(t){n.html=t||"",e(o)}):(n.html=n.fetch.call(t)||"",e(o)):(n.html="",e(o))})}}),e("display",function(){return{show:function(e,t,n,o){var r=this;return r.isShow?(z(r.root,p({width:"100%",height:"100%",zIndex:x()},n||t)),r.trigger("refresh")):(r.once("completed",function(){z(r.root,p({width:"100%",height:"100%",zIndex:x()},t)),r.trigger("beforeShow"),Ee.animate&&n?Qe(r.root,n,o).done(function(){r.trigger("show")}):(z(r.root,n||{}),r.trigger("show"))}),r.renderTo(s(e)?e:Ee.appRoot)),r},hide:function(){var e=this;return e.isShow&&(e.trigger("beforeHide"),e.trigger("hide")),e}}}),e("pluginM",function(){var e=he._plugins={},t=[];return{add:function(t,n,o){var r=[].concat(t);r.forEach(function(t){e[t]||(e[t]={options:n,adapter:o})})},exists:function(t){return!!e[t]},get:function(t){return e[t]},setOpt:function(t,n){e[t]&&p(me,e[t].options,n)},getGlobal:function(){return t},setGlobal:function(e){t=t.concat(e)}}}),e("widgetM",function(){var e=he._widgets={};return{add:function(t,n,o){e[t]={eventName:o&&(c(o)?o:"tap"),adapter:n}},exists:function(t){return!!e[t]},isEvent:function(t){return!!e[t].eventName},get:function(t){return e[t]},show:function(t,n,o,r){return e[t]?s(n)?e[t].adapter(n,o,r):e[t].adapter(ye,n,o):void 0}}}),e("view",function(){function e(){return ve.createElement(xe.view)}function n(e){var t=e.options.init;g(t,function(t,n){e[t]=u(n)?n.bind(e):n})}function o(e){g(e.options.bindEvents,function(t,n){u(n)&&e.on(t,n.bind(e))})}function r(e){var t=h.getGlobal();t.concat(e.options.plugins).forEach(function(t){var n,o=c(t)?t:t.name,r=t.options||e.options[E(o)+"Options"]||{},i=h.get(o);i&&u(i.adapter)&&(n=u(r)?r:p(me,{},i.options,r),e.plugins[o]=i.adapter(e,n,Ee))})}function i(e,t){var n={param:{}};return g(ie(e),function(e,o){if(!e.indexOf(t)){var r=e.substring(t.length).replace(/\w/i,function(e){return e.toLowerCase()});r.indexOf("param")?n[r]=o:n.param[r.substring(5).replace(/\w/i,function(e){return e.toLowerCase()})]=o}}),n}function a(e,t){t=(c(t)?e.root.querySelector(t):t)||e.root,v(t.querySelectorAll("["+xe.widget+"]")).forEach(function(t){var n,o,r,a,c,s=W(t,xe.widget);w.exists(s)&&(o=w.get(s).eventName,a=w.get(s).adapter,r=function(){c=i(t,s),n=a(t,c,e),c.id&&(e.widgets[c.id]=n)},w.isEvent(s)?(c=i(t,s),o=c.eventType||o,U(t,o,r,we),e.on("destroy",function(){Q(t,o,r)})):e.isReady?r():e.on("ready",function(){r()}),e.on("destroy",function(){n&&u(n.destroy)&&n.destroy(),n=ye,a=ye,c=ye,r=ye}))})}function f(e){e.isReady=me,e.trigger("ready"),ae(e.options.ready,e),e.trigger("completed")}function l(e){var t=this;t.options=p(me,{},O,e),t.name=t.options.name||"view-"+b(),t.container=ye,t.isReady=we,t.isShow=we,t.root=ye,t.nodes=ye,t.param={},t.plugins={},t.widgets={},t.extra=p({},t.options.extra),t._locked=we,t._renderEventTimer=ye,t._renderDeferred=new L,n(t),o(t),r(t),t.on("show",function(){t.isShow=me}),t.on("hide",function(){t.isShow=we})}var d=t("fetchNode"),h=t("pluginM"),w=t("widgetM"),y=t("display"),x=10,O={init:{},html:ye,fetch:ye,classNames:[],attrs:{},styles:{},destroyDom:me,supportHash:me,ready:ye,subViews:[],plugins:[],bindEvents:{},extra:{}};return p(l.prototype,Be,{renderTo:function(t){var n=this;return n._locked||(n._locked=me,n.container=t,n.isReady?(n.trigger("rendered"),n.container.appendChild(n.root),n.trigger("loaded"),n._locked=we,n.trigger("completed")):(n.root=e(),W(n.root,"qapp-name",n.name),J(n.root,n.options.classNames.join(" ")),W(n.root,n.options.attrs),z(n.root,n.options.styles),n.trigger("loadStart"),d(n).done(function(){n.html=n.options.html,n.trigger("loadEnd"),n.container.appendChild(n.root),n.renderHTML().done(function(){n.trigger("rendered"),n.trigger("loaded"),n._locked=we,f(n)})}))),n},renderHTML:function(e){var t=this,n=t._renderDeferred,o=function(e){t._renderEventTimer&&(clearTimeout(t._renderEventTimer),t._renderEventTimer=ye),t._renderEventTimer=m(function(){t.root&&(t._renderEventTimer=ye,n.resolve())},x)};return t.html=e||t.html,t.nodes=M(t.html).children,t.nodes.length?(U(t.root,"DOMNodeInserted",o,we),I(t.root,t.nodes),n.done(function(){Q(t.root,"DOMNodeInserted",o),a(t)}),t._renderEventTimer=m(function(){t.root&&(t._renderEventTimer=ye,n.resolve())},x)):t.root&&(a(t),n.resolve()),n},staticBuild:function(e){var t=this;return e&&s(e)&&(t.trigger("loadStart"),t.html=e.innerHTML||"",t.trigger("loadEnd"),t.container=e.parentNode||e,t.root=e,W(t.root,"qapp-name",t.name),J(t.root,t.options.classNames.join(" ")),W(t.root,t.options.attrs),z(t.root,t.options.styles),t.nodes=v(e.children)||[],a(t),t.trigger("rendered"),t.trigger("loaded"),f(t),t.trigger("completed"),t.trigger("beforeShow"),t.trigger("show"),t.trigger("actived")),t},show:y.show,hide:y.hide,close:y.hide,mergeParam:function(e){var t=this;return p(me,t.param,e),t},fn:function(e){var t=this;return function(){return u(t[e])?t[e].apply(this,v(arguments)):ye}},frontOn:function(e,t){var n=this,o=n._events[e]=n._events[e]||[];return o.unshift({callback:t,ctx:n}),n},scanWidget:function(e){a(this,e)},showWidget:function(e,t,n){var o=he._widgets;return o[e]?s(t)?o[e].adapter(t,n,this):o[e].adapter(ye,t,n,this):void 0},destroy:function(){var e=this;return e.options.destroyDom&&R(e.root),clearTimeout(e._renderEventTimer),e._renderDeferred&&e._renderDeferred.destroy(),g(e.plugins,function(e,t){t&&u(t.destroy)&&t.destroy()}),g(e.widgets,function(e,t){t&&u(t.destroy)&&t.destroy()}),e.trigger("destroy"),e.off(),_(e),e.destroyed=me,e}}),l}),e("taskQ",function(){function e(e){he.trigger("running",me),H(e,[],me).done(function(){n.forEach(function(e){e&&u(e.destroy)&&e.destroy()}),n=ye,he.trigger("running",we)}).progress(function(){t.trigger("ev")})}var t=C(),n=ye,o=500,r={push:function(t){n?n.push(t):(n=[t],e(n))},pushTask:function(e){r.push((new L).startWith(function(t){try{e(t)}catch(n){}m(function(){t&&u(t.resolve)&&t.resolve()},o)}))},addListener:function(e){t.on("ev",e)}};return r}),e("viewM",function(){function e(e){}function n(e){return e.split(":")[0]}function o(t,n,o){var r;w[t]&&w[t][n]?o(w[t][n]):h[t]?(r=w[t][n]=new l(p({name:t+":"+n},h[t])),r.on("destroy",function(){w[t][n]=ye}),o(r)):e(t)}function r(t,n){var o=ye;return w[t]&&w[t][n]?o=w[t][n]:h[t]?(o=w[t][n]=new l(p({name:t+":"+n},h[t])),o.on("destroy",function(){w[t][n]=ye})):e(t),o}function i(e){var t=e.split(":");return{name:t[0],index:t[1]||0}}function a(e,t){g(t,function(t,n){0===t.indexOf("on")&&u(n)&&"onComplete"!=t&&e.on(t.substring(2).replace(/\w/,function(e){return e.toLowerCase()}),n)})}function f(e){return p.apply(ye,[me,{}].concat(v(e).map(function(e){return c(e)?h[e]||{}:e})))}var l=t("view"),d=t("taskQ"),h=he._viewOptionsMap={},w=he._viewMap={},y={define:function(e){c(e)&&(h[e]=f(arguments),w[e]=[])},undefine:function(e){c(e)&&(h[e]=ye)},getOptions:function(e){return h[e]},create:function(){var e=new l(f(arguments)),t=e.name;if(t){var n=i(t);w[n.name][n.index]=e,e.on("destroy",function(){w[n.name][n.index]=ye})}return e},structure:function(e,t){t=t||{},t.ani=c(t.ani)?{name:t.ani}:t.ani||{};var n=p(me,{},y.getOptions(e.split(":")[0])),o=t.ani.name||Ee.defaultAnimate;n.name=e,n.init=n.init||{},n.init.param=t.param||{},n.styles=p(n.styles||{},t.styles),n.classNames=(n.classNames||[]).concat(t.classNames),o&&(n.plugins=(n.plugins||[]).concat([{name:o,options:p({},y.getExtraOption(e,o),t.ani)}]));var r=y.create(n);return r.param=p({},t.param),a(r,t),r.complete=function(e){u(t.onComplete)&&t.onComplete.call(r,e)},r.on("callback",r.complete),r},build:function(e){var t,n=f(v(arguments).slice(1));return e&&s(e)&&(n.name=W(e,"qapp-name"),t=new l(n),t.staticBuild(e)),t},show:function(e,t){var n=v(arguments),o=y.structure(e,t);return d.pushTask(function(e){o.once("show",function(){e.resolve()}),o.once("hide",function(){m(function(){u(o.destroy)&&o.destroy()})}),o.show.apply(o,n.slice(2))}),o},exists:function(e){return!!h[e]},get:function(e,t){var n,r={};return c(e)&&(r=i(e)),u(t)?void o(r.name,r.index,function(e){t(e)}):n={invoke:function(){var e=v(arguments),t=e.shift();return o(r.name,r.index,function(n){ae(n[t],n,e)}),n},pushMessage:function(e,t){var o=w[r.name]&&w[r.name][r.index];return o&&o.trigger(e,t),n}}},getSync:function(e){var t,n={};return c(e)&&(t=e.split(":"),n={name:t[0],index:t[1]||0}),r(n.name,n.index)},getExtraOption:function(e,t){var o,r=h[n(e)];return r?(o=r.extra&&r.extra[Ee.type]||r.extra||{},o[t]):void 0},getHashParams:function(e){var t=h[n(e)];return t?t.hashParams||[]:[]},getRealName:n};return y}),e("viewQ",function(){function e(){var e,t=p[0];return t&&t.root&&(e=parseInt(z(t.root,"z-index"))),(e||x())-1}function o(){return p.length?p[p.length-1]:void 0}function r(e){var t,n=p.length;for(t=n-1;t>-1;t--)if(p[t].name==e)return t;return-1}function i(e){if(e.indexOf(":new")>-1)return e.replace(":new",":"+b());for(var t=0,n=p.length;n>t;t++)if(e==p[t].name.split(":")[0])return!1;return e}function a(e,t,n,o,r){t=t||"show",g(function(i){e.on(t.replace("_",""),function(){m(function(){i.resolve().done(r)})}),u(n)?n():(e[t](o),t.indexOf("hide")>-1&&!o&&i.resolve())})}function c(e){a(e,"_hide",function(){l.hide.call(e)})}function s(e){function t(){w.preView=w.curView,w.curView=e.name}var n=e.hide,o=e.close,r=e._events.show=e._events.show||[],i=e._events.actived=e._events.actived||[];r.unshift({callback:t,ctx:e}),i.unshift({callback:t,ctx:e}),e.once("hide",function(){var t=p.indexOf(e);t>-1&&(p.splice(t,1),m(function(){u(e.destroy)&&e.destroy()}))}),e.hide=e._hide=function(t){t===me?n.call(e):g(function(t){e.once("hide",function(){m(t.resolve)}),n.call(e)})},e.close=e._close=function(t){t===we?o.call(e):g(function(t){e.once("hide",function(){m(t.resolve)}),o.call(e)})}}var f,l=t("display"),d=t("taskQ"),h=t("viewM"),p=[],g=d.pushTask,v=h.getRealName,w={curView:ye,preView:ye,add:function(e,t,o,r,a){g(function(c){if(e=i(e),u(a)&&a(e)===we)return void c.resolve().done(s);var s=u(r)?r:n;e&&h.exists(v(e))?(w[o?"unshift":"push"](h.structure(e,t),s),c.resolve()):c.resolve().done(s)})},push:function(e,t){s(e),e.once("show",function(){var t=o();m(function(){e.trigger("actived"),t&&t.trigger("deactived")}),p.push(e)}),a(e,"show",ye,we,function(){t(e)})},unshift:function(t,n){s(t),t.once("show",function(){p.unshift(t),1===p.length&&m(function(){t.trigger("actived")})}),t.on("beforeShow",function(){t.initialShow=we,z(t.root,"z-index",e()-1)}),a(t,"show",function(){t.show(me)},we,function(){n(t)})},pop:function(e,t,n){var r=o();if(e===be&&(e=1),r&&e>0){var i=function(o){var i,u=p.length,s=u-e;if(s>=0)for(i=s;u-1>i;i++)c(p[i]);s>0&&e>0&&r.once("hide",function(){var e=p[s-1];e&&(t&&t.data&&e.trigger("receiveData",t),e.trigger("actived"))}),a(r,"_hide",ye,o,n)};g(function(t){e<p.length?i(me):e==p.length&&(v(p[0].name)!==Ee.indexView?(w.add(Ee.indexView,{},me),g(function(e){i(we),e.resolve()})):p.length>1&&(e=p.length-1,i(me))),t.resolve()})}},remove:function(e,t,n){g(function(o){var i=r(e);i>-1&&w.pop(p.length-i,t,n),o.resolve()})},backTo:function(e,t,n,o){g(function(i){var a=r(e),c=p.length;-1===a?w.add(v(e),{param:n},me,function(e){f._reset(e),w.pop(c,t,o)}):(c=p.length-a-1,w.pop(c,t,o)),i.resolve()})},refresh:function(e){var t=o();t&&t.trigger("receiveData",e)},clear:function(e,t){g(function(n){w.pop(p.length,e,t),n.resolve()})},inject:function(e){f=e}};return w}),e("history",function(){function e(e){return e.length>2&&e.lastIndexOf(":0")==e.length-2?e.substring(0,e.length-2):e}function n(e){e=Q(e);var t=E.getOptions(e);return t&&t.supportHash!==we?L.all&&L.except.indexOf(e)>-1?we:L.all||-1!==L.exist.indexOf(e)?me:we:we}function o(e){return e[e.length-1]}function r(e,t){return U.trigger("change",{type:e,data:p(me,{},t)})}function i(){var e={},t=l();if(t.view&&t.view.indexOf("__")){if(N)A=R;else if(t.query[R])I=t.query[R],A=M+I;else{do I=b(),A=M+I;while(S[A]);h(t,me)}try{e=JSON.parse(S.getItem(A))||{}}catch(n){}e.basePath==J&&(D=v(e.history),z=e.index,D[z]!==t.view&&(D=[],z=0,S.removeItem(A))),D.length||D.push(t.view),W=D.slice(0),F=z}}function a(){try{S.setItem(A,JSON.stringify({basePath:J,history:D,index:z}))}catch(e){}}function c(e,t){t?D[z]=e:(z++,D=D.slice(0,z),D.push(e)),a()}function u(){var e,t=O.hash,n=t.indexOf("#");return H?t=O.pathname.replace(H.basePath,"").replace(H.ext,""):(t=n>-1?t.slice(n+1):"",e=t.indexOf("#"),e>-1&&(t=t.slice(0,e))),t}function s(e,t){var n=J+"#"+e;if(y=e,j){if(H){var o=e.split("?");n=J+o[0]+H.ext+(o.length>1?"?"+o.slice(1).join("?"):"")}_[(t?"replace":"push")+"State"]({path:n},ve.title,n)}else t?O.replace(n):O.href=n}function l(t){t=t||u();var n=t.split("?"),o=e(n[0])||Ee.indexView,r=q(n[1]||"",me);if(Ee.jsonParam&&r._param)try{r=p(me,r,JSON.parse(r._param)),delete r._param}catch(i){}return{view:o,query:r}}function d(){return x?x:x=P?function(){var e=l();return e[R]=be,e}():o(B)}function h(e,t){e=e||{};var n,o=e.view||Ee.indexView,i=e.query||{},a=d();if(t=t||o==a.view,x=ye,P){if(N||(i[R]=I),c(o,t),r("willForward",{view:o,query:i})===we)return we;n=T(Ee.jsonParam?{_param:JSON.stringify(i)}:i,me),s(o+(n?"?"+n:""),t)}else{var u={view:o,query:i};t?B[B.length-1]=u:B.push(u)}return me}function g(e){var t,o=e?l(e):d(),i=o.view,u=D.indexOf(i);-1===u?(c(i),r("forward",{info:o})):(t=u-z,z=u,0>t?n(o.view)?r("back",{info:o,param:X.shift()}):_.back():0===t?r("refresh",{info:o}):1===t?n(o.view)?r("forward",{info:o}):_.go(z<D.length-1?1:-1):m(function(){O.reload()}),a())}function w(){ge.addEventListener(V,function(){y!==u()&&(y=u(),x=ye,g())})}var y,x,E=t("viewM"),O=ge.location,_=ge.history,k=ge.sessionStorage,N=!!k,S=N?ge.sessionStorage:ge.localStorage,P=me,L=ye,H=ye,j=!!_.pushState,V=j?"popstate":"hashchange",M="QAPP_HISTORY_",I=0,A="",R="_history",D=[],W=[],z=0,F=0,B=[],U=C(),Q=E.getRealName,X=[],J=function(){var e=ue(O.href);return e.hash={},delete e.query._qtid,e.toUrl()}(),G={basePath:J,start:function(){var e;if(P){if(L=Ee.hashSupport,H=j?L.usePath:we,H&&(_.basePath=J=O.origin+H.basePath),y=u(),e=d(),i(),!n(e.view)){if(z>0)return z--,x=ye,_.back(),a(),void m(function(){G.start(flag)},100);e={view:Ee.indexView,query:{}},h(e,me)}r("init",{info:d()}),w()}else e={view:Ee.indexView,query:l().query},B.push(e),r("init",{info:e})},analyzeHash:l,setHashInfo:h,getHashInfo:d,refreshParam:function(e){var t=d();t.query=p(t.query,e),h(t,me)},back:function(e,t){f(e)||(e=1,t=e);var n=d().view,i={view:Q(n),name:n,data:t};if(e=e||1,P)if(X.push(i),z>e-1)_.go(-e);else{var a=Ee.indexView;0===z&&a===n?(he.trigger("close"),
_.go(-1)):(z>0&&_.go(-z),h({view:a},me),r("home",{info:d()}))}else{var c=B.length-e;1>c&&(c=1),B=B.slice(0,c),x=ye,r("back",{info:o(B),param:i})}},backTo:function(e,t,n){var o,i=P?D:B.map(function(e){return e.view}),a=P?z:i.length-1;for(o=a;o>-1;o--)if(!n&&Q(i[o])===e||i[o]===e)return o===a?r("refresh",{info:d(),param:t}):G.back(a-o,t),me;return we},home:function(e){G.back(P?z:B.length-1,e)},exit:function(){he.trigger("close"),P?_.go(-z-1):_.back()},onChange:function(e){U.on("change",e)},buildHash:function(e,t){var n=e.view,o=e.query,r=T(Ee.jsonParam?{_param:JSON.stringify(o)}:o,me);return(t?"":J)+"#"+n+(r?"?"+r:"")},buildPath:function(e){var t=e.view,n=e.query,o=T(Ee.jsonParam?{_param:JSON.stringify(n)}:n,me);return J+t+H.ext+(o?"?"+o:"")},reset:function(){D=W.slice(0),z=F},getAll:function(){return{index:z,list:P?D:B}},setOptions:function(e,t){P=!!e,L=t,H=j&&L?L.usePath:we},usePath:function(){return H}};return G}),e("router",function(){function e(e){if(e){var t,n=e.complete;e.hide=function(e){w.back(1,e||t)},e.complete=function(o){t=o,ae(n,e,[o])}}}function n(t){i.onChange(function(t){var n=t.data,o=n.info,r=n.param,i=t.type;switch(i){case"init":Ee.autoInit&&a.add(o.view,{param:o.query},me,function(t){e(t),d.trigger(i,t)});break;case"forward":m(function(){d.trigger("willForward",o)===!1?history.back():a.add(o.view,{param:o.query},we,function(t){e(t),d.trigger(i,t)})},100);break;case"refresh":a.refresh({view:c.getRealName(o.view),name:o.view,data:r}),d.trigger(i);break;case"back":case"home":m(function(){a.backTo(o.view,r,o.query,function(){d.trigger(i)})},100);break;case"willForward":return d.trigger(i,n)}}),i.start(t)}function o(){l.add("router","tap",function(e){var t,n,o,r,a=e.el,c=W(a,"href"),u=W(a,"target"),s=q(W(a,"param")||"",me);c.indexOf("#!")?c.indexOf("#")||(c=c.slice(1),t=i.analyzeHash(c),"_blank"===u?w.open(t.view+":new",{param:p(t.query,s)}):(r=t.view.split(":"),n=r.length>0,"0"==r[1]&&(t.view=r[0]),w.backTo(t.view,s,n)===we&&w.open(t.view,{param:p(t.query,s)}))):2==c.indexOf("home")?w.home(s):(c=c.slice(2),o=c.match(f),o&&w.back(o[2]||1,s))})}function r(e){return function(){var t=v(arguments);return t[1]&&t[1].skipFilter||g.reduce(function(e,n){return e&&n(t)!==we},me)?ae(i[e],i,t):void 0}}var i=t("history"),a=t("viewQ"),c=t("viewM"),s=we,f=/back(\((\d+)\))?/,l=ce(ve,[],xe.role),d=C(),h=[],g=[],w=p(d,{start:function(){s||(s=me,n(),o(),i.onChange(function(e){d.trigger("history",e)}))},open:function(t,n,o){var r=v(arguments);if(r[1]&&r[1].skipFilter||h.reduce(function(e,t){return e&&t(r)!==we},me)){n=n||{};var c=n.param||{};a.add(t,n,!!n.atBottom,function(t){t?(e(t),ae(o,t,[t]),n.atBottom||d.trigger("forward",t)):ae(o)},function(e){return i.setHashInfo({view:e,query:c})})}},transfer:function(e,t){m(function(){if(i.usePath())location.href=i.buildPath({view:e,query:t});else{var n=ue(i.basePath);n.setQuery("_qtid",Date.now()),location.href=n.toUrl()+i.buildHash({view:e,query:t},!0)}})},back:r("back"),backTo:r("backTo"),home:r("home"),"goto":function(e,t,n,o){i.backTo(e,n,o)===we&&w.open(e,t)},exit:i.exit,refreshParam:i.refreshParam,addOpenFilter:function(e){u(e)&&(h=h.concat(e))},removeOpenFilter:function(e){var t=h.indexOf(e);t>-1&&h.splice(t,1)},addBackFilter:function(e){u(e)&&(g=g.concat(e))},removeBackFilter:function(e){var t=g.indexOf(e);t>-1&&g.splice(t,1)},getCurViewName:function(e){return a.curView&&(e?a.curView:c.getRealName(a.curView))},getPreViewName:function(e){return a.preView&&(e?a.preView:c.getRealName(a.preView))},buildUrl:function(e){return i.usePath()?i.buildPath(e):i.buildHash(e)},getCurInfo:i.getHashInfo,resetHistory:i.reset,_getHistory:function(){return i.getAll()},_newSite:function(){ge.open(i.basePath)},_reset:e});return a.inject(w),w});var rt=t("viewM"),it=t("history"),at=t("router"),ct=t("pluginM"),ut=t("widgetM"),st={},ft=new L,lt=[],dt=100;de(function(){function e(){o=n.clientWidth,r=n.clientHeight,p(st,{width:o,height:r,rootWidth:o-Ee.root.left-Ee.root.right,rootHeight:r-Ee.root.top-Ee.root.bottom}),z(ve.body,"height",r+"px"),z(i,{height:st.rootHeight+"px",width:st.rootWidth+"px"})}function t(){var t=n.clientHeight;(Oe.ios||t>r-dt)&&t!=r&&e()}var n=ve.documentElement,o=n.clientWidth,r=n.clientHeight,i=ve.createElement(xe.app);p(st,{width:o,height:r,rootTop:Ee.root.top,rootLeft:Ee.root.left}),z(ve.body,"height",r+"px"),Ee.customRoot?(st.rootWidth=o-Ee.root.left-Ee.root.right,st.rootHeight=r-Ee.root.top-Ee.root.bottom,z(i,{top:st.rootTop+"px",left:st.rootLeft+"px",height:st.rootHeight+"px",width:st.rootWidth+"px"}),I(ve.body,i)):(st.rootWidth=o,st.rootHeight=r,i=ve.body),he.root=Ee.appRoot=i,he.checkResize=t,at.start(),Ee.screen&&(Ee.screen.autoResize&&ge.addEventListener("resize",t),Ee.screen.rotate&&et.on("change",e)),Ee.preventMove&&U(ve,"touchmove",function(e){e.preventDefault()})}),he=p(he,C()),p(he,{config:function(e){var t=p(me,Ee,e),n=t.plugins,o=t.globalPlugins;return a(o)&&ct.setGlobal(o),a(n)?n.forEach(function(e){e&&n.name&&ct.setOpt(e.name,e.options)}):n&&g(n,function(e,t){e&&ct.setOpt(e,t)}),it.setOptions(t.hashRouter,t.hashSupport),t},root:ve.body,origin:st,defineView:rt.define,undefineView:rt.undefine,createView:rt.create,buildView:rt.build,existsView:rt.exists,getView:rt.get,getViewSync:rt.getSync,addPlugin:ct.add,configPlugin:ct.setOpt,setGlobalPlugins:ct.setGlobal,addWidget:ut.add,showWidget:ut.show,router:at,open:at.open,exit:at.exit,view:rt,show:rt.show,showView:rt.show,hash:{getInfo:it.getHashInfo,setInfo:it.setHashInfo,analyzeHash:it.analyzeHash,setParam:it.refreshParam,build:it.buildHash},sniff:Oe});var ht=he.util={};ht.ready=V,he.ready=de,he.addReadyDependencies=function(e){lt.push(e)},ht.query=function(e){return ve.querySelector(e)},ht.queryAll=function(e){return ve.querySelectorAll(e)},ht.is=r,ht.isObject=i,ht.isString=c,ht.isArray=a,ht.isFunction=u,ht.isNumber=f,ht.isElement=s,ht.isPlainObject=l,ht.isEmptyObject=d,ht.extend=p,ht.each=g,ht.makeArray=v,ht.delay=m,ht.associate=w,ht.mapping=y,ht.camelCase=E,ht.dasherize=O,ht.empty=_,ht.noop=n,ht.getUniqueID=b,ht.getZIndex=x,ht.jsonToQuery=T,ht.queryToJson=q,ht.parseURL=ue,ht.loader=fe,ht.builder=M,ht.appendNodes=I,ht.insertElement=A,ht.removeNode=R,ht.attr=W,ht.css=z,ht.removeStyle=F,ht.addClass=J,ht.removeClass=G,ht.fixEvent=B,ht.addEvent=U,ht.removeEvent=Q,ht.dispatchEvent=X,ht.createStyle=Y,ht.size=te,ht.position=re,ht.contains=Ue,ht.focus=$,ht.blur=Z,ht.animate=Qe,ht.dataSet=ie,ht.delegatedEvent=ce,ht.CustEvent=ht.custEvent=Be,ht.Deferred=ht.deferred=L,ht.queue=H,ht.parallel=j,he.logger=ht.logger=le,ge.QApp=he,V(function(){lt.length?j(lt).done(function(){ft.resolve()}):ft.resolve()}),function(){var e=he.util;he.addPlugin("static",function(t,n,o){t.on("rendered",function(){t.root&&e.css(t.root,{position:"absolute",width:"100%",height:"100%"})})})}(),function(){function e(e){F(e,a)}function t(e){z(e,c,""),F(e,c)}function n(e){return~(e+"").indexOf("%")||~(e+"").indexOf("px")?e:e+"px"}function o(e,t,n){t.on("loadEnd",function(){W(t.root,"qapp-ani",e),z(t.root,c,"hidden")}),t.on("beforeHide",function(){Z(t.root)}),t.on("destroy",function(){t.show=ye,t.hide=ye})}function r(e,t){var n,o,r=-1;for(n=0,o=e.length;o>n;n++)if(e[n].view===t){r=n;break}return r}function i(e,t,n,o,r){var i=0;return j(e.map(function(e,r){return t>r?(e.view.trigger("beforeHide"),Qe(e.view.root,o?s(e.translate,0,0):s(0,e.translate,0),n)):(i+=e.distance,Qe(e.view.root,o?s(i,0,0):s(0,i,0),n))}))}var a="display",c="visibility",u=function(){var e=navigator.userAgent.toLowerCase();return Oe.ios||Oe.android&&e.indexOf("micromessenger")>-1?1:2}(),s=1==u?function(e,t,n){return{translate3d:e+"px, "+t+"px, "+n+"px"}}:function(e,t,n){return{translate:e+"px, "+t+"px",translateZ:n+"px"}},f=10,l={position:"right",distance:0,duration:200,zIndex:0},d={},h=we;he.addPlugin("moveEnter",l,function(a,c,g){var v,w,y={position:"absolute",top:0,zIndex:c.zIndex||x()},b=g.type.indexOf&&-1===g.type.indexOf("pad"),E="right"===c.position||"left"===c.position,O="right"===c.position||"bottom"===c.position?-1:1,_=we,k=we,N=we;if(c.panBack===be&&(c.panBack="app"===g.type),b&&(c.distance=E?st.rootWidth:st.rootHeight),v=O*c.distance,g.animate||(c.duration=0),b?(w=[],y.width="100%",y.height="100%"):(d[c.position]||(d[c.position]=[]),w=d[c.position],y[E?"height":"width"]="100%"),c.panBack&&b&&("right"===c.position||"left"===c.position)){var T=function(e){return~e.directions.indexOf(c.position)?e.clientX-e.offsetX<f:we},S=function(e){N?z(a.root,s(e.offsetX,0,0)):k||(k=me,N=T(e))},q=function(e){N&&(N=we,Math.abs(e.offsetX)>Math.abs(c.distance)/2?a.hide():Qe(a.root,s(0,0,0),c.duration/2).done()),k=we};a.on("show",function(){U(a.root,"pan",S),U(a.root,"panend",q)}),a.on("hide",function(){Q(a.root,"pan",S),Q(a.root,"panend",q)}),a.on("rendered",function(){var e=ve.createElement("div");e.className="touch-opacity",z(e,{position:"absolute",zIndex:"9999",width:n(f),height:"100%",backgroundColor:"rgba(255, 255, 255, 0)"}),z(e,"right"===c.position?"left":"right","0"),J(a.root,"shadow"),a.root.appendChild(e)})}return a.on("loaded",function(){c.distance||(c.distance=te(a.root)[E?"width":"height"]),b?3===u?"bottom"===c.position?y.top=n(st.rootHeight):y[c.position]=n(-c.distance):("bottom"===c.position?y.top=n(st.rootHeight-c.distance):y[c.position]=n(0),p(y,E?s(-O*c.distance,0,0):s(0,-O*c.distance,0))):"bottom"!==c.position?y[c.position]=n(-c.distance):y.top=n(st.rootHeight),z(a.root,y)}),o("moveEnter",a,c),a.show=function(n){if(Z(),!h){h=me,_=me;var o=r(w,a);~o?i(w,o,n===me||a.preventAnimate?0:c.duration,E).done(function(){w.splice(0,o).forEach(function(e){e.view.trigger("hide")}),h=we,_=we,a.trigger("refresh")}):(a.once("completed",function(){e(a.root),t(a.root),a.trigger("beforeShow"),w.unshift({view:a,distance:b?0:v,translate:b?-v:0}),m(function(){i(w,0,n===me||a.preventAnimate?0:c.duration,E,a.root).done(function(){h=we,_=we,F(a.root,"transform"),a.trigger("show")})})}),a.renderTo(he.root))}return a},a.hide=function(e){if((!h||b&&!_)&&a.isShow){h=me;var t=r(w,a);i(w,t+1,e===me||a.preventAnimate?0:c.duration,E).done(function(){w.splice(0,t+1).forEach(function(e){e.view.trigger("hide")}),h=we})}return a},a.on("destroy",function(){y=ye,w=ye,a=ye}),{setOption:function(e){c=p({},l,e)}}})}()}();