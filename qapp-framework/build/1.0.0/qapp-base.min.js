!function(){"use strict";function e(e,t){pe[e]=t()}function t(e){return pe[e]}function n(){}function o(e){var t,n=[];for(t in e)n.push(t);return n}function r(e,t){var n=We[e===we||e!==e?e:Se.call(e)]||e&&e.nodeName||"#";return e===be?n="Undefined":"#"===n.charAt(0)&&(n=e==e.document&&e.document!=e?"Window":9===e.nodeType?"Document":e.callee?"Arguments":isFinite(e.length)&&e.item?"NodeList":Se.call(e).slice(8,-1)),t?t===n:n}function i(e){return r(e,"Object")}function a(e){return r(e,"Array")}function c(e){return r(e,"String")}function u(e){return r(e,"Function")}function s(e){return e&&1===e.nodeType?e instanceof Node?me:_e.test(Se.call(e)):ye}function l(e){return r(e,"Number")}function f(e){return r(e,"Object")&&Object.getPrototypeOf(e)===Te}function d(e){try{return"{}"===JSON.stringify(e)}catch(t){return FLASE}}function h(e,t,n){var o;for(o in t)n&&(f(t[o])||a(t[o]))?(f(t[o])&&!f(e[o])&&(e[o]={}),a(t[o])&&!a(e[o])&&(e[o]=[]),h(e[o],t[o],n)):t[o]!==be&&(e[o]=t[o])}function p(e){var t,n=Oe.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e}function v(e,t){var n;for(n in e)t.call(e,n,e[n])}function g(e){if(!e)return ye;var t=e.length;if(t===t>>>0)try{return Oe.call(e)}catch(n){}return ye}function m(e,t){return ve.setTimeout(e,t||0)}function y(e,t){for(var n={},o=0;o<t.length;o++)n[t[o]]=e[o];return n}function w(e,t){for(var n=[],o=0;o<t.length;o++)n[o]=e[t[o]];return n}function b(){return Pe++}function x(){return qe++}function E(e){return e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function k(e){return e.replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/\_/g,"-").toLowerCase()}function T(e){var t;for(t in e)e[t]=we}function C(e){return e===be||e===we}function S(e,t){return e=(e===we?"":e).toString().trim(),t?encodeURIComponent(e):e}function O(e,t){var n,o,r,i=[];for(n in e)if(C(e[n]))i=i.concat(n);else if(a(e[n]))for(o=0,r=e[n].length;r>o;o++)u(e[n][o])||i.push(n+"="+S(e[n][o],t));else u(e[n])||e[n]===we||e[n]===be||i.push(n+"="+S(e[n],t));return i.join("&")}function N(e,t){return C(e)?e:t?decodeURIComponent(e):e}function _(e,t){for(var n=e.trim().split("&"),o={},r=0,i=n.length;i>r;r++)if(n[r]){var a=n[r].split("="),c=a[0],u=a[1];c in o?o[c]=[].concat(o[c],N(u,t)):o[c]=N(u,t)}return o}function L(e){var t,n=ye;return function(){return n?t:(n=me,t=e.apply(this,arguments),e=we,t)}}function M(){var e=function(){};return p(e.prototype,Fe),new e}function P(){function e(e,c,s){u(n)&&!r&&(r=me,n(i)),u(e)&&("resolved"===o?e.apply(we,t):"pending"===o&&a.add("resolve",e)),u(c)&&("rejected"===o?c.apply(we,t):"pending"===o&&a.add("reject",c)),u(s)&&a.add("notify",s)}var t,n,o="pending",r=ye,i={},a=function(){var e={resolve:[],reject:[],notify:[]};return{add:function(t,n){e[t].push(n)},remove:function(t,n){var o=e[t].indexOf(n);o>-1&&e[t].splice(o,1)},clear:function(t){e[t].length=0},fire:function(t,n){e[t].forEach(function(e){e.apply(we,n)})},destroy:function(){e.resolve.length=0,e.reject.length=0,e.notify.length=0}}}();return i.enabled=me,i.all=function(t){return e(t,t),i},i.done=function(t){return e(t),i},i.fail=function(t){return e(we,t),i},i.progress=function(t){return e(we,we,t),i},i.unProgress=function(e){return a.remove("notify",e),i},i.then=function(t,n,o){return e(t,n,o),i},i.resolve=function(){return"pending"===o&&(o="resolved",t=Oe.call(arguments),a.fire("resolve",t)),i},i.reject=function(){return"pending"===o&&(o="rejected",t=Oe.call(arguments),a.fire("reject",t)),i},i.notify=function(){return a.fire("notify",Oe.call(arguments)),i},i.state=function(){return o},i.startWith=function(e){return n=e,i},i.destroy=function(){i.enabled=ye,i.notify("destroy"),o=we,t=we,r=we,n=we,i.destroy=function(){},i=we,a.destroy(),a=we},i}function q(e,t,n){var o=new P,r=n?e:e.slice(0),i=[],a=-1,c=function(e){return(c=t&&t.length?function(e){return t[e]}:function(e){return e})(e)},s=function(){a++;var n=r.shift();if(n&&u(n.all))n.all(function(t){o.notify(c(a),t,e),i[a]=t,s()});else if(n)if(u(n)){var l=n(i[a-1],i);l&&u(l.all)?l.all(function(t){o.notify(c(a),t,e),i[a]=t,s()}):(o.notify(c(a),l,e),i[a]=l,s())}else o.notify(c(a),n,e),i[a]=n,s();else t&&t.length&&(i=y(i,t)),o.resolve.call(we,i)};return o.startWith(s)}function A(e,t){var n=new P,o=e.slice(0),r=[],i=0,a=function(){i===o.length&&(t&&t.length&&(r=y(r,t)),n.resolve.call(we,r))},c=function(){o.forEach(function(e,t){e&&u(e.all)?(r[t]=be,e.all(function(e){r[t]=e,i++,a()})):(r[t]=e,i++)}),a()};return n.startWith(c)}function H(e){Ne.test(ge.readyState)&&ge.body?e():B(ge,"DOMContentLoaded",function(){e()},ye)}function j(e){var t,n,o="div";return[["li","ul"],["tr","tbody"],["td","tr"],["th","tr"],["tbody","table"],["option","select"]].some(function(t){return 0===e.indexOf("<"+t[0])?(o=t[1],me):void 0}),t=ge.createElement(o),t.innerHTML=e,n=g(t.children),t=ge.createDocumentFragment(),n.forEach(function(e){t.appendChild(e)}),{box:t,children:n}}function I(e,t){t=[].concat(t),t.forEach(function(t){e.appendChild(t)})}function D(e,t,n){switch(n=n?n.toLowerCase():"beforeend"){case"beforebegin":e.parentNode.insertBefore(t,e);break;case"afterbegin":e.insertBefore(t,e.firstChild);break;case"beforeend":e.appendChild(t);break;case"afterend":e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)}return t}function X(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function V(e,t,n){var o=n===ye||null===n||void 0===n,r=He[t];if("boolean"==typeof e[r]&&(e[r]=!!n,n||(o=me)),o)return e.removeAttribute(t);var i=Le.test(e)?ye:t in e.cloneNode(ye);i?e[t]=n:e.setAttribute(t,n)}function Y(e,t){if(c(t)){if(!(arguments.length>2))return e.getAttribute(t);V(e,t,arguments[2])}else v(t,function(t,n){V(e,t,n)})}function W(e,t){if(e&&e.style)if(c(t)){if(!(arguments.length>2)){var n,o=ve.getComputedStyle(e,we);return o&&(n=o[E(t)]),n}var r=arguments[2];Xe.test(t)?e.style[Ve]=t+"("+r+")":(t=E(t),r||0===r?e.style[t]=r:e.style.removeProperty(t))}else{var i=[],a="";v(t,function(e,t){Xe.test(e)?a+=e+"("+t+") ":i.push(k(e)+":"+t)}),a.length&&i.push(k(Ve)+":"+a),e.style.cssText+=";"+i.join(";")+";"}}function R(e,t){e&&e.style&&[].concat(t).forEach(function(t){e.style.removeProperty(t),e.style.removeProperty(Ye+t)})}function F(e){if(e.target||(e.target=e.srcElement||document),3==e.target.nodeType&&(e.target=e.target.parentNode),e.pageX===we&&e.clientX!==we){var t=ge.documentElement,n=ge.body;e.pageX=e.clientX+(t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||n&&n.clientTop||0)}return e}function B(e,t,n,o){e.addEventListener(t,n,!!o)}function z(e,t,n){e.removeEventListener(t,n)}function Q(e,t,n){var o=ge.createEvent("Events");o.initEvent(t,!0,!0),p(o,n),e.dispatchEvent(o)}function U(e,t){e.className=(e.className+Me+t).split(/\s+/).filter(function(e,t,n){return n.lastIndexOf(e)===t}).join(Me)}function G(e,t){t=Me+t.replace(/\s+/g,Me)+Me,e.className=e.className.split(/\s+/).filter(function(e){return-1===t.indexOf(Me+e+Me)}).join(Me)}function J(e){var t=ge.createElement("style");t.type="text/css",t.innerHTML=e,ge.querySelector("head").appendChild(t)}function $(e){var t;if(ke.ios&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type){t=e.value.length;try{e.setSelectionRange(t,t)}catch(n){e.focus()}}else e.focus()}function Z(e){var t=ge.activeElement;e=e||ge.body,t&&Be(e,t)&&u(t.blur)&&t.blur()}function K(e){function t(t){var n=e.documentElement,o=e.body;return Math.max(o["scroll"+t],n["scroll"+t],o["offset"+t],n["offset"+t],n["client"+t])}return{width:t("Width"),height:t("Height")}}function ee(e){function t(t){return e.document.documentElement["client"+t]}return{width:t("Width"),height:t("Height")}}function te(e){var t,n=r(e);switch(n){case"Document":t=K(e);break;case"Window":t=ee(e);break;default:t={width:parseInt(W(e,"width"),10),height:parseInt(W(e,"height"),10)}}return t}function ne(e){var t=e.getBoundingClientRect(),n=e.ownerDocument.body,o=e.ownerDocument.documentElement,r=Math.max(ve.pageYOffset||0,o.scrollTop,n.scrollTop),i=Math.max(ve.pageXOffset||0,o.scrollLeft,n.scrollLeft),a=o.clientTop||n.clientTop||0,c=o.clientLeft||n.clientLeft||0;return{left:t.left+i-c,top:t.top+r-a}}function oe(e,t){return{left:e.left-t.left,top:e.top-t.top}}function re(e){return Be(e.ownerDocument.body,e)?arguments.length>1?oe(ne(e),ne(arguments[1])):ne(e):{top:NaN,left:NaN}}function ie(e){var t={};if(e)if(e.dataset)p(t,e.dataset);else for(var n=e.attributes,o=0,r=n.length;r>o;o++){var i=n[o].name,a=n[o].value;0===i.indexOf("data-")&&(i=E(i.substring(5)),t[i]=a)}return t}function ae(e,t,n){return u(e)?e.apply(t,g(n)||[]):void 0}function ce(e,t,n){function o(n,o,i){function c(){var t=n,a=ie(t);return r[o]&&r[o][u]?r[o][u]({evt:i,el:t,box:e,data:a},a):me}var u=we;if(Qe(t,n))return ye;if(!Be(e,n))return ye;for(;n&&n!==e&&(1!==n.nodeType||(u=n.getAttribute(a),!u||c()!==ye));)n=n.parentNode}t||(t=[]),t=[].concat(t);var r={},i=function(e){var t=e.target,n=e.type;o(t,n,e)},a=n||"action-type",c={};return c.add=function(t,n,o,a){r[n]||(r[n]={},B(e,n,i,!!a));var c=r[n];c[t]=o},c.remove=function(t,n){r[n]&&(delete r[n][t],d(r[n])&&(delete r[n],z(e,n,i)))},c.pushExcept=function(e){t.push(e)},c.removeExcept=function(e){if(e)for(var n=0,o=t.length;o>n;n+=1)t[n]===e&&t.splice(n,1);else t=[]},c.clearExcept=function(){t=[]},c.fireAction=function(t,n,o,i){var a={};i&&i.data&&(a=i.data),r[n]&&r[n][t]&&r[n][t]({evt:o,el:we,box:e,data:a,fireFrom:"fireAction"},a)},c.fireInject=function(t,n,o){var i=t.getAttribute(a),c=ie(t);i&&r[n]&&r[n][i]&&r[n][i]({evt:o,el:t,box:e,data:c,fireFrom:"fireInject"},c)},c.fireDom=function(e,t,n){o(e,t,n||{})},c.destroy=function(){for(var t in r){for(var n in r[t])delete r[t][n];delete r[t],z(e,t,i)}},c}function ue(e,t){var n=y(Ue.exec(e)||[],Ge);return n.query=n.query?_(n.query.substring(1),t):{},n.hash=n.hash?_(n.hash.substring(1),t):{},n.getQuery=function(e){return n.query[e]},n.getHash=function(e){return n.hash[e]},n.setQuery=function(e,t){return t===be?n.query[e]=we:n.query[e]=t,n},n.setHash=function(e,t){return t===be?n.hash[e]=we:n.hash[e]=t,n},n.toUrl=function(e){var t=n.protocol+"://",o=O(n.query,e),r=O(n.hash,e);return n.protocol&&"file"===n.protocol.toLowerCase()&&(t+="/"),t+n.hostname+(n.port||"")+n.path+(n.name||"")+(o?"?"+o:"")+(r?"#"+r:"")},n}function se(e,t,n){var o;$e.insertBefore(e,$e.firstChild),n&&(o=m(function(){e.onload=we,X(e),t.reject({type:"Timeout"})},n)),e.onload=function(){o&&clearTimeout(o),e.onload=we,e.onerror=we,t.resolve()},e.onerror=function(){o&&clearTimeout(o),X(e),e.onload=we,e.onerror=we,t.reject({type:"Error"})}}function le(e,t,n){var o=p({},Je,n),r=Ze[e]&&Ze[e](t,o);return r&&(o.onComplete||o.onFail||o.onTimeout)&&r.then(o.onComplete,function(e){"Timeout"===e.type&&u(o.onTimeout)&&o.onTimeout(e),"Error"===e.type&&u(o.onFail)&&o.onFail(e)}),r}function fe(e,t){console[e].apply(console,["["+e.toUpperCase()+"]"].concat(g(t)))}function de(e){lt.done(e)}var he={version:"1.0.0"},pe=he._packages={},ve=window,ge=document,me=!0,ye=!1,we=null,be=void 0,xe={app:"qapp-app",view:"qapp-view",widget:"qapp-widget",role:"qapp-role"},Ee={type:"touch",indexView:"index",animate:me,defaultAnimate:"moveEnter",autoInit:me,hashRouter:me,hashSupport:{all:me,exist:[],except:[],usePath:ye},jsonParam:ye,customRoot:me,preventMove:ye,appRoot:we,screen:{rotate:ye,autoResize:me},root:{top:0,right:0,bottom:0,left:0},logLevel:1},ke=function(){var e={browsers:{},info:{}},t=navigator.userAgent,n=navigator.platform,o=t.match(/(Android);?[\s\/]+([\d.]+)?/),r=t.match(/(iPad).*OS\s([\d_]+)/),i=t.match(/(iPod)(.*OS\s([\d_]+))?/),a=t.match(/(iPhone\sOS)\s([\d_]+)/),c=-1==t.indexOf("Safari"),u={wechat:t.match(/(MicroMessenger)\/([\d\.]+)/),alipay:t.match(/(AlipayClient)\/([\d\.]+)/),qq:t.match(/(MQQBrowser)\/([\d\.]+)/),weibo:t.match(/(weibo__)([\d\.]+)/),uc:t.match(/(UCBrower)\/([\d\.]+)/),opera:t.match(/(Opera)\/([\d\.]+)/)};e.ios=e.android=e.iphone=e.ipad=e.ipod=!1,o&&(e.os="android",e.osVersion=o[2],e.android=!0),(r||a||i)&&(e.os="ios",e.ios=!0),a&&(e.osVersion=a[2].replace(/_/g,"."),e.iphone=!0,e.imobile=!0),r&&(e.osVersion=r[2].replace(/_/g,"."),e.ipad=!0),i&&(e.osVersion=i[3]?i[3].replace(/_/g,"."):null,e.ipod=!0,e.imobile=!0),e.ios&&e.osVersion&&t.indexOf("Version/")>=0&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=t.toLowerCase().split("version/")[1].split(" ")[0]),e.osVersion&&(e.osVersionN=parseInt(e.osVersion.match(/\d+\.?\d*/)[0])),e.pixelRatio=window.devicePixelRatio||1,e.retina=e.pixelRatio>=2;for(var s in u)u[s]?(c=!1,e.browsers[s]=u[s][2]):e.browsers[s]=!1;return e.webApp="ios"==e.os&&c,t.split(" ").forEach(function(t){var n=t.split("/");2==n.length&&(e.info[n[0]]=n[1])}),e.pc=0===n.indexOf("Mac")||0===n.indexOf("Win")||0===n.indexOf("linux")&&!e.android,e}(),Te=Object.prototype,Ce=Array.prototype,Se=Te.toString,Oe=Ce.slice,Ne=/complete|loaded|interactive/,_e=/Element$/,Le=/^\[object SVG\w*Element\]$/,Me=" ",Pe=1,qe=1e3,Ae="autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelected,contentEditable,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected",He={};Ae.replace(/\w+/g,function(e){He[e.toLowerCase()]=e});var je,Ie=["Webkit","","Moz","O"],De=ge.createElement("div"),Xe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,Ve="",Ye="";Ie.every(function(e){return De.style[e+"TransitionProperty"]!==be?(e&&(Ye="-"+e.toLowerCase()+"-"),je=e.toLowerCase(),ye):void 0}),De=we,Ve=Ye+"transform";var We={"[object HTMLDocument]":"Document","[object HTMLCollection]":"NodeList","[object StaticNodeList]":"NodeList","[object IXMLDOMNodeList]":"NodeList","[object DOMWindow]":"Window","[object global]":"Window","null":"Null",NaN:"NaN",undefined:"Undefined"};"Boolean,Number,String,Function,Array,Date,RegExp,Window,Document,Arguments,NodeList,Null,Undefined".replace(/\w+/gi,function(e){We["[object "+e+"]"]=e});var Re=function(e,t){for(var n,o=-1,r=e.length,i=1;++o<r&&i;)n=e[o],i&=n.callback.apply(n.ctx,t)!==!1;return!!i},Fe={on:function(e,t,n){this._events=this._events||{},this._events[e]=this._events[e]||[];var o=this._events[e];return o.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){var o=this,r=L(function(){o.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){if(!this._events)return this;var r,i,a,c,u,s,l,f;if(!e&&!t&&!n)return this._events=be,this;for(c=e?[e]:o(this._events),u=0,s=c.length;s>u;u++)if(e=c[u],a=this._events[e]){if(this._events[e]=r=[],t||n)for(l=0,f=a.length;f>l;l++)i=a[l],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=Oe.call(arguments,1),n=this._events[e],o=this._events.all,r=1;return n&&(r&=Re(n,t)),o&&r&&(r&=Re(o,t)),!!r}},Be=ge.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(e,t){return e!==t&&(e.contains?e.contains(t):me)},ze=function(){function e(e){var t=e.parentNode;t&&W(t,{"transform-style":"preserve-3d","backface-visibility":"hidden"})}function t(e){var t=e.parentNode;R(t,["transform-style","backface-visibility"])}var n,o,r,i,a=200,c=25,u="linear";return n=Ye+"transition-property",o=Ye+"transition-duration",i=Ye+"transition-delay",r=Ye+"transition-timing-function",function(s,l,f,d,h){function p(e){e&&e.target!==s||(z(s,y,p),T=me,m(function(){x&&t(s),R(s,"transition"),E.resolve()}))}var g=arguments.length,y=je+"TransitionEnd",w={},b=[],x="";3>g&&(f=a),4>g&&(d=u),5>g&&(h=0),v(l,function(e,t){Xe.test(e)?x+=e+"("+t+") ":w[e]=t,b.push(k(e))}),x&&(w[Ve]=x,b.push(Ve)),f>0&&(w[n]=b.join(", "),w[o]=f/1e3+"s",w[i]=h/1e3+"s",w[r]=d);var E=new P,T=ye;return f>0&&(B(s,y,p,ye),m(function(){T||p()},f+h+2*c)),m(function(){x&&e(s),W(s,w),E.notify("start")},c),0>=f&&m(p),E}}(),Qe=function(e,t){for(var n=0,o=e.length;o>n;n+=1)if(Be(e[n],t))return me;return ye},Ue=/(\w+):\/\/\/?([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(\?[^#]*)?(#.*)?/i,Ge=["url","protocol","hostname","port","path","name","query","hash"],Je={charset:"UTF-8",timeout:3e4,onComplete:we,onTimeout:we,onFail:we},$e=ge.getElementsByTagName("head")[0],Ze={script:function(e,t){var n=new P,o=t.charset,r=t.timeout,i=ge.createElement("script");return i.type="text/javascript",i.charset=o,n.startWith(function(){n.notify("element",i),se(i,n,r),i.src=e})},style:function(e,t){var n=new P,o=t.charset,r=t.timeout,i=ge.createElement("link");return i.type="text/css",i.charset=o,i.rel="stylesheet",n.startWith(function(){se(i,n,r),i.href=e})},image:function(e,t){var n=new P,o=new Image,r=t.timeout,i=we;return o.onload=function(){o.onload=we,o.onerror=we,i&&clearTimeout(i),n.resolve(o)},o.onerror=function(){o.onload=we,o.onerror=we,i&&clearTimeout(i),n.reject({type:"Error"})},r&&(i=m(function(){o.onload=we,o.onerror=we,i&&clearTimeout(i),n.reject({type:"Timeout"})},r)),n.startWith(function(){o.src=e})}},Ke="resize",et=M(),tt=function(e){return e.width>e.height?"landscape":"portrait"};et.get=function(){return tt(te(ve))},H(function(){var e=te(ve);ve.addEventListener(Ke,function(){var t=te(ve);e.width!==t.width&&e.height!==t.height&&(e=t,et.trigger("change",{type:Ke,width:t.width,height:t.height,orientation:tt(t)}))})});var nt=["info","debug","warn","error"];nt.forEach(function(e,t){fe[e]=function(){t>=Ee.logLevel&&fe(e,arguments)}});var ot=ue(location.href).query.logLevel;ot&&(Ee.logLevel=parseInt(ot)),e("fetchNode",function(){function e(e){e.resolve()}return function(t){var n=t.options;return(new P).startWith(function(o){n.html||u(n.fetch)?n.html?e(o):n.fetch.length?n.fetch.call(t,function(t){n.html=t||"",e(o)}):(n.html=n.fetch.call(t)||"",e(o)):(n.html="",e(o))})}}),e("display",function(){return{show:function(e,t,n,o){var r=this;return r.isShow?(W(r.root,p({width:"100%",height:"100%",zIndex:x()},n||t)),r.trigger("refresh")):(r.once("completed",function(){W(r.root,p({width:"100%",height:"100%",zIndex:x()},t)),r.trigger("beforeShow"),Ee.animate&&n?ze(r.root,n,o).done(function(){r.trigger("show")}):(W(r.root,n||{}),r.trigger("show"))}),r.renderTo(s(e)?e:Ee.appRoot)),r},hide:function(){var e=this;return e.isShow&&(e.trigger("beforeHide"),e.trigger("hide")),e}}}),e("pluginM",function(){var e=he._plugins={},t=[];return{add:function(t,n,o){var r=[].concat(t);r.forEach(function(t){e[t]||(e[t]={options:n,adapter:o})})},exists:function(t){return!!e[t]},get:function(t){return e[t]},setOpt:function(t,n){e[t]&&p(me,e[t].options,n)},getGlobal:function(){return t},setGlobal:function(e){t=t.concat(e)}}}),e("widgetM",function(){var e=he._widgets={};return{add:function(t,n,o){e[t]={eventName:o&&(c(o)?o:"tap"),adapter:n}},exists:function(t){return!!e[t]},isEvent:function(t){return!!e[t].eventName},get:function(t){return e[t]},show:function(t,n,o,r){return e[t]?s(n)?e[t].adapter(n,o,r):e[t].adapter(we,n,o):void 0}}}),e("view",function(){function e(){return ge.createElement(xe.view)}function n(e){var t=e.options.init;v(t,function(t,n){e[t]=u(n)?n.bind(e):n})}function o(e){v(e.options.bindEvents,function(t,n){u(n)&&e.on(t,n.bind(e))})}function r(e){var t=h.getGlobal();t.concat(e.options.plugins).forEach(function(t){var n,o=c(t)?t:t.name,r=t.options||e.options[E(o)+"Options"]||{},i=h.get(o);i&&u(i.adapter)&&(n=u(r)?r:p(me,{},i.options,r),e.plugins[o]=i.adapter(e,n,Ee))})}function i(e,t){var n={param:{}};return v(ie(e),function(e,o){if(!e.indexOf(t)){var r=e.substring(t.length).replace(/\w/i,function(e){return e.toLowerCase()});r.indexOf("param")?n[r]=o:n.param[r.substring(5).replace(/\w/i,function(e){return e.toLowerCase()})]=o}}),n}function a(e,t){t=(c(t)?e.root.querySelector(t):t)||e.root,g(t.querySelectorAll("["+xe.widget+"]")).forEach(function(t){var n,o,r,a,c,s=Y(t,xe.widget);y.exists(s)&&(o=y.get(s).eventName,a=y.get(s).adapter,r=function(){c=i(t,s),n=a(t,c,e),c.id&&(e.widgets[c.id]=n)},y.isEvent(s)?(c=i(t,s),o=c.eventType||o,B(t,o,r,ye),e.on("destroy",function(){z(t,o,r)})):e.isReady?r():e.on("ready",function(){r()}),e.on("destroy",function(){n&&u(n.destroy)&&n.destroy(),n=we,a=we,c=we,r=we}))})}function l(e){e.isReady=me,e.trigger("ready"),ae(e.options.ready,e),e.trigger("completed")}function f(e){var t=this;t.options=p(me,{},k,e),t.name=t.options.name||"view-"+b(),t.container=we,t.isReady=ye,t.isShow=ye,t.root=we,t.nodes=we,t.param={},t.plugins={},t.widgets={},t.extra=p({},t.options.extra),t._locked=ye,t._renderEventTimer=we,t._renderDeferred=new P,n(t),o(t),r(t),t.on("show",function(){t.isShow=me}),t.on("hide",function(){t.isShow=ye})}var d=t("fetchNode"),h=t("pluginM"),y=t("widgetM"),w=t("display"),x=10,k={init:{},html:we,fetch:we,classNames:[],attrs:{},styles:{},destroyDom:me,supportHash:me,ready:we,subViews:[],plugins:[],bindEvents:{},extra:{}};return p(f.prototype,Fe,{renderTo:function(t){var n=this;return n._locked||(n._locked=me,n.container=t,n.isReady?(n.trigger("rendered"),n.container.appendChild(n.root),n.trigger("loaded"),n._locked=ye,n.trigger("completed")):(n.root=e(),Y(n.root,"qapp-name",n.name),U(n.root,n.options.classNames.join(" ")),Y(n.root,n.options.attrs),W(n.root,n.options.styles),n.trigger("loadStart"),d(n).done(function(){n.html=n.options.html,n.trigger("loadEnd"),n.container.appendChild(n.root),n.renderHTML().done(function(){n.trigger("rendered"),n.trigger("loaded"),n._locked=ye,l(n)})}))),n},renderHTML:function(e){var t=this,n=t._renderDeferred,o=function(e){t._renderEventTimer&&(clearTimeout(t._renderEventTimer),t._renderEventTimer=we),t._renderEventTimer=m(function(){t.root&&(t._renderEventTimer=we,n.resolve())},x)};return t.html=e||t.html,t.nodes=j(t.html).children,t.nodes.length?(B(t.root,"DOMNodeInserted",o,ye),I(t.root,t.nodes),n.done(function(){z(t.root,"DOMNodeInserted",o),a(t)}),t._renderEventTimer=m(function(){t.root&&(t._renderEventTimer=we,n.resolve())},x)):t.root&&(a(t),n.resolve()),n},staticBuild:function(e){var t=this;return e&&s(e)&&(t.trigger("loadStart"),t.html=e.innerHTML||"",t.trigger("loadEnd"),t.container=e.parentNode||e,t.root=e,Y(t.root,"qapp-name",t.name),U(t.root,t.options.classNames.join(" ")),Y(t.root,t.options.attrs),W(t.root,t.options.styles),t.nodes=g(e.children)||[],a(t),t.trigger("rendered"),t.trigger("loaded"),l(t),t.trigger("completed"),t.trigger("beforeShow"),t.trigger("show"),t.trigger("actived")),t},show:w.show,hide:w.hide,close:w.hide,mergeParam:function(e){var t=this;return p(me,t.param,e),t},fn:function(e){var t=this;return function(){return u(t[e])?t[e].apply(this,g(arguments)):we}},frontOn:function(e,t){var n=this,o=n._events[e]=n._events[e]||[];return o.unshift({callback:t,ctx:n}),n},scanWidget:function(e){a(this,e)},showWidget:function(e,t,n){var o=he._widgets;return o[e]?s(t)?o[e].adapter(t,n,this):o[e].adapter(we,t,n,this):void 0},destroy:function(){var e=this;return e.options.destroyDom&&X(e.root),clearTimeout(e._renderEventTimer),e._renderDeferred&&e._renderDeferred.destroy(),v(e.plugins,function(e,t){t&&u(t.destroy)&&t.destroy()}),v(e.widgets,function(e,t){t&&u(t.destroy)&&t.destroy()}),e.trigger("destroy"),e.off(),T(e),e.destroyed=me,e}}),f}),e("taskQ",function(){function e(e){he.trigger("running",me),q(e,[],me).done(function(){n.forEach(function(e){e&&u(e.destroy)&&e.destroy()}),n=we,he.trigger("running",ye)}).progress(function(){t.trigger("ev")})}var t=M(),n=we,o=500,r={push:function(t){n?n.push(t):(n=[t],e(n))},pushTask:function(e){r.push((new P).startWith(function(t){try{e(t)}catch(n){}m(function(){t&&u(t.resolve)&&t.resolve()},o)}))},addListener:function(e){t.on("ev",e)}};return r}),e("viewM",function(){function e(e){}function n(e){return e.split(":")[0]}function o(t,n,o){var r;y[t]&&y[t][n]?o(y[t][n]):h[t]?(r=y[t][n]=new f(p({name:t+":"+n},h[t])),r.on("destroy",function(){y[t][n]=we}),o(r)):e(t)}function r(t,n){var o=we;return y[t]&&y[t][n]?o=y[t][n]:h[t]?(o=y[t][n]=new f(p({name:t+":"+n},h[t])),o.on("destroy",function(){y[t][n]=we})):e(t),o}function i(e){var t=e.split(":");return{name:t[0],index:t[1]||0}}function a(e,t){v(t,function(t,n){0===t.indexOf("on")&&u(n)&&"onComplete"!=t&&e.on(t.substring(2).replace(/\w/,function(e){return e.toLowerCase()}),n)})}function l(e){return p.apply(we,[me,{}].concat(g(e).map(function(e){return c(e)?h[e]||{}:e})))}var f=t("view"),d=t("taskQ"),h=he._viewOptionsMap={},y=he._viewMap={},w={define:function(e){c(e)&&(h[e]=l(arguments),y[e]=[])},undefine:function(e){c(e)&&(h[e]=we)},getOptions:function(e){return h[e]},create:function(){var e=new f(l(arguments)),t=e.name;if(t){var n=i(t);y[n.name][n.index]=e,e.on("destroy",function(){y[n.name][n.index]=we})}return e},structure:function(e,t){t=t||{},t.ani=c(t.ani)?{name:t.ani}:t.ani||{};var n=p(me,{},w.getOptions(e.split(":")[0])),o=t.ani.name||Ee.defaultAnimate;n.name=e,n.init=n.init||{},n.init.param=t.param||{},n.styles=p(n.styles||{},t.styles),n.classNames=(n.classNames||[]).concat(t.classNames),o&&(n.plugins=(n.plugins||[]).concat([{name:o,options:p({},w.getExtraOption(e,o),t.ani)}]));var r=w.create(n);return r.param=p({},t.param),a(r,t),r.complete=function(e){u(t.onComplete)&&t.onComplete.call(r,e)},r.on("callback",r.complete),r},build:function(e){var t,n=l(g(arguments).slice(1));return e&&s(e)&&(n.name=Y(e,"qapp-name"),t=new f(n),t.staticBuild(e)),t},show:function(e,t){var n=g(arguments),o=w.structure(e,t);return d.pushTask(function(e){o.once("show",function(){e.resolve()}),o.once("hide",function(){m(function(){u(o.destroy)&&o.destroy()})}),o.show.apply(o,n.slice(2))}),o},exists:function(e){return!!h[e]},get:function(e,t){var n,r={};return c(e)&&(r=i(e)),u(t)?void o(r.name,r.index,function(e){t(e)}):n={invoke:function(){var e=g(arguments),t=e.shift();return o(r.name,r.index,function(n){ae(n[t],n,e)}),n},pushMessage:function(e,t){var o=y[r.name]&&y[r.name][r.index];return o&&o.trigger(e,t),n}}},getSync:function(e){var t,n={};return c(e)&&(t=e.split(":"),n={name:t[0],index:t[1]||0}),r(n.name,n.index)},getExtraOption:function(e,t){var o,r=h[n(e)];return r?(o=r.extra&&r.extra[Ee.type]||r.extra||{},o[t]):void 0},getHashParams:function(e){var t=h[n(e)];return t?t.hashParams||[]:[]},getRealName:n};return w}),e("viewQ",function(){function e(){var e,t=p[0];return t&&t.root&&(e=parseInt(W(t.root,"z-index"))),(e||x())-1}function o(){return p.length?p[p.length-1]:void 0}function r(e){var t,n=p.length;for(t=n-1;t>-1;t--)if(p[t].name==e)return t;return-1}function i(e){if(e.indexOf(":new")>-1)return e.replace(":new",":"+b());for(var t=0,n=p.length;n>t;t++)if(e==p[t].name.split(":")[0])return!1;return e}function a(e,t,n,o,r){t=t||"show",v(function(i){e.on(t.replace("_",""),function(){m(function(){i.resolve().done(r)})}),u(n)?n():(e[t](o),t.indexOf("hide")>-1&&!o&&i.resolve())})}function c(e){a(e,"_hide",function(){f.hide.call(e)})}function s(e){function t(){y.preView=y.curView,y.curView=e.name}var n=e.hide,o=e.close,r=e._events.show=e._events.show||[],i=e._events.actived=e._events.actived||[];r.unshift({callback:t,ctx:e}),i.unshift({callback:t,ctx:e}),e.once("hide",function(){var t=p.indexOf(e);t>-1&&(p.splice(t,1),m(function(){u(e.destroy)&&e.destroy()}))}),e.hide=e._hide=function(t){t===me?n.call(e):v(function(t){e.once("hide",function(){m(t.resolve)}),n.call(e)})},e.close=e._close=function(t){t===ye?o.call(e):v(function(t){e.once("hide",function(){m(t.resolve)}),o.call(e)})}}var l,f=t("display"),d=t("taskQ"),h=t("viewM"),p=[],v=d.pushTask,g=h.getRealName,y={curView:we,preView:we,add:function(e,t,o,r,a){v(function(c){if(e=i(e),u(a)&&a(e)===ye)return void c.resolve().done(s);var s=u(r)?r:n;e&&h.exists(g(e))?(y[o?"unshift":"push"](h.structure(e,t),s),c.resolve()):c.resolve().done(s)})},push:function(e,t){s(e),e.once("show",function(){var t=o();m(function(){e.trigger("actived"),t&&t.trigger("deactived")}),p.push(e)}),a(e,"show",we,ye,function(){t(e)})},unshift:function(t,n){s(t),t.once("show",function(){p.unshift(t),1===p.length&&m(function(){t.trigger("actived")})}),t.on("beforeShow",function(){t.initialShow=ye,W(t.root,"z-index",e()-1)}),a(t,"show",function(){t.show(me)},ye,function(){n(t)})},pop:function(e,t,n){var r=o();if(e===be&&(e=1),r&&e>0){var i=function(o){var i,u=p.length,s=u-e;if(s>=0)for(i=s;u-1>i;i++)c(p[i]);s>0&&e>0&&r.once("hide",function(){var e=p[s-1];e&&(t&&t.data&&e.trigger("receiveData",t),e.trigger("actived"))}),a(r,"_hide",we,o,n)};v(function(t){e<p.length?i(me):e==p.length&&(g(p[0].name)!==Ee.indexView?(y.add(Ee.indexView,{},me),v(function(e){i(ye),e.resolve()})):p.length>1&&(e=p.length-1,i(me))),t.resolve()})}},remove:function(e,t,n){v(function(o){var i=r(e);i>-1&&y.pop(p.length-i,t,n),o.resolve()})},backTo:function(e,t,n,o){v(function(i){var a=r(e),c=p.length;-1===a?y.add(g(e),{param:n},me,function(e){l._reset(e),y.pop(c,t,o)}):(c=p.length-a-1,y.pop(c,t,o)),i.resolve()})},refresh:function(e){var t=o();t&&t.trigger("receiveData",e)},clear:function(e,t){v(function(n){y.pop(p.length,e,t),n.resolve()})},inject:function(e){l=e}};return y}),e("history",function(){function e(e){return e.length>2&&e.lastIndexOf(":0")==e.length-2?e.substring(0,e.length-2):e}function n(e){e=z(e);var t=E.getOptions(e);return t&&t.supportHash!==ye?P.all&&P.except.indexOf(e)>-1?ye:P.all||-1!==P.exist.indexOf(e)?me:ye:ye}function o(e){return e[e.length-1]}function r(e,t){return B.trigger("change",{type:e,data:p(me,{},t)})}function i(){var e={},t=f();if(t.view&&t.view.indexOf("__")){if(S)D=X;else if(t.query[X])I=t.query[X],D=j+I;else{do I=b(),D=j+I;while(N[D]);h(t,me)}try{e=JSON.parse(N.getItem(D))||{}}catch(n){}e.basePath==U&&(V=g(e.history),W=e.index,V[W]!==t.view&&(V=[],W=0,N.removeItem(D))),V.length||V.push(t.view),Y=V.slice(0),R=W}}function a(){try{N.setItem(D,JSON.stringify({basePath:U,history:V,index:W}))}catch(e){}}function c(e,t){t?V[W]=e:(W++,V=V.slice(0,W),V.push(e)),a()}function u(){var e,t=k.hash,n=t.indexOf("#");return q?t=k.pathname.replace(q.basePath,"").replace(q.ext,""):(t=n>-1?t.slice(n+1):"",e=t.indexOf("#"),e>-1&&(t=t.slice(0,e))),t}function s(e,t){var n=U+"#"+e;if(w=e,A){if(q){var o=e.split("?");n=U+o[0]+q.ext+(o.length>1?"?"+o.slice(1).join("?"):"")}T[(t?"replace":"push")+"State"]({path:n},ge.title,n)}else t?k.replace(n):k.href=n}function f(t){t=t||u();var n=t.split("?"),o=e(n[0])||Ee.indexView,r=_(n[1]||"",me);if(Ee.jsonParam&&r._param)try{r=p(me,r,JSON.parse(r._param)),delete r._param}catch(i){}return{view:o,query:r}}function d(){return x?x:x=L?function(){var e=f();return e[X]=be,e}():o(F)}function h(e,t){e=e||{};var n,o=e.view||Ee.indexView,i=e.query||{},a=d();if(t=t||o==a.view,x=we,L){if(S||(i[X]=I),c(o,t),r("willForward",{view:o,query:i})===ye)return ye;n=O(Ee.jsonParam?{_param:JSON.stringify(i)}:i,me),s(o+(n?"?"+n:""),t)}else{var u={view:o,query:i};t?F[F.length-1]=u:F.push(u)}return me}function v(e){var t,o=e?f(e):d(),i=o.view,u=V.indexOf(i);-1===u?(c(i),r("forward",{info:o})):(t=u-W,W=u,0>t?n(o.view)?r("back",{info:o,param:Q.shift()}):T.back():0===t?r("refresh",{info:o}):1===t?n(o.view)?r("forward",{info:o}):T.go(W<V.length-1?1:-1):m(function(){k.reload()}),a())}function y(){ve.addEventListener(H,function(){w!==u()&&(w=u(),x=we,v())})}var w,x,E=t("viewM"),k=ve.location,T=ve.history,C=ve.sessionStorage,S=!!C,N=S?ve.sessionStorage:ve.localStorage,L=me,P=we,q=we,A=!!T.pushState,H=A?"popstate":"hashchange",j="QAPP_HISTORY_",I=0,D="",X="_history",V=[],Y=[],W=0,R=0,F=[],B=M(),z=E.getRealName,Q=[],U=function(){var e=ue(k.href);return e.hash={},delete e.query._qtid,e.toUrl()}(),G={basePath:U,start:function(){var e;if(L){if(P=Ee.hashSupport,q=A?P.usePath:ye,q&&(T.basePath=U=k.origin+q.basePath),w=u(),e=d(),i(),!n(e.view)){if(W>0)return W--,x=we,T.back(),a(),void m(function(){G.start(flag)},100);e={view:Ee.indexView,query:{}},h(e,me)}r("init",{info:d()}),y()}else e={view:Ee.indexView,query:f().query},F.push(e),r("init",{info:e})},analyzeHash:f,setHashInfo:h,getHashInfo:d,refreshParam:function(e){var t=d();t.query=p(t.query,e),h(t,me)},back:function(e,t){l(e)||(e=1,t=e);var n=d().view,i={view:z(n),name:n,data:t};if(e=e||1,L)if(Q.push(i),W>e-1)T.go(-e);else{var a=Ee.indexView;0===W&&a===n?(he.trigger("close"),
T.go(-1)):(W>0&&T.go(-W),h({view:a},me),r("home",{info:d()}))}else{var c=F.length-e;1>c&&(c=1),F=F.slice(0,c),x=we,r("back",{info:o(F),param:i})}},backTo:function(e,t,n){var o,i=L?V:F.map(function(e){return e.view}),a=L?W:i.length-1;for(o=a;o>-1;o--)if(!n&&z(i[o])===e||i[o]===e)return o===a?r("refresh",{info:d(),param:t}):G.back(a-o,t),me;return ye},home:function(e){G.back(L?W:F.length-1,e)},exit:function(){he.trigger("close"),L?T.go(-W-1):T.back()},onChange:function(e){B.on("change",e)},buildHash:function(e,t){var n=e.view,o=e.query,r=O(Ee.jsonParam?{_param:JSON.stringify(o)}:o,me);return(t?"":U)+"#"+n+(r?"?"+r:"")},buildPath:function(e){var t=e.view,n=e.query,o=O(Ee.jsonParam?{_param:JSON.stringify(n)}:n,me);return U+t+q.ext+(o?"?"+o:"")},reset:function(){V=Y.slice(0),W=R},getAll:function(){return{index:W,list:L?V:F}},setOptions:function(e,t){L=!!e,P=t,q=A&&P?P.usePath:ye},usePath:function(){return q}};return G}),e("router",function(){function e(e){if(e){var t,n=e.complete;e.hide=function(e){y.back(1,e||t)},e.complete=function(o){t=o,ae(n,e,[o])}}}function n(t){i.onChange(function(t){var n=t.data,o=n.info,r=n.param,i=t.type;switch(i){case"init":Ee.autoInit&&a.add(o.view,{param:o.query},me,function(t){e(t),d.trigger(i,t)});break;case"forward":m(function(){d.trigger("willForward",o)===!1?history.back():a.add(o.view,{param:o.query},ye,function(t){e(t),d.trigger(i,t)})},100);break;case"refresh":a.refresh({view:c.getRealName(o.view),name:o.view,data:r}),d.trigger(i);break;case"back":case"home":m(function(){a.backTo(o.view,r,o.query,function(){d.trigger(i)})},100);break;case"willForward":return d.trigger(i,n)}}),i.start(t)}function o(){f.add("router","tap",function(e){var t,n,o,r,a=e.el,c=Y(a,"href"),u=Y(a,"target"),s=_(Y(a,"param")||"",me);c.indexOf("#!")?c.indexOf("#")||(c=c.slice(1),t=i.analyzeHash(c),"_blank"===u?y.open(t.view+":new",{param:p(t.query,s)}):(r=t.view.split(":"),n=r.length>0,"0"==r[1]&&(t.view=r[0]),y.backTo(t.view,s,n)===ye&&y.open(t.view,{param:p(t.query,s)}))):2==c.indexOf("home")?y.home(s):(c=c.slice(2),o=c.match(l),o&&y.back(o[2]||1,s))})}function r(e){return function(){var t=g(arguments);return t[1]&&t[1].skipFilter||v.reduce(function(e,n){return e&&n(t)!==ye},me)?ae(i[e],i,t):void 0}}var i=t("history"),a=t("viewQ"),c=t("viewM"),s=ye,l=/back(\((\d+)\))?/,f=ce(ge,[],xe.role),d=M(),h=[],v=[],y=p(d,{start:function(){s||(s=me,n(),o(),i.onChange(function(e){d.trigger("history",e)}))},open:function(t,n,o){var r=g(arguments);if(r[1]&&r[1].skipFilter||h.reduce(function(e,t){return e&&t(r)!==ye},me)){n=n||{};var c=n.param||{};a.add(t,n,!!n.atBottom,function(t){t?(e(t),ae(o,t,[t]),n.atBottom||d.trigger("forward",t)):ae(o)},function(e){return i.setHashInfo({view:e,query:c})})}},transfer:function(e,t){m(function(){if(i.usePath())location.href=i.buildPath({view:e,query:t});else{var n=ue(i.basePath);n.setQuery("_qtid",Date.now()),location.href=n.toUrl()+i.buildHash({view:e,query:t},!0)}})},back:r("back"),backTo:r("backTo"),home:r("home"),"goto":function(e,t,n,o){i.backTo(e,n,o)===ye&&y.open(e,t)},exit:i.exit,refreshParam:i.refreshParam,addOpenFilter:function(e){u(e)&&(h=h.concat(e))},removeOpenFilter:function(e){var t=h.indexOf(e);t>-1&&h.splice(t,1)},addBackFilter:function(e){u(e)&&(v=v.concat(e))},removeBackFilter:function(e){var t=v.indexOf(e);t>-1&&v.splice(t,1)},getCurViewName:function(e){return a.curView&&(e?a.curView:c.getRealName(a.curView))},getPreViewName:function(e){return a.preView&&(e?a.preView:c.getRealName(a.preView))},buildUrl:function(e){return i.usePath()?i.buildPath(e):i.buildHash(e)},getCurInfo:i.getHashInfo,resetHistory:i.reset,_getHistory:function(){return i.getAll()},_newSite:function(){ve.open(i.basePath)},_reset:e});return a.inject(y),y});var rt=t("viewM"),it=t("history"),at=t("router"),ct=t("pluginM"),ut=t("widgetM"),st={},lt=new P,ft=[],dt=100;de(function(){function e(){o=n.clientWidth,r=n.clientHeight,p(st,{width:o,height:r,rootWidth:o-Ee.root.left-Ee.root.right,rootHeight:r-Ee.root.top-Ee.root.bottom}),W(ge.body,"height",r+"px"),W(i,{height:st.rootHeight+"px",width:st.rootWidth+"px"})}function t(){var t=n.clientHeight;(ke.ios||t>r-dt)&&t!=r&&e()}var n=ge.documentElement,o=n.clientWidth,r=n.clientHeight,i=ge.createElement(xe.app);p(st,{width:o,height:r,rootTop:Ee.root.top,rootLeft:Ee.root.left}),W(ge.body,"height",r+"px"),Ee.customRoot?(st.rootWidth=o-Ee.root.left-Ee.root.right,st.rootHeight=r-Ee.root.top-Ee.root.bottom,W(i,{top:st.rootTop+"px",left:st.rootLeft+"px",height:st.rootHeight+"px",width:st.rootWidth+"px"}),I(ge.body,i)):(st.rootWidth=o,st.rootHeight=r,i=ge.body),he.root=Ee.appRoot=i,he.checkResize=t,at.start(),Ee.screen&&(Ee.screen.autoResize&&ve.addEventListener("resize",t),Ee.screen.rotate&&et.on("change",e)),Ee.preventMove&&B(ge,"touchmove",function(e){e.preventDefault()})}),he=p(he,M()),p(he,{config:function(e){var t=p(me,Ee,e),n=t.plugins,o=t.globalPlugins;return a(o)&&ct.setGlobal(o),a(n)?n.forEach(function(e){e&&n.name&&ct.setOpt(e.name,e.options)}):n&&v(n,function(e,t){e&&ct.setOpt(e,t)}),it.setOptions(t.hashRouter,t.hashSupport),t},root:ge.body,origin:st,defineView:rt.define,undefineView:rt.undefine,createView:rt.create,buildView:rt.build,existsView:rt.exists,getView:rt.get,getViewSync:rt.getSync,addPlugin:ct.add,configPlugin:ct.setOpt,setGlobalPlugins:ct.setGlobal,addWidget:ut.add,showWidget:ut.show,router:at,open:at.open,exit:at.exit,view:rt,show:rt.show,showView:rt.show,hash:{getInfo:it.getHashInfo,setInfo:it.setHashInfo,analyzeHash:it.analyzeHash,setParam:it.refreshParam,build:it.buildHash},sniff:ke});var ht=he.util={};ht.ready=H,he.ready=de,he.addReadyDependencies=function(e){ft.push(e)},ht.query=function(e){return ge.querySelector(e)},ht.queryAll=function(e){return ge.querySelectorAll(e)},ht.is=r,ht.isObject=i,ht.isString=c,ht.isArray=a,ht.isFunction=u,ht.isNumber=l,ht.isElement=s,ht.isPlainObject=f,ht.isEmptyObject=d,ht.extend=p,ht.each=v,ht.makeArray=g,ht.delay=m,ht.associate=y,ht.mapping=w,ht.camelCase=E,ht.dasherize=k,ht.empty=T,ht.noop=n,ht.getUniqueID=b,ht.getZIndex=x,ht.jsonToQuery=O,ht.queryToJson=_,ht.parseURL=ue,ht.loader=le,ht.builder=j,ht.appendNodes=I,ht.insertElement=D,ht.removeNode=X,ht.attr=Y,ht.css=W,ht.removeStyle=R,ht.addClass=U,ht.removeClass=G,ht.fixEvent=F,ht.addEvent=B,ht.removeEvent=z,ht.dispatchEvent=Q,ht.createStyle=J,ht.size=te,ht.position=re,ht.contains=Be,ht.focus=$,ht.blur=Z,ht.animate=ze,ht.dataSet=ie,ht.delegatedEvent=ce,ht.CustEvent=ht.custEvent=Fe,ht.Deferred=ht.deferred=P,ht.queue=q,ht.parallel=A,he.logger=ht.logger=fe,ve.QApp=he,H(function(){ft.length?A(ft).done(function(){lt.resolve()}):lt.resolve()}),function(){var e=he.util;he.addPlugin("static",function(t,n,o){t.on("rendered",function(){t.root&&e.css(t.root,{position:"absolute",width:"100%",height:"100%"})})})}(),function(){function e(e){R(e,a)}function t(e){W(e,c,""),R(e,c)}function n(e){return~(e+"").indexOf("%")||~(e+"").indexOf("px")?e:e+"px"}function o(e,t,n){t.on("loadEnd",function(){Y(t.root,"qapp-ani",e),W(t.root,c,"hidden")}),t.on("beforeHide",function(){Z(t.root)}),t.on("destroy",function(){t.show=we,t.hide=we})}function r(e,t){var n,o,r=-1;for(n=0,o=e.length;o>n;n++)if(e[n].view===t){r=n;break}return r}function i(e,t,n,o,r){var i=0;return A(e.map(function(e,r){return t>r?(e.view.trigger("beforeHide"),ze(e.view.root,o?s(e.translate,0,0):s(0,e.translate,0),n)):(i+=e.distance,ze(e.view.root,o?s(i,0,0):s(0,i,0),n))}))}var a="display",c="visibility",u=function(){var e=navigator.userAgent.toLowerCase();return ke.ios||ke.android&&e.indexOf("micromessenger")>-1?1:2}(),s=1==u?function(e,t,n){return{translate3d:e+"px, "+t+"px, "+n+"px"}}:function(e,t,n){return{translate:e+"px, "+t+"px",translateZ:n+"px"}},l=10,f={position:"right",distance:0,duration:200,zIndex:0},d={},h=ye;he.addPlugin("moveEnter",f,function(a,c,v){var g,y,w={position:"absolute",top:0,zIndex:c.zIndex||x()},b=v.type.indexOf&&-1===v.type.indexOf("pad"),E="right"===c.position||"left"===c.position,k="right"===c.position||"bottom"===c.position?-1:1,T=ye,C=ye,S=ye;if(c.panBack===be&&(c.panBack="app"===v.type),b&&(c.distance=E?st.rootWidth:st.rootHeight),g=k*c.distance,v.animate||(c.duration=0),b?(y=[],w.width="100%",w.height="100%"):(d[c.position]||(d[c.position]=[]),y=d[c.position],w[E?"height":"width"]="100%"),c.panBack&&b&&("right"===c.position||"left"===c.position)){var O=function(e){return~e.directions.indexOf(c.position)?e.clientX-e.offsetX<l:ye},N=function(e){S?W(a.root,s(e.offsetX,0,0)):C||(C=me,S=O(e))},_=function(e){S&&(S=ye,Math.abs(e.offsetX)>Math.abs(c.distance)/2?a.hide():ze(a.root,s(0,0,0),c.duration/2).done()),C=ye};a.on("show",function(){B(a.root,"pan",N),B(a.root,"panend",_)}),a.on("hide",function(){z(a.root,"pan",N),z(a.root,"panend",_)}),a.on("rendered",function(){var e=ge.createElement("div");e.className="touch-opacity",W(e,{position:"absolute",zIndex:"9999",width:n(l),height:"100%",backgroundColor:"rgba(255, 255, 255, 0)"}),W(e,"right"===c.position?"left":"right","0"),U(a.root,"shadow"),a.root.appendChild(e)})}return a.on("loaded",function(){c.distance||(c.distance=te(a.root)[E?"width":"height"]),b?3===u?"bottom"===c.position?w.top=n(st.rootHeight):w[c.position]=n(-c.distance):("bottom"===c.position?w.top=n(st.rootHeight-c.distance):w[c.position]=n(0),p(w,E?s(-k*c.distance,0,0):s(0,-k*c.distance,0))):"bottom"!==c.position?w[c.position]=n(-c.distance):w.top=n(st.rootHeight),W(a.root,w)}),o("moveEnter",a,c),a.show=function(n){if(Z(),!h){h=me,T=me;var o=r(y,a);~o?i(y,o,n===me||a.preventAnimate?0:c.duration,E).done(function(){y.splice(0,o).forEach(function(e){e.view.trigger("hide")}),h=ye,T=ye,a.trigger("refresh")}):(a.once("completed",function(){e(a.root),t(a.root),a.trigger("beforeShow"),y.unshift({view:a,distance:b?0:g,translate:b?-g:0}),m(function(){i(y,0,n===me||a.preventAnimate?0:c.duration,E,a.root).done(function(){h=ye,T=ye,R(a.root,"transform"),a.trigger("show")})})}),a.renderTo(he.root))}return a},a.hide=function(e){if((!h||b&&!T)&&a.isShow){h=me;var t=r(y,a);i(y,t+1,e===me||a.preventAnimate?0:c.duration,E).done(function(){y.splice(0,t+1).forEach(function(e){e.view.trigger("hide")}),h=ye})}return a},a.on("destroy",function(){w=we,y=we,a=we}),{setOption:function(e){c=p({},f,e)}}})}()}(),function(){function e(e,t,n,o){e.addEventListener(t,n,!!o)}function t(e){var t=e.length;if(t===t>>>0)try{return j.call(e)}catch(n){}return!0}function n(t){/complete|loaded|interactive/.test(document.readyState)&&document.body?t():e(document,"DOMContentLoaded",function(){t()})}function o(){return 2==x}function r(e){return Object.getOwnPropertyNames(e)}function i(e){return 0===r(e).length}function a(e){return"tagName"in e?e:e.parentNode}function c(e){var t=document.createEvent("HTMLEvents");return t.initEvent(e,!0,!0),t}function u(e,t){H&&e&&e.dispatchEvent&&e.dispatchEvent(t)}function s(e,t){return b.forEach(function(n){e[n]=t[n]}),e}function l(e,t){var n=[],o=Math.abs(e),r=Math.abs(t),i=Math.tan(C/180*Math.PI),a=o>r;return(o>0||r>0)&&(n.push(a?e>0?"right":"left":t>0?"down":"up"),a&&r/o>i?n.push(t>0?"down":"up"):!a&&o/r>i&&n.push(e>0?"right":"left")),n}function f(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function d(e,t){var n=Math.atan2(t,e)/Math.PI*180;return 0>n?n+360:n}function h(e,t){var n=Math.atan(-1*t/e)/Math.PI*180;return 0>n?n+180:n}function p(e,t){for(var n=P-h(e,t);Math.abs(n-q)>90;)0>q?n-=180:n+=180;return q=n}function v(e,t,n,o,r){var i=c(e);return i.offsetX=t,i.offsetY=n,i.degree=d(t,n),i.directions=l(t,n),r&&(i.duration=r,i.speedX=i.offsetX/r,i.speedY=i.offsetY/r),s(i,o)}function g(e,t,n,o,r,i,a){var u=c(e);return u.centerX=t,u.centerY=n,void 0!==o&&(u.scale=o),void 0!==r&&(u.deflection=r),u.touchs=[i,a],u}function m(){var e=!0;for(var t in L)if("end"!=L[t].status){e=!1;break}return e}function y(e){I[e?"disable":"enable"]()}var w=window.QApp,b=["screenX","screenY","clientX","clientY","pageX","pageY"],x=2,E=200,k=300,T=10,C=15,S=500,O=10,N=null,_=null,L={},M=0,P=0,q=0,A=!0,H=!0,j=Array.prototype.slice;n(function(){function n(e){i(L)&&(N=a(e.touches[0].target)),t(e.changedTouches).forEach(function(e,t){var n=r(L);if(n.length<x){var i=s({},e),a={startTouch:i,curTouch:i,startTime:Date.now(),status:"tapping",other:null,handler:setTimeout(function(){a&&("tapping"==a.status&&(a.status="pressing",u(N,s(c("press"),i))),clearTimeout(a.handler),a.handler=null)},E)};if(u(N,s(c("feel"),i)),L[e.identifier]=a,o()&&1==n.length){var l=L[n[0]].startTouch,d=i.clientX-l.clientX,p=i.clientY-l.clientY,v=(i.clientX+l.clientX)/2,g=(i.clientY+l.clientY)/2;a.other=L[n[0]],L[n[0]].other=a,_={centerX:v,centerY:g,pinch:!1,deflection:!1,distance:f(d,p)},P=h(d,p)}}})}function l(e){t(e.changedTouches).forEach(function(e,t){var n=L[e.identifier];if(n){var r=n.startTouch,i=e.clientX-r.clientX,a=e.clientY-r.clientY;if("tapping"==n.status||"pressing"==n.status?f(i,a)>T&&(n.status="panning",n.startMoveTime=Date.now(),u(N,v("pan",i,a,e))):"panning"==n.status&&u(N,v("pan",i,a,e)),o()&&n.other&&"end"!=n.other.status){var c=n.other.curTouch,l=e.clientX-c.clientX,d=e.clientY-c.clientY,h=(e.clientX+c.clientX)/2,m=(e.clientY+c.clientY)/2,y=f(l,d);if(_.pinch?u(N,g("pinch",h,m,y/_.distance,void 0,e,c)):Math.abs(_.distance-y)>O&&(_.pinch=!0,u(N,g("pinch",h,m,y/_.distance,void 0,e,c))),_.deflection){var w=p(l,d);u(N,g("rotate",h,m,void 0,w,e,c))}else{var w=p(l,d);Math.abs(w)>C&&(u(N,g("rotate",h,m,void 0,w,e,c)),_.deflection=!0)}}n.curTouch=s({},e)}})}function d(e){if(t(e.changedTouches).forEach(function(e,t){var n=L[e.identifier];if(n){if(n.handler&&(clearTimeout(n.handler),n.handler=null),"tapping"==n.status)u(N,s(c("tap"),e));else if("pressing"==n.status)A&&u(N,s(c("tap"),e)),u(N,s(c("pressend"),e));else if("panning"==n.status){var r=n.startTouch,i=e.clientX-r.clientX,a=e.clientY-r.clientY,l=Date.now()-n.startMoveTime;u(N,v("panend",i,a,e,l)),k>l&&u(N,v("flick",i,a,e,l))}if(o()&&n.other&&"end"!=n.other.status){var d=n.other.curTouch,h=e.clientX-d.clientX,m=e.clientY-d.clientY,y=(e.clientX+d.clientX)/2,w=(e.clientY+d.clientY)/2,b=f(h,m);if(_.pinch&&u(N,g("pinchend",y,w,b/_.distance,void 0,e,d)),_.deflection){var x=p(h,m);u(N,g("rotatend",y,w,void 0,x,e,d))}x=0}n.status="end"}}),m())for(var n in L)delete L[n]}var y=document.body;e(y,"touchstart",n),e(y,"touchmove",l),e(y,"touchend",d),e(y,"tap",function(e){var t=Date.now();S>t-M?(u(N,s(c("doubletap"),e)),M=0):M=t})});var I={enable:function(){H=!0},disable:function(){H=!1},disableLongTap:function(){A=!1}};w.on("running",y),w.gesture=I,w.gesture.disableTransferCtrl=function(){w.off("running",y)}}(),function(){"use strict";function e(t,o){function r(e,t){return function(){return e.apply(t,arguments)}}var i;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=t,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,u=0,s=a.length;s>u;u++)c[a[u]]=r(c[a[u]],c);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,o){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,o):r.call(t,e,n,o)},t.addEventListener=function(e,n,o){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),o):r.call(t,e,n,o)}),"function"==typeof t.onclick&&(i=t.onclick,t.addEventListener("click",function(e){i(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,o;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],o){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,c,u,s,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,i&&(s=e.changedTouches[0],l=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),"label"===c){if(t=this.findControl(l)){if(this.focus(l),n)return!1;l=t}}else if(this.needsFocus(l))return e.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,e),o&&"select"===c||(this.targetElement=null,e.preventDefault()),!1);return o&&!r&&(u=l.fastClickScrollParent,u&&u.fastClickLastScrollTop!==u.scrollTop)?!0:(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,o,r,i;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(i=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],i>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e,QApp.addPlugin("fastclick",{},function(t,n){var o;return t.on("show",function(){o=new e(t.root,n)}),t.on("destroy",function(){o&&o.destroy&&o.destroy()}),{getEntity:function(){return o}}}),QApp.setGlobalPlugins("fastclick")}();